<!doctype html>
<html lang="us">
<head>
	<meta charset="utf-8">
	<title>chardee macdennis!</title>
	<!--<link href="jquery-ui.css" rel="stylesheet">-->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
	<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
	<style>
	body{
		font-family: "Trebuchet MS", sans-serif;
		margin: 50px;
	}
	.demoHeaders {
		margin-top: 2em;
	}
	p{
		font-size: 14px;
	}
	#initClass {
		padding: .4em 1em .4em 20px;
		text-decoration: none;
		position: relative;
	}
	#initClass span.ui-icon {
		margin: 0 5px 0 0;
		position: absolute;
		left: .2em;
		top: 50%;
		margin-top: -8px;
	}
	#icons {
		margin: 0;
		padding: 0;
	}
	#icons li {
		margin: 2px;
		position: relative;
		padding: 4px 0;
		cursor: pointer;
		float: left;
		list-style: none;
	}
	#icons span.ui-icon {
		float: left;
		margin: 0 4px;
	}
	.fakewindowcontain .ui-widget-overlay {
		position: absolute;
	}
	select {
		width: 200px;
	}
	
	.floorContainer {
	
		display:grid;
		
		grid-template-columns: 100px 100px 100px 100px 100px;
		
		width: 500px;
		height: 500px;
		background: gray;

	}
	

	.floorContainer > button {
		width: 73px;
		height 100px;
		float: left;
		background: lightgray;   
		margin: 15px;
		text-align: center;
	}
	
	.roomContainer {
		display: grid;
		grid-template-columns: 20px 20px 20px 20px 20px 20px 20px 20px 20px 20px 20px 20px 20px 20px 20px 20px;
		grid-column-gap: 10px;
		grid-row-gap: 10px;
		width: 480px;
		height: 600px;
		background: gray;
		overflow-y: auto;
	}
	
	.roomContainer > button {
	
		width: 25px;
		height:25px;
		float: left;
		background: lightgray;   
		//margin: 4px;
		//padding-top: 8px;
		//padding-bottom: 8px;
		//	padding-left: 10px;
		text-align: center;
		font-size: 11px;
	}
	
	.profBar {
	
		width:70px;
		height:20px;
		
	}
	
	.profGrid {
		display: grid;
		grid-template-columns: 135px 130px 130px 130px 130px 130px;
		
		width: 800px;
		height: 96px;
		overflow-y: auto;
		
		grid-row-gap: 5px;
		

		
		/*grid-gap: 20px 5px;*/
	}
	
	.profLabel {
	
		font-size: 14px;
	}
	
	.profLevLab {
	
		font-size: 12px;
	}
	
	.floorButCont {
	
		display:grid;
		
		grid-template-columns: 100px 100px;
		
		width: 100px;
		height: 100px;

	}
	
	.createFloor {
	
		grid-column: 1/3;
	}

	.floorEditGrid1 {
	
		display:grid;
	
		grid-template-columns: 30px 30px 30px 30px 30px 30px 30px 30px 30px 30px 30px 30px;
		grid-column-gap:30px;
		grid-row-gap:20px;
		
		height:40px;

		
		text-align: center;
	}
	
	.floorEditGrid2 {
	
		display:grid;
	
		grid-template-columns: 60px 60px 60px 60px 60px 60px 60px 60px 60px 60px 60px 60px 60px 60px 60px;
		grid-column-gap:20px;
		grid-row-gap:20px;
		
		height:70px;
		
		text-align: center;
	}
	
	.formGrid {
		display: grid;
		grid-template-columns: auto auto auto;
		width: 500px;
		height: 150px;
		overflow-y: auto;
	}
	
	.formSetGrid {
		display: grid;
		grid-template-columns: auto auto auto auto auto auto auto auto auto;
		grid-column-gap: 20px;
		width: 600px;
		height: 30px;
		overflow-y: auto;
	}
	
	.passivesResistGrid {
		display: grid;
		grid-template-columns: auto auto auto auto auto auto auto auto;
		
		
		grid-row-gap: 20px;
		grid-column-gap: 20px;
		

		
		/*grid-gap: 20px 5px;*/
	}
	
	.passivesImmuneGrid {
		display: grid;
		grid-template-columns: auto auto auto auto auto auto auto auto;
		
		
		grid-row-gap: 20px;
		grid-column-gap: 20px;
		

		
		/*grid-gap: 20px 5px;*/
	}
	
	.passivesGrid {
		display: grid;
		grid-template-columns: auto auto auto auto auto auto;
		
		
		grid-row-gap: 10px;
		

		
		/*grid-gap: 20px 5px;*/
	}
	
	.passivesGrid > label {
	
		width: 150px;
		height: 40px;
		font: 12px;
	}
	
	.playerStatsGrid {
	
		display: grid;
		grid-template-columns: 150px 150px;
		
		width:400px;
		grid-row-gap: 20px;
		grid-column-gap: 20px;
	
	}
	
	.monstStatsGrid {
	
		display: grid;
		grid-template-columns: 150px 150px;
		
		width:400px;
		grid-row-gap: 20px;
		grid-column-gap: 20px;
	
	}
	
	
	.levelGrid {
		display: grid;
		grid-template-columns: 80px 40px 40px;
		
		
		grid-column-gap: 10px;
		width:200px
		

		
		/*grid-gap: 20px 5px;*/
	}
	
	.levelGrid > button{
		height:30px;
		width:30px;
		padding: 2px 6px 6px 6px;
		
	}
	
	.enterFromGrid {
		display: grid;
		grid-template-columns: 40px 40px 40px;
		
		
		grid-column-gap: 10px;
		width:200px
		
		

		
		/*grid-gap: 20px 5px;*/
	}
	
	.movementGrid {
		display: grid;
		grid-template-columns: 40px 40px 40px;
		
		
		grid-column-gap: 10px;
		width:200px
		
		

		
		/*grid-gap: 20px 5px;*/
	}
	
	.passivesNegGrid {
		display: grid;
		grid-template-columns: auto auto auto auto auto auto;
		
		
		grid-row-gap: 10px;
		

		
		/*grid-gap: 20px 5px;*/
	}
	
	.ailmentsGrid {
		display: grid;
		grid-template-columns: auto auto auto auto auto auto;
		
		grid-column-gap: 20px;
		grid-row-gap: 10px;
	}
	
	.tempEffectGrid {
		display: grid;
		grid-template-columns: auto auto auto auto auto auto;
		
		grid-column-gap: 20px;
		grid-row-gap: 10px;
	}


	
	</style>
</head>
<body>

<h1>Welcome to chardee macdennis!</h1>

<p><a href="https://docs.google.com/document/d/1-gGId2ghVJlkAES-ZdD8JQEqY_TpWLZn89FcLH-449A/edit?usp=sharing">Manual</a></p>

<iframe src="https://docs.google.com/document/d/e/2PACX-1vR0xJ-v5zoks4Dh39WHsoJwqJeZ60bYLEOi_8S9tOiHnHuQ_4U27HqXK5JOhlwWbZaeJx-jyQUdAJPU/pub?embedded=true"></iframe>
<br>
<div id="formationTab">
	<ul>
		<li><a href="#formationTab-1">Formation</a></li>
	</ul>

	<div id="formationTab-1">
		
		<fieldset>
			<legend>Set Formation</legend>
			<div class="formGrid">
				<label for="formRadio1"> </label>
				<input type="radio" name="formRadio1" id="formRadio1">
				<label for="formRadio2"> </label>
				<input type="radio" name="formRadio1" id="formRadio2">
				<label for="formRadio3"> </label>
				<input type="radio" name="formRadio1" id="formRadio3">
				<label for="formRadio4"> </label>
				<input type="radio" name="formRadio1" id="formRadio4">
				<label for="formRadio5"> </label>
				<input type="radio" name="formRadio1" id="formRadio5">
				<label for="formRadio6"> </label>
				<input type="radio" name="formRadio1" id="formRadio6">
				<label for="formRadio7"> </label>
				<input type="radio" name="formRadio1" id="formRadio7">
				<label for="formRadio8"> </label>
				<input type="radio" name="formRadio1" id="formRadio8">
				<label for="formRadio9"> </label>
				<input type="radio" name="formRadio1" id="formRadio9">
			</div>
			<br>
			<div class="formSetGrid">
				<button id="formSet1">P1</button>
				<button id="formSet2">P2</button>
				<button id="formSet3">P3</button>
				<button id="formSet4">P4</button>
				<button id="formSet5">P5</button>
				<button id="formSet6">P6</button>
				<button id="formSet7">P7</button>
				<button id="formSet8">P8</button>
				<button id="formSet9">P9</button>
			</div>
			<br>
			<button id="clearForm">Clear Formation</button>
		</fieldset>
	
	</div>
</div>
<script>
function rollDie(sides, amount, floor) {
	
	if (floor==undefined) {
	
		floor=1;
	}
	
	let num=0;
	
	for (q=0; q<amount; q++){

		num+=Math.floor((Math.random() * sides) + floor);
	}

	return num;
}

function rollDie0(sides, amount) {
	
	let num=0;
	
	for (r=0; r<amount; r++){

		num+=Math.floor(Math.random() * sides);
	}

	return num;
}


var currFormIndex=-1;

$("#formationTab").tabs({collapsible: true});

$( function() {
	$( "input[type=\"radio\"]" ).checkboxradio();
} );
  
// $( "#formRadio1" ).click(function( event ) { 
$("div.formGrid").find("input").click(function( event ) {
 
		//currFormIndex=0;
		
		//alert(this.id);
		
		var tempIndex=this.id;
		
		tempIndex=tempIndex.replace("formRadio", "");

		tempIndex=parseInt(tempIndex);
		
		tempIndex--;
		
		//alert(tempIndex);
		
		currFormIndex=tempIndex;
});

var hasFormation=false;

$("div.formSetGrid").find("button").click(function( event ) {
 
		if (currFormIndex>=0) {
			
			var tempIndex=currFormIndex;
			var tempSetIndex;
			var tempText;
			var tempIndex2;
			
			hasFormation=true;
			
			tempIndex++;
			
			tempSetIndex=this.id;
			tempSetIndex=tempSetIndex.replace("formSet", "")
			
			tempText=$("#formSet" + tempSetIndex).html();
			//alert(tempText);
			
			if (formArr.includes(tempText)==false) {
			
				
				
				//alert(tempText);
				
				//<label for="formRadio8"> </label>
				//$("label[for=formRadio" + tempIndex + "]").html("<label for=\"formRadio"+tempIndex + "\">" + tempText + "</label>");
				//$("label[for=formRadio" + tempIndex + "]").html("<label for=\"formRadio1\">" + tempText + "</label>");
				
				//$("label[for=formRadio" + tempIndex + "]").label(tempText);
				
				$("#formRadio" + tempIndex).checkboxradio("option", "label", tempText );
				
				tempIndex--;
				
				formArr[tempIndex]=tempText;
			
			}
			
			else if (formArr.includes(tempText)==true){
			

	
				
				//find index of where the current one is
				
				
				for (i=0;i<playersMax;i++) {
					
						if (formArr[i]==tempText) {
						
							formArr[i]="";
							tempIndex2=i;
						}
				}
			
				//formArr[tempIndex2]=0;
				tempIndex2++;
			
				
				//blank it
				$("#formRadio" + tempIndex2).checkboxradio("option", "label", " " );
				
				
				
				//set new location
				$("#formRadio" + tempIndex).checkboxradio("option", "label", tempText );
				
				tempIndex--;
				
				formArr[tempIndex]=tempText;
				
			
			}
		
		}
});


$( "#clearForm" ).click(function( event ) {

	for (i=0;i<playersMax; i++) {
	
		tempIndex=i;
		tempIndex++;
	
		formArr[i]="";
		
		//$("label[for=formRadio" + tempIndex + "]").html("");
		
		$("#formRadio" + tempIndex).checkboxradio("option", "label" , " ");
		
	}

});

</script>


<!-- Tabs -->
<h2 class="demoHeaders">Player Stuff</h2>
<div id="playerTabs">
	<ul>
		<li><a href="#playerTabs-1">Player 1</a></li>
		<li><a href="#playerTabs-2">Player 2</a></li>
		<li><a href="#playerTabs-3">Player 3</a></li>
		<li><a href="#playerTabs-4">Player 4</a></li>
		<li><a href="#playerTabs-5">Player 5</a></li>
		<li><a href="#playerTabs-6">Player 6</a></li>
		<li><a href="#playerTabs-7">Player 7</a></li>
		<li><a href="#playerTabs-8">Player 8</a></li>
		<li><a href="#playerTabs-9">Player 9</a></li>
	</ul>
	<h3 id="playerTitle">Player 1</h3>
	<h4 id="playerAilments"></h4>
		<p>
			<button id="initClass" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Initialize Class/Race
			</button>
		</p>
		<p><button id="makeLeaderBut">Make Leader</button></p>
		<p><button id="copyPlayerBut">Copy Stats</button></p>
<div>
<fieldset>
	<legend>Attributes 'n stuff:</legend>
	<div id="controlgroup">
		Name: <input type="text" onfocus="this.value=''" id="player1NameEntry" value="Enter Name">
		<br><br><br>
		<div class="levelGrid"><div id="levelLab">Level: 0</div><button id="levelDec">-</button><button id="levelInc">+</button></div>
		<br>
		<fieldset>
			<div class="playerStatsGrid">
				<label for="statEditRadio1">Current</label>
				<input type="radio" name="statEditRadio" id="statEditRadio1">
				<label for="statEditRadio2">Max</label>
				<input type="radio" name="statEditRadio" id="statEditRadio2">
				<p id="playerHP">HP:</p><input type="spinner" id="hp" style="width: 50px">
				<p id="playerEnergy">Energy:</p><input type="spinner" id="energy" style="width: 50px">
				<p id="playerEncumb">Encumbrance:</p><input type="spinner" id="encumbrance" style="width: 50px">
			</div>
		</fieldset>
		<fieldset>
		<div class="playerStatsGrid">
			<p id="playerStr">Strength:</p><input type="spinner" id="strength" style="width: 50px">
			<p id="playerDex">Dexterity:</p><input type="spinner" id="dexterity" style="width: 50px">
			<p id="playerInt">Intelligence:</p><input type="spinner" id="intelligence" style="width: 50px">
			<p id="playerWis">Wisdom:</p><input type="spinner" id="wisdom" style="width: 50px">
			<p id="playerCon">Constitution:</p><input type="spinner" id="constitution" style="width: 50px">
			<p id="playerAC">AC:</p><input type="spinner" id="AC" style="width: 50px">
			<p id="playerHunger">Hunger:</p><input type="spinner" id="hunger" style="width: 50px">
			<p id="playerLuck">Luck:</p><input type="spinner" id="luck" style="width: 50px">
			<p id="playerTurnAct">Actions this turn:</p><br>
			<p>To Hit:</p><br>
			<p id="playerIndex">Index:</p><br>
			<button id="prayTime" style="height: 40px">Prayer:</button>
		</div>
		</fieldset>
		<br>
		<div id="playerMiscTabs">
		  <ul>
			<li><a href="#playerMiscTabs-1">Inventory</a></li>
			<li><a href="#playerMiscTabs-2">Passives</a></li>
			<li><a href="#playerMiscTabs-3">Proficiencies</a></li>
			<li><a href="#playerMiscTabs-4">Objectives</a></li>
			<li><a href="#playerMiscTabs-5">Misc</a></li>
		  </ul>
		  <div id="playerMiscTabs-1">
		  
			<fieldset>
			<legend>Equipment</legend>
				<ul style="width:200px;" id="playerEquip">
					<li><div>Weapon 1</div>
						<ul>
							<li><div>Unequip</div></li>
						</ul>
					</li>
					<li><div>Weapon 2</div>
						<ul>
							<li><div>Unequip</div></li>
						</ul>
					</li>
					<li><div>Offhand</div>
						<ul>
							<li><div>Unequip</div></li>
						</ul>
					</li>
					<li><div>Head</div>
						<ul>
							<li><div>Unequip</div></li>
						</ul>
					</li>
					<li><div>Body</div>
						<ul>
							<li><div>Unequip</div></li>
						</ul>
					</li>
					<li><div>Shirt</div>
						<ul>
							<li><div>Unequip</div></li>
						</ul>
					</li>
					<li><div>Hands</div>
						<ul>
							<li><div>Unequip</div></li>
						</ul>
					</li>
					<li><div>Cloak</div>
						<ul>
							<li><div>Unequip</div></li>
						</ul>
					</li>
					<li><div>Feet</div>
						<ul>
							<li><div>Unequip</div></li>
						</ul>
					</li>
				</ul>
			</fieldset>
			<br>
			<fieldset>
			<legend>Items</legend>
				<ul style="width:200px;" class="playInven" id="playerInventory">
					<li><div class="playItem">Item 1</div></li>
					<li><div class="playItem">Item 2</div></li>
					<li><div class="playItem">Item 3</div>
						<ul>
							<li><div class="removeItem" id="remove3">Remove</div></li>
						</ul>
					</li>
					<li><div>Item 4</div></li>
					<li><div>Item 5</div></li>
				</ul>
			</fieldset>
			
		  </div>
		  
		  <!-- Passives -->
		  <div id="playerMiscTabs-2">
			<fieldset>
			<legend>Resistances</legend>
				<div class="passivesResistGrid" id="passGrid1">
				
					<label class="passivesBut" for="coldResist">Cold</label>
					<input type="checkbox" name="passivesCheck1" id="coldResist">
					<label class="passivesBut" for="fireResist">Fire</label>
					<input type="checkbox" name="passivesCheck2" id="fireResist">
					<label class="passivesBut" for="shockResist">Shock</label>
					<input type="checkbox" name="passivesCheck3" id="shockResist">
					<label class="passivesBut" for="disinResist">Disintegration</label>
					<input type="checkbox" name="passivesCheck4" id="disinResist">
					<label class="passivesBut" for="slowResist">Slow</label>
					<input type="checkbox" name="passivesCheck5" id="slowResist">
					<label class="passivesBut" for="blindResist">Blind</label>
					<input type="checkbox" name="passivesCheck6" id="blindResist">
					<label class="passivesBut" for="sleepResist">Sleep</label>
					<input type="checkbox" name="passivesCheck7" id="sleepResist">
					<label class="passivesBut" for="poisonResist">Poison</label>
					<input type="checkbox" name="passivesCheck8" id="poisonResist">
					<label class="passivesBut" for="confuseResist">Confusion</label>
					<input type="checkbox" name="passivesCheck9" id="confuseResist">
					<label class="passivesBut" for="woundResist">Wound</label>
					<input type="checkbox" name="passivesCheck10" id="woundResist">
					<label class="passivesBut" for="petrifyResist">Petrification</label>
					<input type="checkbox" name="passivesCheck11" id="petrifyResist">
					<label class="passivesBut" for="magicResist">Magic</label>
					<input type="checkbox" name="passivesCheck12" id="magicResist">
					<label class="passivesBut" for="physicalResist">Physical</label>
					<input type="checkbox" name="passivesCheck13" id="physicalResist">
				
				
				</div>
			</fieldset>
			<br>
			<fieldset>
			<legend>Immunities</legend>
				<div class="passivesResistGrid">
				
					<label class="passivesBut" for="coldResist1">Cold</label>
					<input type="checkbox" name="passivesCheck1" id="coldResist1">
					<label class="passivesBut" for="fireResist1">Fire</label>
					<input type="checkbox" name="passivesCheck2" id="fireResist1">
					<label class="passivesBut" for="shockResist1">Shock</label>
					<input type="checkbox" name="passivesCheck3" id="shockResist1">
					<label class="passivesBut" for="disinResist1">Disintegration</label>
					<input type="checkbox" name="passivesCheck4" id="disinResist1">
					<label class="passivesBut" for="slowResist1">Slow</label>
					<input type="checkbox" name="passivesCheck5" id="slowResist1">
					<label class="passivesBut" for="blindResist1">Blind</label>
					<input type="checkbox" name="passivesCheck6" id="blindResist1">
					<label class="passivesBut" for="sleepResist1">Sleep</label>
					<input type="checkbox" name="passivesCheck7" id="sleepResist1">
					<label class="passivesBut" for="poisonResist1">Poison</label>
					<input type="checkbox" name="passivesCheck8" id="poisonResist1">
					<label class="passivesBut" for="confuseResist1">Confusion</label>
					<input type="checkbox" name="passivesCheck9" id="confuseResist1">
					<label class="passivesBut" for="woundResist1">Wound</label>
					<input type="checkbox" name="passivesCheck10" id="woundResist1">
					<label class="passivesBut" for="petrifyResist1">Petrification</label>
					<input type="checkbox" name="passivesCheck11" id="petrifyResist1">
					<label class="passivesBut" for="magicResist1">Magic</label>
					<input type="checkbox" name="passivesCheck12" id="magicResist1">
					<label class="passivesBut" for="physicalResist1">Physical</label>
					<input type="checkbox" name="passivesCheck13" id="physicalResist1">
				
				
				</div>
			</fieldset>
			<br>
			<fieldset>
			<legend>Other</legend>
				<div class="passivesGrid">
				
					<label class="passivesBut" for="brisk">Brisk</label>
					<input type="checkbox" name="passivesCheck1" id="brisk">
					<label class="passivesBut" for="haste">Haste</label>
					<input type="checkbox" name="passivesCheck2" id="haste">
					<label class="passivesBut" for="invis">Invisible</label>
					<input type="checkbox" name="passivesCheck3" id="invis">
					<label class="passivesBut" for="seeInvis">See Invisible</label>
					<input type="checkbox" name="passivesCheck4" id="seeInvis">
					<label class="passivesBut" for="searching">Searching</label>
					<input type="checkbox" name="passivesCheck5" id="searching">
					<label class="passivesBut" for="levitate">Levitation</label>
					<input type="checkbox" name="passivesCheck6" id="levitate">
					<label class="passivesBut" for="flying">Flying</label>
					<input type="checkbox" name="passivesCheck7" id="flying">
					<label class="passivesBut" for="warning">Warning</label>
					<input type="checkbox" name="passivesCheck8" id="warning">
					<label class="passivesBut" for="breathless">Breathless</label>
					<input type="checkbox" name="passivesCheck9" id="breathless">
					<label class="passivesBut" for="foodApp">Food Appraisal</label>
					<input type="checkbox" name="passivesCheck10" id="foodApp">
					<label class="passivesBut" for="waterwalking">Waterwalking</label>
					<input type="checkbox" name="passivesCheck11" id="waterwalking">
					<label class="passivesBut" for="stealth">Stealth</label>
					<input type="checkbox" name="passivesCheck12" id="stealth">
					<label class="passivesBut" for="reflection">Reflection</label>
					<input type="checkbox" name="passivesCheck13" id="reflection">
					<label class="passivesBut" for="telepathy">Telepathy</label>
					<input type="checkbox" name="passivesCheck14" id="telepathy">
					<label class="passivesBut" for="displacement">Displacement</label>
					<input type="checkbox" name="passivesCheck15" id="displacement">
					<label class="passivesBut" for="noHungCast">Hungerless Casting</label>
					<input type="checkbox" name="passivesCheck16" id="noHungCast">
					<label class="passivesBut" for="regen">Regeneration</label>
					<input type="checkbox" name="passivesCheck17" id="regen">
					<label class="passivesBut" for="confluence">Confluence</label>
					<input type="checkbox" name="passivesCheck18" id="confluence">
				
				
				</div>
			</fieldset>
			<br>
			<fieldset>
			<legend>Negative</legend>
				<div class="passivesNegGrid">
				</div>
		  </div>
		  
		  <!-- Proficiencies -->
		  <div id="playerMiscTabs-3">
			<div class="profGrid">
				<div class="profLabel" id="dagger"><b><br>Daggers:</b></div>
				<div class="profLabel" id="axe"><b><br>Axes:</b></div>
				<div class="profLabel" id="sword"><b><br>Swords:</b></div>
				<div class="profLabel" id="bludgeon"><b><br>Bludgeons:</b></div>
				<div class="profLabel" id="staff"><b><br>Staves:</b></div>
				<div class="profLabel" id="spear"><b><br>Spears:</b></div>
				<div class="profLevLab" id="daggerProfLevLab"> </div>
				<div class="profLevLab" id="axeProfLevLab"> </div>
				<div class="profLevLab" id="swordProfLevLab"> </div>
				<div class="profLevLab" id="bludgeonProfLevLab"> </div>
				<div class="profLevLab" id="staffProfLevLab"> </div>
				<div class="profLevLab" id="spearProfLevLab"> </div>
				<div class="profBar" id="daggerProfBar"></div>
				<div class="profBar" id="axeProfBar"></div>
				<div class="profBar" id="swordProfBar"></div>
				<div class="profBar" id="bludgeonProfBar"></div>
				<div class="profBar" id="staffProfBar"></div>
				<div class="profBar" id="spearProfBar"></div>
			</div>
			<div class="profGrid">
				<div class="profLabel" id="polearm"><b><br>Polearms:</b></div>
				<div class="profLabel" id="bow"><b><br>Bows:</b></div>
				<div class="profLabel" id="martial"><b>Martial<br>Arts:</b></div>
				<div class="profLabel" id="barehand"><b><br>Barehanded:</b></div>
				<div class="profLabel" id="augment"><b><br>Augments:</b></div>
				<div class="profLabel" id="mobility"><b><br>Mobility:</b></div>
				<div class="profLevLab" id="polearmProfLevLab"> </div>
				<div class="profLevLab" id="bowProfLevLab"> </div>
				<div class="profLevLab" id="martialProfLevLab"> </div>
				<div class="profLevLab" id="barehandProfLevLab"> </div>
				<div class="profLevLab" id="augmentProfLevLab"> </div>
				<div class="profLevLab" id="mobilityProfLevLab"> </div>
				<div class="profBar" id="polearmProfBar"></div>
				<div class="profBar" id="bowProfBar"></div>
				<div class="profBar" id="martialProfBar"></div>
				<div class="profBar" id="barehandProfBar"></div>
				<div class="profBar" id="augmentProfBar"></div>
				<div class="profBar" id="mobilityProfBar"></div>
			</div>
			<div class="profGrid">
				<div class="profLabel" id="attackSpell"><b>Attack<br>Spells:</b></div>
				<div class="profLabel" id="matterSpell"><b>Matter<br>Spells:</b></div>
				<div class="profLabel" id="divinationSpell"><b>Divination<br>Spells:</b></div>
				<div class="profLabel" id="clericalSpell"><b>Clerical<br>Spells:</b></div>
				<div class="profLabel" id="enchantmentSpell"><b>Enchantment<br>Spells:</b></div>
				<div class="profLabel" id="healingSpell"><b>Healing<br>Spells:</b></div>
				<div class="profLevLab" id="attackSpellProfLevLab"> </div>
				<div class="profLevLab" id="matterSpellProfLevLab"> </div>
				<div class="profLevLab" id="divinationSpellProfLevLab"> </div>
				<div class="profLevLab" id="clericalSpellProfLevLab"> </div>
				<div class="profLevLab" id="enchantmentSpellProfLevLab"> </div>
				<div class="profLevLab" id="healingSpellProfLevLab"> </div>
				<div class="profBar" id="attackSpellProfBar"></div>
				<div class="profBar" id="matterSpellProfBar"></div>
				<div class="profBar" id="divinationSpellProfBar"></div>
				<div class="profBar" id="clericalSpellProfBar"></div>
				<div class="profBar" id="enchantmentSpellProfBar"></div>
				<div class="profBar" id="healingSpellProfBar"></div>
			</div>
			<br>
			<button onclick="profDec()" id="profDecBut">-</button>
			<button onclick="profInc()" id="profIncBut">+</button>
			
			
			
		  </div>
		  
		  <div id="playerMiscTabs-4">
			<button id="rerollObj">Reroll Objectives</button><br><br>
			
			<div id="obj1">1.</div><br>
			<div id="obj2">2.</div><br>
			<div id="obj3">3.</div><br>
			<div id="obj4">4.</div><br>
			
		  </div>
		  
		  <div id="playerMiscTabs-5">
		  <fieldset>
			<legend>Ailments</legend>
			
				<div class="ailmentsGrid">
					<button id="slowPlay">Slow</button>
					<button id="blindPlay">Blind</button>
					<button id="sleepPlay">Sleep</button>
					<button id="poisonedPlay">Poison</button>
					<button id="tauntedPlay">Taunt</button>
					<button id="confusedPlay">Confusion</button>
					<button id="paralyzedPlay">Paralysis</button>
					<button id="woundedPlay">Wound</button>
					<button id="silencePlay">Silence</button>
					<button id="hallucinPlay">Hallucinating</button>
					<button id="petrifyPlay">Petrificaton</button>
				</div>
			</fieldset>
			
			
			<br>
		  <fieldset>
			<legend>Temp Effects</legend>
			
				<div class="tempEffectGrid">
					<button id="ACPlay">+ AC</button>
					<button id="">+ To Hit</button>
					<button id="">Light</button>
					<button id="">Displacement</button>
					<button id="">Brisk</button>
					<button id="">Haste</button>
					<button id="">Invisible</button>
					<button id="">See Invisible</button>
					<button id="">Searching</button>
					<button id="">Levitate</button>
					<button id="">Regeneration</button>
					<button id="">Confluence</button>
					<button id="">Stealth</button>
				</div>
			
			</fieldset>
			
		  </div>
		  
		  
		</div>
	</div>
</fieldset></div>
	<div id="playerTabs-1"></div>
	<div id="playerTabs-2"></div>
	<div id="playerTabs-3"></div>
	<div id="playerTabs-4"></div>
	<div id="playerTabs-5"></div>
	<div id="playerTabs-6"></div>
	<div id="playerTabs-7"></div>
	<div id="playerTabs-8"></div>
	<div id="playerTabs-9"></div>
</div>
<script>
/*$("#playerInventory").on('click', 'li', function (e) {

	var itemInd;

	//console.log(this.id);
	//alert($(event.target).id);
	//alert($(this).attr('id'));
	itemInd=$(this).index();
	console.log(itemInd);

});*/

$("div.ailmentsGrid").find("button").click(function( event ) {

	var ailTurns;
	
	var whichAilment=this.id;
	
	var isPlayer=whichAilment.includes("Play");
	var isMonst=whichAilment.includes("Monst");
	var isWound=whichAilment.includes("wounded");
	var isPetri=whichAilment.includes("petrify");
	
	if (isPlayer==true) {
	
		if (allPlayers[whoIsActive].playerExists==true) {
		
			if (isWound==false && isPetri==false) {
		
				ailTurns=prompt("How many turns?")
	
			}
	
			whichAilment=whichAilment.replace("Play","");
			
			//not int
			while (/^\d+$/.test(ailTurns)==false && ailTurns!=null) {
				
				ailTurns=prompt("How many turns?");
			
			}
			
			allPlayers[whoIsActive].playerPassives[whichAilment]=parseInt(ailTurns);
			
			if (isWound==true) {
			
				allPlayers[whoIsActive].playerPassives.wounded=true;
				
			}
			
			if (isPetri==true) {
			
				allPlayers[whoIsActive].playerPassives.petrify=true;
				
			}
			
			//alert(allPlayers[whoIsActive].playerName + " is " + whichAilment + " for " + ailTurns + " turns");
			
			updatePlayer();
		
		} //exists
		
		
	}
	
	if (isMonst==true) {

		if (allRooms[currRoomIndex].roomMonsters[monstActive].monsterExists==true) {
		
			ailTurns=prompt("How many turns?")
	
			whichAilment=whichAilment.replace("Play","");
			
			//not int
			while (/^\d+$/.test(ailTurns)==false && ailTurns!=null) {
				
				ailTurns=prompt("How many turns?");
			
			}
			
			allRooms[currRoomIndex].roomMonsters[monstActive].monsterPassives[whichAilment]=parseInt(ailTurns);
			
			updateMonst();
			
		} //exists
	
	}


});


$("div.removeItem").click(function( event ) {

	var remId=this.id;

	
	
	alert(remId);

});


$("#levelDec").click(function() {

	if(allPlayers[whoIsActive].playerExists==true) {

		allPlayers[whoIsActive].playerLevel--;
		
		//edit stats
		
		if (allPlayers[whoIsActive].race==0) //human
		{
			allPlayers[whoIsActive].hpMax-=1;
			allPlayers[whoIsActive].hpCurr-=1;
			allPlayers[whoIsActive].energyMax-=2;
			allPlayers[whoIsActive].energyCurr-=2;
		}

		if (allPlayers[whoIsActive].race==1) //dwarf
		{
			allPlayers[whoIsActive].hpMax-=3;
			allPlayers[whoIsActive].hpCurr-=3;	
		}
		
		if (allPlayers[whoIsActive].race==2) //orc
		{
			allPlayers[whoIsActive].hpMax-=2;
			allPlayers[whoIsActive].hpCurr-=2;
			allPlayers[whoIsActive].energyMax-=1;
			allPlayers[whoIsActive].energyCurr-=1;
		}

		if (allPlayers[whoIsActive].race==3) //elf
		{
			allPlayers[whoIsActive].energyMax-=3;
			allPlayers[whoIsActive].energyCurr-=3;	
		}

		if (allPlayers[whoIsActive].playClass==0) //highlander
		{
			tempRoll=rollDie(4,2);
			allPlayers[whoIsActive].hpMax-=tempRoll;
			allPlayers[whoIsActive].hpCurr-=tempRoll;

			tempRoll=rollDie(2,1);

			allPlayers[whoIsActive].energyMax-=tempRoll;
			allPlayers[whoIsActive].energyCurr-=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==1) //wizard
		{
			tempRoll=rollDie(2,1);
			allPlayers[whoIsActive].hpMax-=tempRoll;
			allPlayers[whoIsActive].hpCurr-=tempRoll;

			tempRoll=rollDie(2,2);
			allPlayers[whoIsActive].energyMax-=tempRoll;
			allPlayers[whoIsActive].energyCurr-=tempRoll;
			allPlayers[whoIsActive].energyMax--;
			allPlayers[whoIsActive].energyCurr--;
		}

		if (allPlayers[whoIsActive].playClass==2) //healer
		{
			tempRoll=rollDie(2,1);
			allPlayers[whoIsActive].hpMax-=tempRoll;
			allPlayers[whoIsActive].hpCurr-=tempRoll;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax-=tempRoll;
			allPlayers[whoIsActive].energyCurr-=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==3) //rapscallion
		{
			tempRoll=rollDie(2,1);
			allPlayers[whoIsActive].hpMax-=tempRoll;
			allPlayers[whoIsActive].hpCurr-=tempRoll;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax-=tempRoll;
			allPlayers[whoIsActive].energyCurr-=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==4) //monk
		{
			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].hpMax-=tempRoll;
			allPlayers[whoIsActive].hpCurr-=tempRoll;
			allPlayers[whoIsActive].hpMax-=2;
			allPlayers[whoIsActive].hpCurr-=2;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax-=tempRoll;
			allPlayers[whoIsActive].energyCurr-=tempRoll;
		}
	
		if (allPlayers[whoIsActive].playClass==5) //sniper
		{
			tempRoll=rollDie(2,1);
			allPlayers[whoIsActive].hpMax-=tempRoll;
			allPlayers[whoIsActive].hpCurr-=tempRoll;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax-=tempRoll;
			allPlayers[whoIsActive].energyCurr-=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==6) //myrmidon
		{
			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].hpMax-=tempRoll;
			allPlayers[whoIsActive].hpCurr-=tempRoll;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax-=tempRoll;
			allPlayers[whoIsActive].energyCurr-=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==7) //saboteur
		{
			tempRoll=rollDie(6,1);
			allPlayers[whoIsActive].hpMax-=tempRoll;
			allPlayers[whoIsActive].hpCurr-=tempRoll;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax-=tempRoll;
			allPlayers[whoIsActive].energyCurr-=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==8) //occultist
		{
			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].hpMax-=tempRoll;
			allPlayers[whoIsActive].hpCurr-=tempRoll;

			tempRoll=rollDie(2,2);
			allPlayers[whoIsActive].energyMax-=tempRoll;
			allPlayers[whoIsActive].energyCurr-=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==9) //basilica
		{
			tempRoll=rollDie(4,2);
			allPlayers[whoIsActive].hpMax-=tempRoll;
			allPlayers[whoIsActive].hpCurr-=tempRoll;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax-=tempRoll;
			allPlayers[whoIsActive].energyCurr-=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==10) //triarius
		{
			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].hpMax-=tempRoll;
			allPlayers[whoIsActive].hpCurr-=tempRoll;
			allPlayers[whoIsActive].hpMax--;
			allPlayers[whoIsActive].hpCurr--;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax-=tempRoll;
			allPlayers[whoIsActive].energyCurr-=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==11) //symposiarch
		{
			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].hpMax-=tempRoll;
			allPlayers[whoIsActive].hpCurr-=tempRoll;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax-=tempRoll;
			allPlayers[whoIsActive].energyCurr-=tempRoll;
		}

		if (allPlayers[whoIsActive].wisdom==10 || allPlayers[whoIsActive].wisdom==11) //10-11
		{
			allPlayers[whoIsActive].energyMax--;
			allPlayers[whoIsActive].energyCurr--;
		}
	
		if (allPlayers[whoIsActive].wisdom>11 && allPlayers[whoIsActive].wisdom<15) //12-14
		{
			allPlayers[whoIsActive].energyMax-=2;
			allPlayers[whoIsActive].energyCurr-=2;
		}

		if (allPlayers[whoIsActive].wisdom>14 && allPlayers[whoIsActive].wisdom<17) //15-16
		{
			allPlayers[whoIsActive].energyMax-=3;
			allPlayers[whoIsActive].energyCurr-=3;
		}

		if (allPlayers[whoIsActive].wisdom>18 && allPlayers[whoIsActive].wisdom<21) //17-19
		{
			allPlayers[whoIsActive].energyMax-=4;
			allPlayers[whoIsActive].energyCurr-=4;
		}

		if (allPlayers[whoIsActive].wisdom>20 && allPlayers[whoIsActive].wisdom<23) //20+
		{
			allPlayers[whoIsActive].energyMax-=5;
			allPlayers[whoIsActive].energyCurr-=5;
		}

		
		//update
		updatePlayer();
		
		}

});

$("#levelInc").click(function() {

	if(allPlayers[whoIsActive].playerExists==true) {

		allPlayers[whoIsActive].playerLevel++;
		
		//edit stats
		
		if (allPlayers[whoIsActive].race==0) //human
		{
			allPlayers[whoIsActive].hpMax+=1;
			allPlayers[whoIsActive].hpCurr+=1;
			allPlayers[whoIsActive].energyMax+=2;
			allPlayers[whoIsActive].energyCurr+=2;
		}

		if (allPlayers[whoIsActive].race==1) //dwarf
		{
			allPlayers[whoIsActive].hpMax+=3;
			allPlayers[whoIsActive].hpCurr+=3;	
		}
		
		if (allPlayers[whoIsActive].race==2) //orc
		{
			allPlayers[whoIsActive].hpMax+=2;
			allPlayers[whoIsActive].hpCurr+=2;
			allPlayers[whoIsActive].energyMax+=1;
			allPlayers[whoIsActive].energyCurr+=1;
		}

		if (allPlayers[whoIsActive].race==3) //elf
		{
			allPlayers[whoIsActive].energyMax+=3;
			allPlayers[whoIsActive].energyCurr+=3;	
		}

		if (allPlayers[whoIsActive].playClass==0) //highlander
		{
			tempRoll=rollDie(4,2);
			allPlayers[whoIsActive].hpMax+=tempRoll;
			allPlayers[whoIsActive].hpCurr+=tempRoll;

			tempRoll=rollDie(2,1);

			allPlayers[whoIsActive].energyMax+=tempRoll;
			allPlayers[whoIsActive].energyCurr+=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==1) //wizard
		{
			tempRoll=rollDie(2,1);
			allPlayers[whoIsActive].hpMax+=tempRoll;
			allPlayers[whoIsActive].hpCurr+=tempRoll;

			tempRoll=rollDie(2,2);
			allPlayers[whoIsActive].energyMax+=tempRoll;
			allPlayers[whoIsActive].energyCurr+=tempRoll;
			allPlayers[whoIsActive].energyMax++;
			allPlayers[whoIsActive].energyCurr++;
		}

		if (allPlayers[whoIsActive].playClass==2) //healer
		{
			tempRoll=rollDie(2,1);
			allPlayers[whoIsActive].hpMax+=tempRoll;
			allPlayers[whoIsActive].hpCurr+=tempRoll;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax+=tempRoll;
			allPlayers[whoIsActive].energyCurr+=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==3) //rapscallion
		{
			tempRoll=rollDie(2,1);
			allPlayers[whoIsActive].hpMax+=tempRoll;
			allPlayers[whoIsActive].hpCurr+=tempRoll;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax+=tempRoll;
			allPlayers[whoIsActive].energyCurr+=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==4) //monk
		{
			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].hpMax+=tempRoll;
			allPlayers[whoIsActive].hpCurr+=tempRoll;
			allPlayers[whoIsActive].hpMax+=2;
			allPlayers[whoIsActive].hpCurr+=2;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax+=tempRoll;
			allPlayers[whoIsActive].energyCurr+=tempRoll;
		}
	
		if (allPlayers[whoIsActive].playClass==5) //sniper
		{
			tempRoll=rollDie(2,1);
			allPlayers[whoIsActive].hpMax+=tempRoll;
			allPlayers[whoIsActive].hpCurr+=tempRoll;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax+=tempRoll;
			allPlayers[whoIsActive].energyCurr+=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==6) //myrmidon
		{
			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].hpMax+=tempRoll;
			allPlayers[whoIsActive].hpCurr+=tempRoll;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax+=tempRoll;
			allPlayers[whoIsActive].energyCurr+=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==7) //saboteur
		{
			tempRoll=rollDie(6,1);
			allPlayers[whoIsActive].hpMax+=tempRoll;
			allPlayers[whoIsActive].hpCurr+=tempRoll;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax+=tempRoll;
			allPlayers[whoIsActive].energyCurr+=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==8) //occultist
		{
			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].hpMax+=tempRoll;
			allPlayers[whoIsActive].hpCurr+=tempRoll;

			tempRoll=rollDie(2,2);
			allPlayers[whoIsActive].energyMax+=tempRoll;
			allPlayers[whoIsActive].energyCurr+=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==9) //basilica
		{
			tempRoll=rollDie(4,2);
			allPlayers[whoIsActive].hpMax+=tempRoll;
			allPlayers[whoIsActive].hpCurr+=tempRoll;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax+=tempRoll;
			allPlayers[whoIsActive].energyCurr+=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==10) //triarius
		{
			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].hpMax+=tempRoll;
			allPlayers[whoIsActive].hpCurr+=tempRoll;
			allPlayers[whoIsActive].hpMax++;
			allPlayers[whoIsActive].hpCurr++;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax+=tempRoll;
			allPlayers[whoIsActive].energyCurr+=tempRoll;
		}

		if (allPlayers[whoIsActive].playClass==11) //symposiarch
		{
			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].hpMax+=tempRoll;
			allPlayers[whoIsActive].hpCurr+=tempRoll;

			tempRoll=rollDie(4,1);
			allPlayers[whoIsActive].energyMax+=tempRoll;
			allPlayers[whoIsActive].energyCurr+=tempRoll;
		}

		if (allPlayers[whoIsActive].wisdom==10 || allPlayers[whoIsActive].wisdom==11) //10-11
		{
			allPlayers[whoIsActive].energyMax++;
			allPlayers[whoIsActive].energyCurr++;
		}
	
		if (allPlayers[whoIsActive].wisdom>11 && allPlayers[whoIsActive].wisdom<15) //12-14
		{
			allPlayers[whoIsActive].energyMax+=2;
			allPlayers[whoIsActive].energyCurr+=2;
		}

		if (allPlayers[whoIsActive].wisdom>14 && allPlayers[whoIsActive].wisdom<17) //15-16
		{
			allPlayers[whoIsActive].energyMax+=3;
			allPlayers[whoIsActive].energyCurr+=3;
		}

		if (allPlayers[whoIsActive].wisdom>18 && allPlayers[whoIsActive].wisdom<21) //17-19
		{
			allPlayers[whoIsActive].energyMax+=4;
			allPlayers[whoIsActive].energyCurr+=4;
		}

		if (allPlayers[whoIsActive].wisdom>20 && allPlayers[whoIsActive].wisdom<23) //20+
		{
			allPlayers[whoIsActive].energyMax+=5;
			allPlayers[whoIsActive].energyCurr+=5;
		}

		
		//update
		updatePlayer();
	
	}
});

$("div.passivesResistGrid").find( "input[type=\"checkbox\"]").click(function( event ) {

	//alert(this.id);
	
	var passId=this.id;
	var immune=passId.includes("1");
	var immunePass;

	if (immune==true) {
	
		immunePass=passId.replace("1","");
	}
	
	//resisted checked
	if ($('#'+ this.id).prop('checked')==true && immune!=true) {
    
		allPlayers[whoIsActive].playerPassives[passId]=true;
		
	}
	
	//resist unchecked
	if ($('#'+ this.id).prop('checked')!=true && immune!=true) {
    
		allPlayers[whoIsActive].playerPassives[passId]=false;
	}
	
	//immune checked
	if ($('#'+ this.id).prop('checked')==true && immune==true) {
    
		allPlayers[whoIsActive].playerPassives[immunePass]="immune";
		$("#" + immunePass).prop('checked', true);
		$("#" + immunePass).checkboxradio('refresh');
		
		
	}
	
	//immune unchecked
	if ($('#'+ this.id).prop('checked')!=true && immune==true) {
    
		allPlayers[whoIsActive].playerPassives[immunePass]=0;
	}
});

$("div.passivesGrid").find( "input[type=\"checkbox\"]").click(function( event ) {


	
	var passId=this.id;

	
	if ($('#'+ this.id).prop('checked')==true) {
    
		allPlayers[whoIsActive].playerPassives[passId]=true;
		
	}
	
	if ($('#'+ this.id).prop('checked')!=true) {
    
		allPlayers[whoIsActive].playerPassives[passId]=false;
	}
	
});



$("#prayTime").click(function() {

	if (allPlayers[whoIsActive].playerExists==true) {
		
		
		var pTime=100;
		
		var minusPlus=rollDie(2,1);
		
		if (minusPlus==1) {
		
			pTime+=rollDie(10,1);
		
		}
		
		else {
		
			pTime-=rollDie(10,1);
		}
		
		allPlayers[whoIsActive].prayTime+=pTime;
		$("#prayTime").html("Prayer: "+ allPlayers[whoIsActive].prayTime);
		
	}
});

$( "#statEditRadio1" ).click(function( event ) {

	currMax=0;
});

$( "#statEditRadio2" ).click(function( event ) {

	currMax=1;
});

$( function() {
	$( "input[type=\"checkbox\"]" ).checkboxradio();
} );

//$( "#hpSpinner" ).spinner();
$("div.playerStatsGrid").find("input[type=\"spinner\"]").spinner();

$("div.playerStatsGrid").find("input").keyup(function(event) {


	var enterVal = this.value;
	var tempStr;
	var tempStr2;
	enterVal=parseInt(enterVal);
	//alert(typeof(enterVal));
	
    if (event.keyCode === 13) {
	
		if (isNaN(enterVal)==false && allPlayers[whoIsActive].playerExists==true) {
	
			tempStr=this.id;
			tempStr=tempStr.replace("Spinner","");
			tempStr2=tempStr.toLowerCase();
			
			//var element_id = this.data()[element_type + 'id'];
			
			
			//allPlayers[whoIsActive][tempStr2]+=enterVal;
			
			//current
			if (tempStr2=="hp" && currMax==0) {

				
				
				allPlayers[whoIsActive].hpCurr+=enterVal;
				
				//when over max
				if (allPlayers[whoIsActive].hpCurr>=allPlayers[whoIsActive].hpMax) {
				
					allPlayers[whoIsActive].hpCurr=allPlayers[whoIsActive].hpMax;
					allPlayers[whoIsActive].newHpClock=true;
					
				}
				
				if (allPlayers[whoIsActive].newHpClock==true) {
				
					if (allPlayers[whoIsActive].hpCurr<allPlayers[whoIsActive].hpMax) {
					
						allPlayers[whoIsActive].hpClock=turn;
						allPlayers[whoIsActive].newHpClock=false;	
						
					}
				}
				
			}
			
			//max
			if (tempStr2=="hp" && currMax==1) {
			
				
				
				allPlayers[whoIsActive].hpMax+=enterVal;
				
				if (allPlayers[whoIsActive].hpCurr>allPlayers[whoIsActive].hpMax) //when maxed
				{
					allPlayers[whoIsActive].hpCurr=allPlayers[whoIsActive].hpMax;
					allPlayers[whoIsActive].newHpClock=true;
				}
				
			}
			
			//current
			if (tempStr2=="energy" && currMax==0) {

				
				allPlayers[whoIsActive].energyCurr+=enterVal;
				
				//when over max
				if (allPlayers[whoIsActive].energyCurr>=allPlayers[whoIsActive].energyMax) {
				
					allPlayers[whoIsActive].energyCurr=allPlayers[whoIsActive].energyMax;
					allPlayers[whoIsActive].newEnergyClock=true;
					
				}
				
				if (allPlayers[whoIsActive].newEnergyClock==true) {
				
					if (allPlayers[whoIsActive].energyCurr<allPlayers[whoIsActive].energyMax) {
							allPlayers[whoIsActive].energyClock=turn;
							allPlayers[whoIsActive].newEnergyClock=false;	
							
						}
				}
				
			}
			
			//max
			if (tempStr2=="energy" && currMax==1) {
			
				
				
				allPlayers[whoIsActive].energyMax+=enterVal;
				
				if (allPlayers[whoIsActive].energyCurr>allPlayers[whoIsActive].energyMax) //when maxed
				{
					allPlayers[whoIsActive].energyCurr=allPlayers[whoIsActive].energyMax;
					allPlayers[whoIsActive].newEnergyClock=true;
				}
				
			}
			
			//current
			if (tempStr2=="encumbrance" && currMax==0) {

				
				
				allPlayers[whoIsActive].weightCurr+=enterVal;
				
			}
			
			//max
			if (tempStr2=="encumbrance" && currMax==1) {
			
				
				
				allPlayers[whoIsActive].weightMax+=enterVal;
				
			}
			
			if (tempStr2=="ac") {
			
				allPlayers[whoIsActive].totalAC-=enterVal;
			}
		
			
			else {
			
				allPlayers[whoIsActive][tempStr2]+=enterVal;
			}
			
			//alert(allPlayers[whoIsActive].hpCurr);
			
			updatePlayer();
			
	
		}
    }
	
	
	
});

function profInc() {

	if (allPlayers[whoIsActive].playerExists==true)
	{

		//if dagger selected

		if (currProf==0) {
		
			
			if (allPlayers[whoIsActive].playerProfs.daggerLev==0) {
				
				allPlayers[whoIsActive].playerProfs.daggerProf++;
				$( "#daggerProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.daggerProf + " / 20)" );
				$( "#daggerProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.daggerProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.daggerLev>0) {
			
				allPlayers[whoIsActive].playerProfs.daggerProf++;
				allPlayers[whoIsActive].playerProfs.daggerBar++;
		
				if (allPlayers[whoIsActive].playerProfs.daggerLev==1) {
					$( "#daggerProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.daggerProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.daggerLev==2){
					$( "#daggerProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.daggerProf + " / 90)" );
				}
				
				$( "#daggerProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.daggerBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.daggerProf==20) {
			
				allPlayers[whoIsActive].playerProfs.daggerBar=0;
				allPlayers[whoIsActive].playerProfs.daggerLev=1;
				$( "#daggerProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#daggerProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.daggerProf==50) {
			
				allPlayers[whoIsActive].playerProfs.daggerBar=0;
				allPlayers[whoIsActive].playerProfs.daggerLev=2;
				$( "#daggerProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#daggerProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.daggerProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.daggerLev=3;
				$( "#daggerProfLevLab" ).html( "Master" );
			
			}
			
			
		} //dagger
		
		//if axe selected
		
		if (currProf==1) {
			
			if (allPlayers[whoIsActive].playerProfs.axeLev==0) {
				
				allPlayers[whoIsActive].playerProfs.axeProf++;
				$( "#axeProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.axeProf + " / 20)" );
				$( "#axeProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.axeProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.axeLev>0) {
			
				allPlayers[whoIsActive].playerProfs.axeProf++;
				allPlayers[whoIsActive].playerProfs.axeBar++;
		
				if (allPlayers[whoIsActive].playerProfs.axeLev==1) {
					$( "#axeProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.axeProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.axeLev==2){
					$( "#axeProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.axeProf + " / 90)" );
				}
				
				$( "#axeProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.axeBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.axeProf==20) {
			
				allPlayers[whoIsActive].playerProfs.axeBar=0;
				allPlayers[whoIsActive].playerProfs.axeLev=1;
				$( "#axeProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#axeProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.axeProf==50) {
			
				allPlayers[whoIsActive].playerProfs.axeBar=0;
				allPlayers[whoIsActive].playerProfs.axeLev=2;
				$( "#axeProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#axeProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.axeProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.axeLev=3;
				$( "#axeProfLevLab" ).html( "Master" );
			
			}
			
			
		} //axe

		//if sword selected
		
		if (currProf==2) {
			
			if (allPlayers[whoIsActive].playerProfs.swordLev==0) {
				
				allPlayers[whoIsActive].playerProfs.swordProf++;
				$( "#swordProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.swordProf + " / 20)" );
				$( "#swordProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.swordProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.swordLev>0) {
			
				allPlayers[whoIsActive].playerProfs.swordProf++;
				allPlayers[whoIsActive].playerProfs.swordBar++;
		
				if (allPlayers[whoIsActive].playerProfs.swordLev==1) {
					$( "#swordProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.swordProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.swordLev==2){
					$( "#swordProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.swordProf + " / 90)" );
				}
				
				$( "#swordProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.swordBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.swordProf==20) {
			
				allPlayers[whoIsActive].playerProfs.swordBar=0;
				allPlayers[whoIsActive].playerProfs.swordLev=1;
				$( "#swordProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#swordProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.swordProf==50) {
			
				allPlayers[whoIsActive].playerProfs.swordBar=0;
				allPlayers[whoIsActive].playerProfs.swordLev=2;
				$( "#swordProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#swordProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.swordProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.swordLev=3;
				$( "#swordProfLevLab" ).html( "Master" );
			
			}
			
			
		} //sword
		
		//if bludgeon selected
		
		if (currProf==3) {
			
			if (allPlayers[whoIsActive].playerProfs.bludgeonLev==0) {
				
				allPlayers[whoIsActive].playerProfs.bludgeonProf++;
				$( "#bludgeonProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.bludgeonProf + " / 20)" );
				$( "#bludgeonProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.bludgeonProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.bludgeonLev>0) {
			
				allPlayers[whoIsActive].playerProfs.bludgeonProf++;
				allPlayers[whoIsActive].playerProfs.bludgeonBar++;
		
				if (allPlayers[whoIsActive].playerProfs.bludgeonLev==1) {
					$( "#bludgeonProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.bludgeonProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.bludgeonLev==2){
					$( "#bludgeonProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.bludgeonProf + " / 90)" );
				}
				
				$( "#bludgeonProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.bludgeonBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.bludgeonProf==20) {
			
				allPlayers[whoIsActive].playerProfs.bludgeonBar=0;
				allPlayers[whoIsActive].playerProfs.bludgeonLev=1;
				$( "#bludgeonProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#bludgeonProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.bludgeonProf==50) {
			
				allPlayers[whoIsActive].playerProfs.bludgeonBar=0;
				allPlayers[whoIsActive].playerProfs.bludgeonLev=2;
				$( "#bludgeonProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#bludgeonProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.bludgeonProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.bludgeonLev=3;
				$( "#bludgeonProfLevLab" ).html( "Master" );
			
			}
			
			
		} //bludgeon
		
		//if staff selected
		
		if (currProf==4) {
			
			if (allPlayers[whoIsActive].playerProfs.staffLev==0) {
				
				allPlayers[whoIsActive].playerProfs.staffProf++;
				$( "#staffProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.staffProf + " / 20)" );
				$( "#staffProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.staffProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.staffLev>0) {
			
				allPlayers[whoIsActive].playerProfs.staffProf++;
				allPlayers[whoIsActive].playerProfs.staffBar++;
		
				if (allPlayers[whoIsActive].playerProfs.staffLev==1) {
					$( "#staffProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.staffProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.staffLev==2){
					$( "#staffProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.staffProf + " / 90)" );
				}
				
				$( "#staffProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.staffBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.staffProf==20) {
			
				allPlayers[whoIsActive].playerProfs.staffBar=0;
				allPlayers[whoIsActive].playerProfs.staffLev=1;
				$( "#staffProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#staffProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.staffProf==50) {
			
				allPlayers[whoIsActive].playerProfs.staffBar=0;
				allPlayers[whoIsActive].playerProfs.staffLev=2;
				$( "#staffProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#staffProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.staffProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.staffLev=3;
				$( "#staffProfLevLab" ).html( "Master" );
			
			}
			
			
		} //staff
		
		//if spear selected
		
		if (currProf==5) {
			
			if (allPlayers[whoIsActive].playerProfs.spearLev==0) {
				
				allPlayers[whoIsActive].playerProfs.spearProf++;
				$( "#spearProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.spearProf + " / 20)" );
				$( "#spearProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.spearProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.spearLev>0) {
			
				allPlayers[whoIsActive].playerProfs.spearProf++;
				allPlayers[whoIsActive].playerProfs.spearBar++;
		
				if (allPlayers[whoIsActive].playerProfs.spearLev==1) {
					$( "#spearProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.spearProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.spearLev==2){
					$( "#spearProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.spearProf + " / 90)" );
				}
				
				$( "#spearProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.spearBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.spearProf==20) {
			
				allPlayers[whoIsActive].playerProfs.spearBar=0;
				allPlayers[whoIsActive].playerProfs.spearLev=1;
				$( "#spearProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#spearProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.spearProf==50) {
			
				allPlayers[whoIsActive].playerProfs.spearBar=0;
				allPlayers[whoIsActive].playerProfs.spearLev=2;
				$( "#spearProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#spearProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.spearProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.spearLev=3;
				$( "#spearProfLevLab" ).html( "Master" );
			
			}
			
			
		} //spear
		
		//if polearm selected
		
		if (currProf==6) {
			
			if (allPlayers[whoIsActive].playerProfs.polearmLev==0) {
				
				allPlayers[whoIsActive].playerProfs.polearmProf++;
				$( "#polearmProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.polearmProf + " / 20)" );
				$( "#polearmProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.polearmProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.polearmLev>0) {
			
				allPlayers[whoIsActive].playerProfs.polearmProf++;
				allPlayers[whoIsActive].playerProfs.polearmBar++;
		
				if (allPlayers[whoIsActive].playerProfs.polearmLev==1) {
					$( "#polearmProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.polearmProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.polearmLev==2){
					$( "#polearmProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.polearmProf + " / 90)" );
				}
				
				$( "#polearmProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.polearmBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.polearmProf==20) {
			
				allPlayers[whoIsActive].playerProfs.polearmBar=0;
				allPlayers[whoIsActive].playerProfs.polearmLev=1;
				$( "#polearmProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#polearmProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.polearmProf==50) {
			
				allPlayers[whoIsActive].playerProfs.polearmBar=0;
				allPlayers[whoIsActive].playerProfs.polearmLev=2;
				$( "#polearmProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#polearmProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.polearmProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.polearmLev=3;
				$( "#polearmProfLevLab" ).html( "Master" );
			
			}
			
			
		} //polearm
		
		//if bow selected
		
		if (currProf==7) {
			
			if (allPlayers[whoIsActive].playerProfs.bowLev==0) {
				
				allPlayers[whoIsActive].playerProfs.bowProf++;
				$( "#bowProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.bowProf + " / 20)" );
				$( "#bowProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.bowProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.bowLev>0) {
			
				allPlayers[whoIsActive].playerProfs.bowProf++;
				allPlayers[whoIsActive].playerProfs.bowBar++;
		
				if (allPlayers[whoIsActive].playerProfs.bowLev==1) {
					$( "#bowProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.bowProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.bowLev==2){
					$( "#bowProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.bowProf + " / 90)" );
				}
				
				$( "#bowProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.bowBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.bowProf==20) {
			
				allPlayers[whoIsActive].playerProfs.bowBar=0;
				allPlayers[whoIsActive].playerProfs.bowLev=1;
				$( "#bowProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#bowProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.bowProf==50) {
			
				allPlayers[whoIsActive].playerProfs.bowBar=0;
				allPlayers[whoIsActive].playerProfs.bowLev=2;
				$( "#bowProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#bowProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.bowProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.bowLev=3;
				$( "#bowProfLevLab" ).html( "Master" );
			
			}
			
			
		} //bow
		
		//if martial selected
		
		if (currProf==8) {
			
			if (allPlayers[whoIsActive].playerProfs.martialLev==0) {
				
				allPlayers[whoIsActive].playerProfs.martialProf++;
				$( "#martialProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.martialProf + " / 20)" );
				$( "#martialProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.martialProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.martialLev>0) {
			
				allPlayers[whoIsActive].playerProfs.martialProf++;
				allPlayers[whoIsActive].playerProfs.martialBar++;
		
				if (allPlayers[whoIsActive].playerProfs.martialLev==1) {
					$( "#martialProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.martialProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.martialLev==2){
					$( "#martialProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.martialProf + " / 90)" );
				}
				
				$( "#martialProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.martialBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.martialProf==20) {
			
				allPlayers[whoIsActive].playerProfs.martialBar=0;
				allPlayers[whoIsActive].playerProfs.martialLev=1;
				$( "#martialProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#martialProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.martialProf==50) {
			
				allPlayers[whoIsActive].playerProfs.martialBar=0;
				allPlayers[whoIsActive].playerProfs.martialLev=2;
				$( "#martialProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#martialProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.martialProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.martialLev=3;
				$( "#martialProfLevLab" ).html( "Master" );
			
			}
			
			
		} //martial
		
		//if barehand selected
		
		if (currProf==9) {
			
			if (allPlayers[whoIsActive].playerProfs.barehandLev==0) {
				
				allPlayers[whoIsActive].playerProfs.barehandProf++;
				$( "#barehandProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.barehandProf + " / 20)" );
				$( "#barehandProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.barehandProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.barehandLev>0) {
			
				allPlayers[whoIsActive].playerProfs.barehandProf++;
				allPlayers[whoIsActive].playerProfs.barehandBar++;
		
				if (allPlayers[whoIsActive].playerProfs.barehandLev==1) {
					$( "#barehandProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.barehandProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.barehandLev==2){
					$( "#barehandProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.barehandProf + " / 90)" );
				}
				
				$( "#barehandProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.barehandBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.barehandProf==20) {
			
				allPlayers[whoIsActive].playerProfs.barehandBar=0;
				allPlayers[whoIsActive].playerProfs.barehandLev=1;
				$( "#barehandProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#barehandProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.barehandProf==50) {
			
				allPlayers[whoIsActive].playerProfs.barehandBar=0;
				allPlayers[whoIsActive].playerProfs.barehandLev=2;
				$( "#barehandProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#barehandProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.barehandProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.barehandLev=3;
				$( "#barehandProfLevLab" ).html( "Master" );
			
			}
			
			
		} //barehand
		
		//if augment selected
		
		if (currProf==10) {
			
			if (allPlayers[whoIsActive].playerProfs.augmentLev==0) {
				
				allPlayers[whoIsActive].playerProfs.augmentProf++;
				$( "#augmentProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.augmentProf + " / 20)" );
				$( "#augmentProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.augmentProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.augmentLev>0) {
			
				allPlayers[whoIsActive].playerProfs.augmentProf++;
				allPlayers[whoIsActive].playerProfs.augmentBar++;
		
				if (allPlayers[whoIsActive].playerProfs.augmentLev==1) {
					$( "#augmentProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.augmentProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.augmentLev==2){
					$( "#augmentProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.augmentProf + " / 90)" );
				}
				
				$( "#augmentProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.augmentBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.augmentProf==20) {
			
				allPlayers[whoIsActive].playerProfs.augmentBar=0;
				allPlayers[whoIsActive].playerProfs.augmentLev=1;
				$( "#augmentProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#augmentProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.augmentProf==50) {
			
				allPlayers[whoIsActive].playerProfs.augmentBar=0;
				allPlayers[whoIsActive].playerProfs.augmentLev=2;
				$( "#augmentProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#augmentProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.augmentProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.augmentLev=3;
				$( "#augmentProfLevLab" ).html( "Master" );
			
			}
			
			
		} //augment
		
		
		//if mobility selected
		
		if (currProf==11) {
			
			if (allPlayers[whoIsActive].playerProfs.mobilityLev==0) {
				
				allPlayers[whoIsActive].playerProfs.mobilityProf++;
				$( "#mobilityProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.mobilityProf + " / 20)" );
				$( "#mobilityProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.mobilityProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.mobilityLev>0) {
			
				allPlayers[whoIsActive].playerProfs.mobilityProf++;
				allPlayers[whoIsActive].playerProfs.mobilityBar++;
		
				if (allPlayers[whoIsActive].playerProfs.mobilityLev==1) {
					$( "#mobilityProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.mobilityProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.mobilityLev==2){
					$( "#mobilityProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.mobilityProf + " / 90)" );
				}
				
				$( "#mobilityProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.mobilityBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.mobilityProf==20) {
			
				allPlayers[whoIsActive].playerProfs.mobilityBar=0;
				allPlayers[whoIsActive].playerProfs.mobilityLev=1;
				$( "#mobilityProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#mobilityProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.mobilityProf==50) {
			
				allPlayers[whoIsActive].playerProfs.mobilityBar=0;
				allPlayers[whoIsActive].playerProfs.mobilityLev=2;
				$( "#mobilityProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#mobilityProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.mobilityProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.mobilityLev=3;
				$( "#mobilityProfLevLab" ).html( "Master" );
			
			}
			
			
		} //mobility
		
		
		//if attackSpell selected
		
		if (currProf==12) {
			
			if (allPlayers[whoIsActive].playerProfs.attackSpellLev==0) {
				
				allPlayers[whoIsActive].playerProfs.attackSpellProf++;
				$( "#attackSpellProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.attackSpellProf + " / 20)" );
				$( "#attackSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.attackSpellProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.attackSpellLev>0) {
			
				allPlayers[whoIsActive].playerProfs.attackSpellProf++;
				allPlayers[whoIsActive].playerProfs.attackSpellBar++;
		
				if (allPlayers[whoIsActive].playerProfs.attackSpellLev==1) {
					$( "#attackSpellProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.attackSpellProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.attackSpellLev==2){
					$( "#attackSpellProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.attackSpellProf + " / 90)" );
				}
				
				$( "#attackSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.attackSpellBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.attackSpellProf==20) {
			
				allPlayers[whoIsActive].playerProfs.attackSpellBar=0;
				allPlayers[whoIsActive].playerProfs.attackSpellLev=1;
				$( "#attackSpellProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#attackSpellProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.attackSpellProf==50) {
			
				allPlayers[whoIsActive].playerProfs.attackSpellBar=0;
				allPlayers[whoIsActive].playerProfs.attackSpellLev=2;
				$( "#attackSpellProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#attackSpellProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.attackSpellProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.attackSpellLev=3;
				$( "#attackSpellProfLevLab" ).html( "Master" );
			
			}
			
			
		} //attackSpell
		
		
		//if matterSpell selected
		
		if (currProf==13) {
			
			if (allPlayers[whoIsActive].playerProfs.matterSpellLev==0) {
				
				allPlayers[whoIsActive].playerProfs.matterSpellProf++;
				$( "#matterSpellProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.matterSpellProf + " / 20)" );
				$( "#matterSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.matterSpellProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.matterSpellLev>0) {
			
				allPlayers[whoIsActive].playerProfs.matterSpellProf++;
				allPlayers[whoIsActive].playerProfs.matterSpellBar++;
		
				if (allPlayers[whoIsActive].playerProfs.matterSpellLev==1) {
					$( "#matterSpellProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.matterSpellProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.matterSpellLev==2){
					$( "#matterSpellProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.matterSpellProf + " / 90)" );
				}
				
				$( "#matterSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.matterSpellBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.matterSpellProf==20) {
			
				allPlayers[whoIsActive].playerProfs.matterSpellBar=0;
				allPlayers[whoIsActive].playerProfs.matterSpellLev=1;
				$( "#matterSpellProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#matterSpellProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.matterSpellProf==50) {
			
				allPlayers[whoIsActive].playerProfs.matterSpellBar=0;
				allPlayers[whoIsActive].playerProfs.matterSpellLev=2;
				$( "#matterSpellProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#matterSpellProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.matterSpellProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.matterSpellLev=3;
				$( "#matterSpellProfLevLab" ).html( "Master" );
			
			}
			
			
		} //matterSpell
		
		
		//if divinationSpell selected
		
		if (currProf==14) {
			
			if (allPlayers[whoIsActive].playerProfs.divinationSpellLev==0) {
				
				allPlayers[whoIsActive].playerProfs.divinationSpellProf++;
				$( "#divinationSpellProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.divinationSpellProf + " / 20)" );
				$( "#divinationSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.divinationSpellProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.divinationSpellLev>0) {
			
				allPlayers[whoIsActive].playerProfs.divinationSpellProf++;
				allPlayers[whoIsActive].playerProfs.divinationSpellBar++;
		
				if (allPlayers[whoIsActive].playerProfs.divinationSpellLev==1) {
					$( "#divinationSpellProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.divinationSpellProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.divinationSpellLev==2){
					$( "#divinationSpellProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.divinationSpellProf + " / 90)" );
				}
				
				$( "#divinationSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.divinationSpellBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.divinationSpellProf==20) {
			
				allPlayers[whoIsActive].playerProfs.divinationSpellBar=0;
				allPlayers[whoIsActive].playerProfs.divinationSpellLev=1;
				$( "#divinationSpellProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#divinationSpellProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.divinationSpellProf==50) {
			
				allPlayers[whoIsActive].playerProfs.divinationSpellBar=0;
				allPlayers[whoIsActive].playerProfs.divinationSpellLev=2;
				$( "#divinationSpellProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#divinationSpellProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.divinationSpellProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.divinationSpellLev=3;
				$( "#divinationSpellProfLevLab" ).html( "Master" );
			
			}
			
			
		} //divinationSpell
		
		
		//if clericalSpell selected
		
		if (currProf==15) {
			
			if (allPlayers[whoIsActive].playerProfs.clericalSpellLev==0) {
				
				allPlayers[whoIsActive].playerProfs.clericalSpellProf++;
				$( "#clericalSpellProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.clericalSpellProf + " / 20)" );
				$( "#clericalSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.clericalSpellProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.clericalSpellLev>0) {
			
				allPlayers[whoIsActive].playerProfs.clericalSpellProf++;
				allPlayers[whoIsActive].playerProfs.clericalSpellBar++;
		
				if (allPlayers[whoIsActive].playerProfs.clericalSpellLev==1) {
					$( "#clericalSpellProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.clericalSpellProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.clericalSpellLev==2){
					$( "#clericalSpellProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.clericalSpellProf + " / 90)" );
				}
				
				$( "#clericalSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.clericalSpellBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.clericalSpellProf==20) {
			
				allPlayers[whoIsActive].playerProfs.clericalSpellBar=0;
				allPlayers[whoIsActive].playerProfs.clericalSpellLev=1;
				$( "#clericalSpellProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#clericalSpellProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.clericalSpellProf==50) {
			
				allPlayers[whoIsActive].playerProfs.clericalSpellBar=0;
				allPlayers[whoIsActive].playerProfs.clericalSpellLev=2;
				$( "#clericalSpellProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#clericalSpellProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.clericalSpellProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.clericalSpellLev=3;
				$( "#clericalSpellProfLevLab" ).html( "Master" );
			
			}
			
			
		} //clericalSpell
		
		
		//if enchantmentSpell selected
		
		if (currProf==16) {
			
			if (allPlayers[whoIsActive].playerProfs.enchantmentSpellLev==0) {
				
				allPlayers[whoIsActive].playerProfs.enchantmentSpellProf++;
				$( "#enchantmentSpellProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.enchantmentSpellProf + " / 20)" );
				$( "#enchantmentSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.enchantmentSpellProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.enchantmentSpellLev>0) {
			
				allPlayers[whoIsActive].playerProfs.enchantmentSpellProf++;
				allPlayers[whoIsActive].playerProfs.enchantmentSpellBar++;
		
				if (allPlayers[whoIsActive].playerProfs.enchantmentSpellLev==1) {
					$( "#enchantmentSpellProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.enchantmentSpellProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.enchantmentSpellLev==2){
					$( "#enchantmentSpellProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.enchantmentSpellProf + " / 90)" );
				}
				
				$( "#enchantmentSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.enchantmentSpellBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.enchantmentSpellProf==20) {
			
				allPlayers[whoIsActive].playerProfs.enchantmentSpellBar=0;
				allPlayers[whoIsActive].playerProfs.enchantmentSpellLev=1;
				$( "#enchantmentSpellProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#enchantmentSpellProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.enchantmentSpellProf==50) {
			
				allPlayers[whoIsActive].playerProfs.enchantmentSpellBar=0;
				allPlayers[whoIsActive].playerProfs.enchantmentSpellLev=2;
				$( "#enchantmentSpellProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#enchantmentSpellProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.enchantmentSpellProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.enchantmentSpellLev=3;
				$( "#enchantmentSpellProfLevLab" ).html( "Master" );
			
			}
			
			
		} //enchantmentSpell
		
		
		//if healingSpell selected
		
		if (currProf==17) {
			
			if (allPlayers[whoIsActive].playerProfs.healingSpellLev==0) {
				
				allPlayers[whoIsActive].playerProfs.healingSpellProf++;
				$( "#healingSpellProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.healingSpellProf + " / 20)" );
				$( "#healingSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.healingSpellProf );
			}
			
			else if (allPlayers[whoIsActive].playerProfs.healingSpellLev>0) {
			
				allPlayers[whoIsActive].playerProfs.healingSpellProf++;
				allPlayers[whoIsActive].playerProfs.healingSpellBar++;
		
				if (allPlayers[whoIsActive].playerProfs.healingSpellLev==1) {
					$( "#healingSpellProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.healingSpellProf + " / 50)" );
				}
				
				if (allPlayers[whoIsActive].playerProfs.healingSpellLev==2){
					$( "#healingSpellProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.healingSpellProf + " / 90)" );
				}
				
				$( "#healingSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.healingSpellBar );
			}
			
			if (allPlayers[whoIsActive].playerProfs.healingSpellProf==20) {
			
				allPlayers[whoIsActive].playerProfs.healingSpellBar=0;
				allPlayers[whoIsActive].playerProfs.healingSpellLev=1;
				$( "#healingSpellProfLevLab" ).html( "Apprentice<br>(20 / 50)" );
				$( "#healingSpellProfBar" ).progressbar({value:0 , max:30});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.healingSpellProf==50) {
			
				allPlayers[whoIsActive].playerProfs.healingSpellBar=0;
				allPlayers[whoIsActive].playerProfs.healingSpellLev=2;
				$( "#healingSpellProfLevLab" ).html( "Adept (50 / 90)" );
				$( "#healingSpellProfBar" ).progressbar({value:0 , max:40});
			
			}
			
			if (allPlayers[whoIsActive].playerProfs.healingSpellProf==90) {
			
				
				allPlayers[whoIsActive].playerProfs.healingSpellLev=3;
				$( "#healingSpellProfLevLab" ).html( "Master" );
			
			}
			
			
		} //healingSpell
	
	} //if player exists
}

function profDec() {
}

$( "#daggerProfBar" ).progressbar({
	value: 0,
	max:20
});


$( "#axeProfBar" ).progressbar({
	value: 0,
	max:20
});

$( "#swordProfBar" ).progressbar({
	value: 0,
	max:20
});

$( "#bludgeonProfBar" ).progressbar({
	value: 0,
	max:20
});

$( "#staffProfBar" ).progressbar({
	value: 0,
	max:20
});

$( "#spearProfBar" ).progressbar({
	value: 0,
	max:20
});

$( "#polearmProfBar" ).progressbar({
	value: 0,
	max:20
});

$( "#bowProfBar" ).progressbar({
	value: 0,
	max:20
});

$( "#martialProfBar" ).progressbar({
	value: 0,
	max:20
});

$( "#barehandProfBar" ).progressbar({
	value: 0,
	max:20
});

$( "#augmentProfBar" ).progressbar({
	value: 0,
	max:20
});

$( "#mobilityProfBar" ).progressbar({
	value: 0,
	max:20
});

$( "#attackSpellProfBar" ).progressbar({
	value: 0,
	max:20
});

$( "#matterSpellProfBar" ).progressbar({
	value: 0,
	max:20
});

$( "#divinationSpellProfBar" ).progressbar({
	value: 0,
	max:20
});

$( "#clericalSpellProfBar" ).progressbar({
	value: 0,
	max:20
});

$( "#enchantmentSpellProfBar" ).progressbar({
	value: 0,
	max:20
});

$( "#healingSpellProfBar" ).progressbar({
	value: 0,
	max:20
});

$("div.profGrid").find("div.profLabel").click(function( event ) {

	//alert("asdf");
	
	var tempStr=this.id;
	
	//alert(tempStr);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
	$("#"+tempStr+"ProfBar").css("background-color", profBarColor);
	
	if (tempStr=="dagger") {
	
		currProf=0;
	}
	
	if (tempStr=="axe") {
	
		currProf=1;
	}
	
	if (tempStr=="sword") {
	
		currProf=2;
	}
	
	if (tempStr=="bludgeon") {
	
		currProf=3;
	}
	
	if (tempStr=="staff") {
	
		currProf=4;
	}
	
	if (tempStr=="spear") {
	
		currProf=5;
	}
	
	if (tempStr=="polearm") {
	
		currProf=6;
	}
	
	if (tempStr=="bow") {
	
		currProf=7;
	}
	
	if (tempStr=="martial") {
	
		currProf=8;
	}
	
	if (tempStr=="barehand") {
	
		currProf=9;
	}
	
	if (tempStr=="augment") {
	
		currProf=10;
	}
	
	if (tempStr=="mobility") {
	
		currProf=11;
	}
	
	if (tempStr=="attackSpell") {
	
		currProf=12;
	}
	
	if (tempStr=="matterSpell") {
	
		currProf=13;
	}
	
	if (tempStr=="divinationSpell") {
	
		currProf=14;
	}
	
	if (tempStr=="clericalSpell") {
	
		currProf=15;
	}
	
	if (tempStr=="enchantmentSpell") {
	
		currProf=16;
	}
	
	if (tempStr=="healingSpell") {
	
		currProf=17;
	}
	
});

$("#daggerProfBar").click(function(){

	currProf=0;
	
	
	$(this).css("background-color", profBarColor);
	
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
	
});

$("#axeProfBar").click(function(){

	currProf=1;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
});

$("#swordProfBar").click(function(){

	currProf=2;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
});

$("#bludgeonProfBar").click(function(){

	currProf=3;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
});

$("#staffProfBar").click(function(){

	currProf=4;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
});

$("#spearProfBar").click(function(){

	currProf=5;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
});

$("#polearmProfBar").click(function(){

	currProf=6;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
});

$("#bowProfBar").click(function(){

	currProf=7;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
});

$("#martialProfBar").click(function(){

	currProf=8;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
});

$("#barehandProfBar").click(function(){

	currProf=9;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
});

$("#augmentProfBar").click(function(){

	currProf=10;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
});

$("#mobilityProfBar").click(function(){

	currProf=11;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
});

$("#attackSpellProfBar").click(function(){

	currProf=12;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
});

$("#matterSpellProfBar").click(function(){

	currProf=13;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
});

$("#divinationSpellProfBar").click(function(){

	currProf=14;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
});

$("#clericalSpellProfBar").click(function(){

	currProf=15;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
});

$("#enchantmentSpellProfBar").click(function(){

	currProf=16;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
});

$("#healingSpellProfBar").click(function(){

	currProf=17;

	$(this).css("background-color", profBarColor);
	
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	
});


$("#playerTabs").tabs({collapsible: true});
$("#playerMiscTabs").tabs({collapsible: true});

/*$(function() {
            $( "#playerTabs-5" ).tabs({
               heightStyle:"fill",
               collapsible:true,
               hide:"slideUp"
            });
         });*/

//when tab is clicked


$( "#playerTabs" ).tabs({
  beforeActivate: function( event, ui ) {
  
	
	var tabCmp=ui.newPanel.attr('id'); //for comparing tab id
	
	//alert(ui.newPanel.attr('id'));
	
	if (tabCmp=="playerTabs-1")
	{
		whoIsActive=0;

		updatePlayer();
	}
	
	if (tabCmp=="playerTabs-2")
	{
		whoIsActive=1;
		
		updatePlayer();
	}
	
	if (tabCmp=="playerTabs-3")
	{
		whoIsActive=2;
		
		updatePlayer();
	}
	
	if (tabCmp=="playerTabs-4")
	{
		whoIsActive=3;

		updatePlayer();
	}
	
	if (tabCmp=="playerTabs-5")
	{
		whoIsActive=4;
		
		updatePlayer();
	}	
	
	if (tabCmp=="playerTabs-6")
	{
		whoIsActive=5;
		
		updatePlayer();
	}
	
	if (tabCmp=="playerTabs-7")
	{
		whoIsActive=6;
		
		updatePlayer();
		
	}
	
	if (tabCmp=="playerTabs-8")
	{
		whoIsActive=7;
		updatePlayer();
	}
	
	if (tabCmp=="playerTabs-9")
	{
		whoIsActive=8;
		updatePlayer();
	}
	
	//reset prof bars
	currProf=-1;
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
	
	//clears spinner entries
	$("div.playerStatsGrid").find("input[type=\"spinner\"]").spinner("value", '');
	
	
	//select room tile
	if (allPlayers[whoIsActive].playerExists==true) {
	
		if (allPlayers[whoIsActive].index>0) {
		
			//reset previous current tile color
			$("#roomTile"+roomTileIndex).css("background", tileDefColor);
			
			//color if trap
			if (roomTileIndex>0) {
	
				if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasTrap==true) {
					$("#roomTile"+roomTileIndex).css("background", trapDefColor);
				}
			
			}
			
			
			roomTileIndex=allPlayers[whoIsActive].index;
			$("#roomTile"+roomTileIndex).css("background", butSelColor);
			
		}
	}
	
  }
});

function updatePlayer(){

	//updatefunc

	var tempStyle;
	var armorACInt;
	var otherACInt;
	var tempStat;
	var tempAlign;
	
	//if (allPlayers[whoIsActive].hasTitle==false) {
		//let tempName=buildPlayerName();
		//$('#playerTitle').html(tempName);
	//}
	
	
	if (allPlayers[whoIsActive].alignment==1) {
		
		tempAlign=" Lawful ";
	
	}
		
	if (allPlayers[whoIsActive].alignment==2) {
	
		tempAlign=" Chaotic ";
	
	}
		
	
	if (allPlayers[whoIsActive].hasName!=true && allPlayers[whoIsActive].hasTitle==true) {
	
		let tempInt=whoIsActive;
		tempInt++;
		//tempInt=toString(tempInt);
	
		//$('#playerTitle').html("asdf");
		//$('#playerTitle').html("<h2>Player " + tempInt + ", the " + allPlayers[whoIsActive].playerNameRace + " " + allPlayers[whoIsActive].playerNameClass + "</h2>");
		
		
		
		tempStyle="Player " + tempInt + ", the " + tempAlign + allPlayers[whoIsActive].playerNameRace + " " + allPlayers[whoIsActive].playerNameClass;
	}
	
	else if (allPlayers[whoIsActive].hasTitle==true && allPlayers[whoIsActive].hasName==true){
	
		//$('#playerTitle').html("<h2>" + allPlayers[whoIsActive].playerName + ", the " + allPlayers[whoIsActive].playerNameRace + " " + allPlayers[whoIsActive].playerNameClass + "</h2>");
		tempStyle=allPlayers[whoIsActive].playerName + ", the " + tempAlign + allPlayers[whoIsActive].playerNameRace + " " + allPlayers[whoIsActive].playerNameClass;
	}
	
	else if (allPlayers[whoIsActive].hasName==true && allPlayers[whoIsActive].hasTitle!=true) {
	
		//$('#playerTitle').html("<h2>" + allPlayers[whoIsActive].playerName + "</h2>");
		tempStyle=allPlayers[whoIsActive].playerName;
	}
	
	else if (allPlayers[whoIsActive].hasName!=true && allPlayers[whoIsActive].hasTitle!=true){
		tempInt=whoIsActive+1;
		tempStyle="Player " + tempInt;
		//$('#playerTitle').html(tempStyle);
	}
	
	if (allPlayers[whoIsActive].isLeader==true) {
	
		tempStyle+=" (Leader)";
	}
	
	$('#playerTitle').html(tempStyle);
	
	//to do: if player does not exist blank everything...
		
	if (allPlayers[whoIsActive].playerExists==true) {
	
		//ailments
		
		updateAilmentPlayer();
	
		
		tempStat="Level: " + allPlayers[whoIsActive].playerLevel;
		$('#levelLab').html(tempStat);
			
		tempStat="HP: " + allPlayers[whoIsActive].hpCurr;
		tempStat+=" / " + allPlayers[whoIsActive].hpMax;
		$('#playerHP').html(tempStat);
		
		tempStat="Energy: " + allPlayers[whoIsActive].energyCurr;
		tempStat+=" / " + allPlayers[whoIsActive].energyMax;
		$('#playerEnergy').html(tempStat);
		
		
		
		tempStat="Encumbrance: " + allPlayers[whoIsActive].weightCurr;
		tempStat+=" / " + allPlayers[whoIsActive].weightMax;
		
		if (allPlayers[whoIsActive].weightCurr>allPlayers[whoIsActive].weightMax) {
		
			if (allPlayers[whoIsActive].weightCurr<=(allPlayers[whoIsActive].weightMax*burdenedMod)) {
			
				tempStat+="<br>Burdened";
				allPlayers[whoIsActive].encumbrance=1;
			}
			
			else if (allPlayers[whoIsActive].weightCurr>(allPlayers[whoIsActive].weightMax*burdenedMod) && allPlayers[whoIsActive].weightCurr<=(allPlayers[whoIsActive].weightMax*stressedMod)) {
			
				tempStat+="<br>Stressed";
				allPlayers[whoIsActive].encumbrance=2;
			}
			
			else if (allPlayers[whoIsActive].weightCurr>(allPlayers[whoIsActive].weightMax*stressedMod) && allPlayers[whoIsActive].weightCurr<=(allPlayers[whoIsActive].weightMax*strainedMod)) {
			
				tempStat+="<br>Strained";
				allPlayers[whoIsActive].encumbrance=3;
			}
			
			else if (allPlayers[whoIsActive].weightCurr>(allPlayers[whoIsActive].weightMax*strainedMod) && allPlayers[whoIsActive].weightCurr<=(allPlayers[whoIsActive].weightMax*overtaxedMod)) {
			
				tempStat+="<br>Overtaxed";
				allPlayers[whoIsActive].encumbrance=4;
			}
			
			else if (allPlayers[whoIsActive].weightCurr>(allPlayers[whoIsActive].weightMax*overtaxedMod) && allPlayers[whoIsActive].weightCurr<=(allPlayers[whoIsActive].weightMax*overloadedMod)) {
			
				tempStat+="<br>Overloaded";
				allPlayers[whoIsActive].encumbrance=5;
			}
		
		}//encumbered
		
		$('#playerEncumb').html(tempStat);
		
		
		
		tempStat="Strength: " + allPlayers[whoIsActive].strength;
		$('#playerStr').html(tempStat);
		
		tempStat="Dexterity: " + allPlayers[whoIsActive].dexterity;
		$('#playerDex').html(tempStat);
		
		tempStat="Intelligence: " + allPlayers[whoIsActive].intelligence;
		$('#playerInt').html(tempStat);
		
		tempStat="Wisdom: " + allPlayers[whoIsActive].wisdom;
		$('#playerWis').html(tempStat);
		
		tempStat="Constitution: " + allPlayers[whoIsActive].constitution;
		$('#playerCon').html(tempStat);
		
		
		
		
		
		
		tempStat="Hunger: " + allPlayers[whoIsActive].hunger;
		if (allPlayers[whoIsActive].hunger>satiatedHigh) {
			
			tempStat+="<br>Oversatiated";
		}
		else if (allPlayers[whoIsActive].hunger>=satiatedLow && allPlayers[whoIsActive].hunger<satiatedHigh) {
			
			tempStat+="<br>Satiated";
		}
		else if (allPlayers[whoIsActive].hunger>=hungryLow && allPlayers[whoIsActive].hunger<=hungryHigh) {
			
			tempStat+="<br>Hungry";
		}
		else if (allPlayers[whoIsActive].hunger>=weakLow && allPlayers[whoIsActive].hunger<=weakHigh) {
			
			tempStat+="<br>Weak";
		}
		else if (allPlayers[whoIsActive].hunger<=0) {
			
			tempStat+="<br>Starved";
		}
		$('#playerHunger').html(tempStat);
		
		
		
		
		tempStat="AC: " + allPlayers[whoIsActive].totalAC;
		armorACInt=allPlayers[whoIsActive].armorAC;
		tempStat+=" (+" + allPlayers[whoIsActive].armorAC +" from armor, +" + allPlayers[whoIsActive].otherAC + " other)";
		$('#playerAC').html(tempStat);
		
		//actions
		tempStat="Actions this turn: "; 
		if (allPlayers[whoIsActive].speed>=12 && allPlayers[whoIsActive].speed<24){
			tempStat+="1";
			allPlayers[whoIsActive].actions=1;
		}
		if (allPlayers[whoIsActive].speed>=24){
			tempStat+="2";
			allPlayers[whoIsActive].actions=2;
		}
		
		if (allPlayers[whoIsActive].speed<12){
			tempStat+="0";
			allPlayers[whoIsActive].actions=0;
		}
		
		$('#playerTurnAct').html(tempStat);
		
		
		//player index
		if (allPlayers[whoIsActive].index>0) {
		
			tempStat="Index: " + allPlayers[whoIsActive].index;
			$("#playerIndex").html(tempStat);
		
		}
		
		tempStat="Luck: " + allPlayers[whoIsActive].luck;
		$("#playerLuck").html(tempStat);
		
		tempStat="Prayer: ";
		if (allPlayers[whoIsActive].prayTime>0) {
			tempStat+=allPlayers[whoIsActive].prayTime;
		}
		$("#prayTime").html(tempStat);
		

		
		updatePassives();
		
		
		//update objectives
		
		let tempObj1="1. " + allPlayers[whoIsActive].obj1.goal;
		let tempObj2="2. " + allPlayers[whoIsActive].obj2.goal;
		let tempObj3="3. " + allPlayers[whoIsActive].obj3.goal;
		let tempObj4="4. " + allPlayers[whoIsActive].obj4.goal;
		
		if (allPlayers[whoIsActive].obj1!="") {
		
			$( "#obj1" ).html(tempObj1);
			
		}
		
		if (allPlayers[whoIsActive].obj2!="") {
		
			$( "#obj2" ).html(tempObj2);
			
		}
		
		if (allPlayers[whoIsActive].obj3!="") {
		
			$( "#obj3" ).html(tempObj3);
			
		}
		
		if (allPlayers[whoIsActive].obj4!="") {
		
			$( "#obj4" ).html(tempObj4);
			
		}
		
		//update profs
		
		if (allPlayers[whoIsActive].playerProfs.daggerLev==0) {
			
			$( "#daggerProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.daggerProf + " / 20)" );
			$( "#daggerProfBar" ).progressbar({value:0 , max:20});
			$( "#daggerProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.daggerProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.daggerLev==1) {
		
			$( "#daggerProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.daggerProf + " / 50)" );
			$( "#daggerProfBar" ).progressbar({value:0 , max:30});
			$( "#daggerProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.daggerBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.daggerLev==2) {
		
			$( "#daggerProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.daggerProf + " / 90)" );
			$( "#daggerProfBar" ).progressbar({value:0 , max:40});
			$( "#daggerProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.daggerBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.daggerLev==3) {
		
			$( "#daggerProfLevLab" ).html( "Master" );
			$( "#daggerProfBar" ).progressbar({value:1 , max:1});
			$( "#daggerProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.daggerBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.axeLev==0) {
			
			$( "#axeProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.axeProf + " / 20)" );
			$( "#axeProfBar" ).progressbar({value:0 , max:20});
			$( "#axeProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.axeProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.axeLev==1) {
		
			$( "#axeProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.axeProf + " / 50)" );
			$( "#axeProfBar" ).progressbar({value:0 , max:30});
			$( "#axeProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.axeBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.axeLev==2) {
		
			$( "#axeProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.axeProf + " / 90)" );
			$( "#axeProfBar" ).progressbar({value:0 , max:40});
			$( "#axeProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.axeBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.axeLev==3) {
		
			$( "#axeProfLevLab" ).html( "Master" );
			$( "#axeProfBar" ).progressbar({value:1 , max:1});
			$( "#axeProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.axeBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.swordLev==0) {
			
			$( "#swordProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.swordProf + " / 20)" );
			$( "#swordProfBar" ).progressbar({value:0 , max:20});
			$( "#swordProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.swordProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.swordLev==1) {
		
			$( "#swordProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.swordProf + " / 50)" );
			$( "#swordProfBar" ).progressbar({value:0 , max:30});
			$( "#swordProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.swordBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.swordLev==2) {
		
			$( "#swordProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.swordProf + " / 90)" );
			$( "#swordProfBar" ).progressbar({value:0 , max:40});
			$( "#swordProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.swordBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.swordLev==3) {
		
			$( "#swordProfLevLab" ).html( "Master" );
			$( "#swordProfBar" ).progressbar({value:1 , max:1});
			$( "#swordProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.swordBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.bludgeonLev==0) {
			
			$( "#bludgeonProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.bludgeonProf + " / 20)" );
			$( "#bludgeonProfBar" ).progressbar({value:0 , max:20});
			$( "#bludgeonProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.bludgeonProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.bludgeonLev==1) {
		
			$( "#bludgeonProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.bludgeonProf + " / 50)" );
			$( "#bludgeonProfBar" ).progressbar({value:0 , max:30});
			$( "#bludgeonProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.bludgeonBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.bludgeonLev==2) {
		
			$( "#bludgeonProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.bludgeonProf + " / 90)" );
			$( "#bludgeonProfBar" ).progressbar({value:0 , max:40});
			$( "#bludgeonProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.bludgeonBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.bludgeonLev==3) {
		
			$( "#bludgeonProfLevLab" ).html( "Master" );
			$( "#bludgeonProfBar" ).progressbar({value:1 , max:1});
			$( "#bludgeonProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.bludgeonBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.staffLev==0) {
			
			$( "#staffProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.staffProf + " / 20)" );
			$( "#staffProfBar" ).progressbar({value:0 , max:20});
			$( "#staffProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.staffProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.staffLev==1) {
		
			$( "#staffProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.staffProf + " / 50)" );
			$( "#staffProfBar" ).progressbar({value:0 , max:30});
			$( "#staffProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.staffBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.staffLev==2) {
		
			$( "#staffProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.staffProf + " / 90)" );
			$( "#staffProfBar" ).progressbar({value:0 , max:40});
			$( "#staffProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.staffBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.staffLev==3) {
		
			$( "#staffProfLevLab" ).html( "Master" );
			$( "#staffProfBar" ).progressbar({value:1 , max:1});
			$( "#staffProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.staffBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.spearLev==0) {
			
			$( "#spearProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.spearProf + " / 20)" );
			$( "#spearProfBar" ).progressbar({value:0 , max:20});
			$( "#spearProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.spearProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.spearLev==1) {
		
			$( "#spearProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.spearProf + " / 50)" );
			$( "#spearProfBar" ).progressbar({value:0 , max:30});
			$( "#spearProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.spearBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.spearLev==2) {
		
			$( "#spearProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.spearProf + " / 90)" );
			$( "#spearProfBar" ).progressbar({value:0 , max:40});
			$( "#spearProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.spearBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.spearLev==3) {
		
			$( "#spearProfLevLab" ).html( "Master" );
			$( "#spearProfBar" ).progressbar({value:1 , max:1});
			$( "#spearProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.spearBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.polearmLev==0) {
			
			$( "#polearmProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.polearmProf + " / 20)" );
			$( "#polearmProfBar" ).progressbar({value:0 , max:20});
			$( "#polearmProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.polearmProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.polearmLev==1) {
		
			$( "#polearmProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.polearmProf + " / 50)" );
			$( "#polearmProfBar" ).progressbar({value:0 , max:30});
			$( "#polearmProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.polearmBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.polearmLev==2) {
		
			$( "#polearmProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.polearmProf + " / 90)" );
			$( "#polearmProfBar" ).progressbar({value:0 , max:40});
			$( "#polearmProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.polearmBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.polearmLev==3) {
		
			$( "#polearmProfLevLab" ).html( "Master" );
			$( "#polearmProfBar" ).progressbar({value:1 , max:1});
			$( "#polearmProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.polearmBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.bowLev==0) {
			
			$( "#bowProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.bowProf + " / 20)" );
			$( "#bowProfBar" ).progressbar({value:0 , max:20});
			$( "#bowProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.bowProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.bowLev==1) {
		
			$( "#bowProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.bowProf + " / 50)" );
			$( "#bowProfBar" ).progressbar({value:0 , max:30});
			$( "#bowProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.bowBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.bowLev==2) {
		
			$( "#bowProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.bowProf + " / 90)" );
			$( "#bowProfBar" ).progressbar({value:0 , max:40});
			$( "#bowProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.bowBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.bowLev==3) {
		
			$( "#bowProfLevLab" ).html( "Master" );
			$( "#bowProfBar" ).progressbar({value:1 , max:1});
			$( "#bowProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.bowBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.martialLev==0) {
			
			$( "#martialProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.martialProf + " / 20)" );
			$( "#martialProfBar" ).progressbar({value:0 , max:20});
			$( "#martialProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.martialProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.martialLev==1) {
		
			$( "#martialProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.martialProf + " / 50)" );
			$( "#martialProfBar" ).progressbar({value:0 , max:30});
			$( "#martialProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.martialBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.martialLev==2) {
		
			$( "#martialProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.martialProf + " / 90)" );
			$( "#martialProfBar" ).progressbar({value:0 , max:40});
			$( "#martialProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.martialBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.martialLev==3) {
		
			$( "#martialProfLevLab" ).html( "Master" );
			$( "#martialProfBar" ).progressbar({value:1 , max:1});
			$( "#martialProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.martialBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.barehandLev==0) {
			
			$( "#barehandProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.barehandProf + " / 20)" );
			$( "#barehandProfBar" ).progressbar({value:0 , max:20});
			$( "#barehandProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.barehandProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.barehandLev==1) {
		
			$( "#barehandProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.barehandProf + " / 50)" );
			$( "#barehandProfBar" ).progressbar({value:0 , max:30});
			$( "#barehandProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.barehandBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.barehandLev==2) {
		
			$( "#barehandProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.barehandProf + " / 90)" );
			$( "#barehandProfBar" ).progressbar({value:0 , max:40});
			$( "#barehandProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.barehandBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.barehandLev==3) {
		
			$( "#barehandProfLevLab" ).html( "Master" );
			$( "#barehandProfBar" ).progressbar({value:1 , max:1});
			$( "#barehandProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.barehandBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.augmentLev==0) {
			
			$( "#augmentProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.augmentProf + " / 20)" );
			$( "#augmentProfBar" ).progressbar({value:0 , max:20});
			$( "#augmentProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.augmentProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.augmentLev==1) {
		
			$( "#augmentProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.augmentProf + " / 50)" );
			$( "#augmentProfBar" ).progressbar({value:0 , max:30});
			$( "#augmentProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.augmentBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.augmentLev==2) {
		
			$( "#augmentProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.augmentProf + " / 90)" );
			$( "#augmentProfBar" ).progressbar({value:0 , max:40});
			$( "#augmentProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.augmentBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.augmentLev==3) {
		
			$( "#augmentProfLevLab" ).html( "Master" );
			$( "#augmentProfBar" ).progressbar({value:1 , max:1});
			$( "#augmentProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.augmentBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.mobilityLev==0) {
			
			$( "#mobilityProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.mobilityProf + " / 20)" );
			$( "#mobilityProfBar" ).progressbar({value:0 , max:20});
			$( "#mobilityProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.mobilityProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.mobilityLev==1) {
		
			$( "#mobilityProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.mobilityProf + " / 50)" );
			$( "#mobilityProfBar" ).progressbar({value:0 , max:30});
			$( "#mobilityProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.mobilityBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.mobilityLev==2) {
		
			$( "#mobilityProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.mobilityProf + " / 90)" );
			$( "#mobilityProfBar" ).progressbar({value:0 , max:40});
			$( "#mobilityProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.mobilityBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.mobilityLev==3) {
		
			$( "#mobilityProfLevLab" ).html( "Master" );
			$( "#mobilityProfBar" ).progressbar({value:1 , max:1});
			$( "#mobilityProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.mobilityBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.attackSpellLev==0) {
			
			$( "#attackSpellProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.attackSpellProf + " / 20)" );
			$( "#attackSpellProfBar" ).progressbar({value:0 , max:20});
			$( "#attackSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.attackSpellProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.attackSpellLev==1) {
		
			$( "#attackSpellProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.attackSpellProf + " / 50)" );
			$( "#attackSpellProfBar" ).progressbar({value:0 , max:30});
			$( "#attackSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.attackSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.attackSpellLev==2) {
		
			$( "#attackSpellProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.attackSpellProf + " / 90)" );
			$( "#attackSpellProfBar" ).progressbar({value:0 , max:40});
			$( "#attackSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.attackSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.attackSpellLev==3) {
		
			$( "#attackSpellProfLevLab" ).html( "Master" );
			$( "#attackSpellProfBar" ).progressbar({value:1 , max:1});
			$( "#attackSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.attackSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.matterSpellLev==0) {
			
			$( "#matterSpellProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.matterSpellProf + " / 20)" );
			$( "#matterSpellProfBar" ).progressbar({value:0 , max:20});
			$( "#matterSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.matterSpellProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.matterSpellLev==1) {
		
			$( "#matterSpellProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.matterSpellProf + " / 50)" );
			$( "#matterSpellProfBar" ).progressbar({value:0 , max:30});
			$( "#matterSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.matterSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.matterSpellLev==2) {
		
			$( "#matterSpellProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.matterSpellProf + " / 90)" );
			$( "#matterSpellProfBar" ).progressbar({value:0 , max:40});
			$( "#matterSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.matterSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.matterSpellLev==3) {
		
			$( "#matterSpellProfLevLab" ).html( "Master" );
			$( "#matterSpellProfBar" ).progressbar({value:1 , max:1});
			$( "#matterSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.matterSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.divinationSpellLev==0) {
			
			$( "#divinationSpellProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.divinationSpellProf + " / 20)" );
			$( "#divinationSpellProfBar" ).progressbar({value:0 , max:20});
			$( "#divinationSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.divinationSpellProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.divinationSpellLev==1) {
		
			$( "#divinationSpellProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.divinationSpellProf + " / 50)" );
			$( "#divinationSpellProfBar" ).progressbar({value:0 , max:30});
			$( "#divinationSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.divinationSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.divinationSpellLev==2) {
		
			$( "#divinationSpellProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.divinationSpellProf + " / 90)" );
			$( "#divinationSpellProfBar" ).progressbar({value:0 , max:40});
			$( "#divinationSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.divinationSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.divinationSpellLev==3) {
		
			$( "#divinationSpellProfLevLab" ).html( "Master" );
			$( "#divinationSpellProfBar" ).progressbar({value:1 , max:1});
			$( "#divinationSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.divinationSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.clericalSpellLev==0) {
			
			$( "#clericalSpellProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.clericalSpellProf + " / 20)" );
			$( "#clericalSpellProfBar" ).progressbar({value:0 , max:20});
			$( "#clericalSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.clericalSpellProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.clericalSpellLev==1) {
		
			$( "#clericalSpellProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.clericalSpellProf + " / 50)" );
			$( "#clericalSpellProfBar" ).progressbar({value:0 , max:30});
			$( "#clericalSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.clericalSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.clericalSpellLev==2) {
		
			$( "#clericalSpellProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.clericalSpellProf + " / 90)" );
			$( "#clericalSpellProfBar" ).progressbar({value:0 , max:40});
			$( "#clericalSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.clericalSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.clericalSpellLev==3) {
		
			$( "#clericalSpellProfLevLab" ).html( "Master" );
			$( "#clericalSpellProfBar" ).progressbar({value:1 , max:1});
			$( "#clericalSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.clericalSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.enchantmentSpellLev==0) {
			
			$( "#enchantmentSpellProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.enchantmentSpellProf + " / 20)" );
			$( "#enchantmentSpellProfBar" ).progressbar({value:0 , max:20});
			$( "#enchantmentSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.enchantmentSpellProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.enchantmentSpellLev==1) {
		
			$( "#enchantmentSpellProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.enchantmentSpellProf + " / 50)" );
			$( "#enchantmentSpellProfBar" ).progressbar({value:0 , max:30});
			$( "#enchantmentSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.enchantmentSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.enchantmentSpellLev==2) {
		
			$( "#enchantmentSpellProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.enchantmentSpellProf + " / 90)" );
			$( "#enchantmentSpellProfBar" ).progressbar({value:0 , max:40});
			$( "#enchantmentSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.enchantmentSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.enchantmentSpellLev==3) {
		
			$( "#enchantmentSpellProfLevLab" ).html( "Master" );
			$( "#enchantmentSpellProfBar" ).progressbar({value:1 , max:1});
			$( "#enchantmentSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.enchantmentSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.healingSpellLev==0) {
			
			$( "#healingSpellProfLevLab" ).html( "Novice (" + allPlayers[whoIsActive].playerProfs.healingSpellProf + " / 20)" );
			$( "#healingSpellProfBar" ).progressbar({value:0 , max:20});
			$( "#healingSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.healingSpellProf );
			
		}
		
		if (allPlayers[whoIsActive].playerProfs.healingSpellLev==1) {
		
			$( "#healingSpellProfLevLab" ).html( "Apprentice<br>(" + allPlayers[whoIsActive].playerProfs.healingSpellProf + " / 50)" );
			$( "#healingSpellProfBar" ).progressbar({value:0 , max:30});
			$( "#healingSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.healingSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.healingSpellLev==2) {
		
			$( "#healingSpellProfLevLab" ).html( "Adept (" + allPlayers[whoIsActive].playerProfs.healingSpellProf + " / 90)" );
			$( "#healingSpellProfBar" ).progressbar({value:0 , max:40});
			$( "#healingSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.healingSpellBar );
		
		}
		
		if (allPlayers[whoIsActive].playerProfs.healingSpellLev==3) {
		
			$( "#healingSpellProfLevLab" ).html( "Master" );
			$( "#healingSpellProfBar" ).progressbar({value:1 , max:1});
			$( "#healingSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.healingSpellBar );
		
		}
	
	} //if exists
	
	
	
	if (allPlayers[whoIsActive].playerExists==false) {
	
		$("#playerAilments").html("");
	
	}
	
	/*$( "#daggerProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.daggerProf );
	$( "#axeProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.axeProf );
	$( "#swordProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.swordProf );
	$( "#bludgeonProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.bludgeonProf );
	$( "#staffProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.staffProf );
	$( "#spearProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.spearProf );
	$( "#polearmProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.polearmProf );
	$( "#bowProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.bowProf );
	$( "#martialProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.martialProf );
	$( "#barehandProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.barehandProf );
	$( "#augmentProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.augmentProf );
	$( "#mobilityProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.mobilityProf );
	$( "#attackSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.attackSpellProf );
	$( "#matterSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.matterSpellProf );
	$( "#divinationSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.divinationSpellProf );
	$( "#clericalSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.clericalSpellProf );
	$( "#enchantmentSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.enchantmentSpellProf );
	$( "#healingSpellProfBar" ).progressbar( "value", allPlayers[whoIsActive].playerProfs.healingSpellProf );*/
	

}

function updateAilmentPlayer() {

	let multAil=false;
		
	tempStat="";
	$("#playerAilments").html("");
	
	//slow
	if (allPlayers[whoIsActive].playerPassives.slow>0) {
	
		if (multAil==true) {
		
			tempStat+=", Slowed (" + allPlayers[whoIsActive].playerPassives.slow + ")";
		}
	
		else if(multAil==false) {
			tempStat+="Slowed (" + allPlayers[whoIsActive].playerPassives.slow + ")";
			multAil=true;
		}
		
		$("#playerAilments").html(tempStat);
		
	
	}
	
	//blind
	if (allPlayers[whoIsActive].playerPassives.blind>0) {
	
		if (multAil==true) {
		
			tempStat+=", Blind (" + allPlayers[whoIsActive].playerPassives.blind + ")";
		}
	
		else if(multAil==false) {
			tempStat+="Blind (" + allPlayers[whoIsActive].playerPassives.blind + ")";
			multAil=true;
		}
		$("#playerAilments").html(tempStat);
	
	}
	
	//sleep
	if (allPlayers[whoIsActive].playerPassives.sleep>0) {
	
		if (multAil==true) {
		
			tempStat+=", Asleep (" + allPlayers[whoIsActive].playerPassives.sleep + ")";
		}
	
		else if(multAil==false) {
			tempStat+="Asleep (" + allPlayers[whoIsActive].playerPassives.sleep + ")";
			multAil=true;
		}
		$("#playerAilments").html(tempStat);
	
	}
	
	//poisoned
	if (allPlayers[whoIsActive].playerPassives.poisoned>0) {
	
		if (multAil==true) {
		
			tempStat+=", Poisoned (" + allPlayers[whoIsActive].playerPassives.poisoned + ")";
		}
	
		else if(multAil==false) {
			tempStat+="Poisoned (" + allPlayers[whoIsActive].playerPassives.poisoned + ")";
			multAil=true;
		}
		$("#playerAilments").html(tempStat);
	
	}
	
	//confused
	if (allPlayers[whoIsActive].playerPassives.confused>0) {
	
		if (multAil==true) {
		
			tempStat+=", Confused (" + allPlayers[whoIsActive].playerPassives.confused + ")";
		}
	
		else if(multAil==false) {
			tempStat+="Confused (" + allPlayers[whoIsActive].playerPassives.confused + ")";
			multAil=true;
		}
		$("#playerAilments").html(tempStat);
	
	}
	
	//taunted
	if (allPlayers[whoIsActive].playerPassives.taunted>0) {
	
		if (multAil==true) {
		
			tempStat+=", Taunted (" + allPlayers[whoIsActive].playerPassives.taunted + ")";
		}
	
		else if(multAil==false) {
			tempStat+="Taunted (" + allPlayers[whoIsActive].playerPassives.taunted + ")";
			multAil=true;
		}
		$("#playerAilments").html(tempStat);
	
	}
	
	//paralyzed
	if (allPlayers[whoIsActive].playerPassives.paralyzed>0) {
	
		if (multAil==true) {
		
			tempStat+=", Paralyzed (" + allPlayers[whoIsActive].playerPassives.paralyzed + ")";
		}
	
		else if(multAil==false) {
			tempStat+="Paralyzed (" + allPlayers[whoIsActive].playerPassives.paralyzed + ")";
			multAil=true;
		}
		$("#playerAilments").html(tempStat);
	
	}
	
	//hallucin
	if (allPlayers[whoIsActive].playerPassives.hallucin>0) {
	
		if (multAil==true) {
		
			tempStat+=", Hallucin (" + allPlayers[whoIsActive].playerPassives.hallucin + ")";
		}
	
		else if(multAil==false) {
			tempStat+="Hallucin (" + allPlayers[whoIsActive].playerPassives.hallucin + ")";
			multAil=true;
		}
		$("#playerAilments").html(tempStat);
	
	}

}

function updatePassives () {


	if (allPlayers[whoIsActive].playerPassives.coldResist==true || allPlayers[whoIsActive].playerPassives.coldResist>0 || allPlayers[whoIsActive].playerPassives.coldResist=="immune") {
			
		$("#coldResist").prop('checked', true);
		$("#coldResist").checkboxradio('refresh');
		
	}
	if (allPlayers[whoIsActive].playerPassives.coldResist==false || allPlayers[whoIsActive].playerPassives.coldResist==0) {
		
		$("#coldResist").prop('checked', false);
		$("#coldResist").checkboxradio('refresh');
		
	}
	
	if (allPlayers[whoIsActive].playerPassives.coldResist!="immune") {
	
		$("#coldResist1").prop('checked', false);
		$("#coldResist1").checkboxradio('refresh');
		
	}
	
	if (allPlayers[whoIsActive].playerPassives.coldResist!="immune") {
	
		$("#coldResist1").prop('checked', true);
		$("#coldResist1").checkboxradio('refresh');
		
	}

}

$("#player1NameEntry").keyup(function(event) {


	var nameEnter = document.getElementById("player1NameEntry").value;

	
    if (event.keyCode === 13 && nameEnter!="") {
	
		
	
		//var nameStyle ="<h2>";
	
		//var nameEnter = document.getElementById("player1NameEntry").value;
	
        $("#player1NameEntry").click();
		
		
		
    
        $('#playerTabs ul:first li:eq('+whoIsActive+') a').text(nameEnter);
		
		//nameStyle += nameEnter;
		
		//nameStyle += ", the asdf asdf</h2>";
		
		allPlayers[whoIsActive].playerName=nameEnter;
		
		allPlayers[whoIsActive].hasName=true;
		
		updatePlayer();
		
		//if (allPlayers[whoIsActive].hasTitle==true)
			//$('#playerTitle').html(playerName);
		
		//player1Title.innerText = nameEnter;
		
		this.value=''; //empties text entry on enter
		
		
		
		//$(".head h3").html("your new header");
    }
	
	
	
});

 $("#makeLeaderBut").button().click(function(){
 
	//clear leader from all
	for (i=0;i<playersMax;i++) {
	
		if (allPlayers[i].playerExists==true) {
	
			allPlayers[i].isLeader=false;
			allPlayers[i].obj4="";
		
		}
	}

	if (allPlayers[lockActive].playerExists==true) {
	
		var objLength;
		var objRoll;

		allPlayers[lockActive].isLeader=true;
		
		objLength=leaderObjectives.length;
		objLength--;
		
		objRoll=rollDie0(objLength, 1);
		
		allPlayers[lockActive].obj4=Object.assign({}, leaderObjectives[objRoll]);
	}	
	
	makeLeaderObjective();
	
	updatePlayer();

});

function makeLeaderObjective() {

	var floorLevel;
	var goalRoll=0; //for floor/level
	var goalRollAm=0; //amount
	var goalFloorLevel=rollDie(2,1,2);
	
	
	goalRoll=rollDie(2,1);
	
	if (goalRoll==1) {
	
		floorLevel=" the party reaches floor " + goalFloorLevel;
	}
	
	if (goalRoll==2) {
	
		floorLevel=" your character is level " + goalFloorLevel;
	}
	
	
	
	allPlayers[lockActive].obj4.goal+=floorLevel;

}


/*$(document).ready(function changePlayerButtonText() {

	//var asdf=playerTest.test1;
	
	//var asdf=playerStuff.strength;
	
	//var asdf=1;
	
    //$("#tabs").tabs();
    
    $("#initPlayerBut").button().click(function(){
	
		//var asdf=rollDie(100, 1);
        //$('#tabs ul:first li:eq(0) a').text(asdf);
		
		var tempStat;
		
		tempStat="HP: " + allPlayers[whoIsActive].hpCurr;
		tempStat+=" / " + allPlayers[whoIsActive].hpMax;
		$('#playerHP').html(tempStat);
		
		tempStat="Energy: " + allPlayers[whoIsActive].energyCurr;
		tempStat+=" / " + allPlayers[whoIsActive].energyMax;
		$('#playerEnergy').html(tempStat);
		
		tempStat="Strength: " + allPlayers[whoIsActive].strength;
		$('#playerStr').html(tempStat);
		
		tempStat="Dexterity: " + allPlayers[whoIsActive].dexterity;
		$('#playerDex').html(tempStat);
		
		tempStat="Intelligence: " + allPlayers[whoIsActive].intelligence;
		$('#playerInt').html(tempStat);
		
		tempStat="Wisdom: " + allPlayers[whoIsActive].wisdom;
		$('#playerWis').html(tempStat);
		
		tempStat="Constitution: " + allPlayers[whoIsActive].constitution;
		$('#playerCon').html(tempStat);
    });
});*/

/*function myFunction() {
    var x = document.getElementById("myText").value;
    document.getElementById("demo").innerHTML = x;
}*/
/*$(function player1Name1() {

	$("#tabsa-1").hide();
	var status="asdf";
    $("#tabsa-1").document.getElementById('player1But').innerHTML=status;

});*/


/*function tileTest() {

	var tempStr;
	
	var tempA=300;
	var tempB=300;
	
	var tile=0;
	
	tempA=roomGridArr[tile].a;
	tempB=roomGridArr[tile].b;
	
	tempStr= tempA + ", " + tempB;

	alert(tempStr);

}*/


</script>




<br><br>
<div id="dungeonTabs">
	<h2>Dungeon</h2>
	<h3><div id="turnCount">Turn: </div></h3>
  <ul>
    <li><a href="#dungeonTabs-1">Floors</a></li>
    <li><a href="#dungeonTabs-2">Room</a></li>
	<li><a href="#dungeonTabs-3">Item ID</a></li>
  </ul>
  <div id="dungeonTabs-1">
	<div class="floorGrid">

			<h3 id="floorLab">Floor 1</h3>
			<div class="floorButCont"><button id="createFloorBut" class="createFloor">Create Floor</button><button id="saveFloorBut" class="createFloor">Save Floor</button><button id="floorDecBut">-</button><button id="floorIncBut">+</button></div>
			<br><br>


					<div class="floorContainer">
						<button id="floor0">█</button>
						<button id="floor1">█</button>
						<button id="floor2">█</button>
						<button id="floor3">█</button>
						<button id="floor4">█</button>
						<button id="floor5">█</button>
						<button id="floor6">█</button>
						<button id="floor7">█</button>
						<button id="floor8">█</button>
						<button id="floor9">█</button>
						<button id="floor10">█</button>
						<button id="floor11">█</button>
						<button id="floor12">█</button>
						<button id="floor13">█</button>
						<button id="floor14">█</button>
						<button id="floor15">█</button>
						<button id="floor16">█</button>
						<button id="floor17">█</button>
						<button id="floor18">█</button>
						<button id="floor19">█</button>
					</div>
		
					<br>Edit Floor Tile:<br><br>
					<div class="floorEdit">
						<div class="floorEditGrid1">
						<button class="floorEditBut" id="editFloor1">║</button>
						<button class="floorEditBut" id="editFloor2">═</button>
						<button class="floorEditBut" id="editFloor3">╗</button>
						<button class="floorEditBut" id="editFloor4">╔</button>
						<button class="floorEditBut" id="editFloor5">╚</button>
						<button class="floorEditBut" id="editFloor6">╝</button>
						<button class="floorEditBut" id="editFloor7">╦</button>
						<button class="floorEditBut" id="editFloor8">╩</button>
						<button class="floorEditBut" id="editFloor9">╠</button>
						<button class="floorEditBut" id="editFloor10">╣</button>
						<button class="floorEditBut" id="editFloor11">╬</button>
						<button class="floorEditBut" id="editFloor12">█</button>
						</div>
					<br>
						<div class="floorEditGrid2">
						<button id="editFloor13">↑<br>■</button>
						<button id="editFloor14">■<br>↓</button>
						<button id="editFloor15">←■</button>
						<button id="editFloor16">■→</button>
						<button id="editFloor17">↑<br>■<br>↓</button>
						<button id="editFloor18">←■→</button>
						<button id="editFloor19">↑<br>■→</button>
						<button id="editFloor20">↑<br>←■</button>
						<button id="editFloor21">■→<br>↓</button>
						<button id="editFloor22">←■<br>↓</button>
						<button id="editFloor23">↑<br>←■→</button>
						<button id="editFloor24">↑<br>■→<br>↓</button>
						<button id="editFloor25">←■→<br>↓</button>
						<button id="editFloor26">↑<br>←■<br>↓</button>
						<button id="editFloor27">↑<br>←■→<br>↓</button>
						</div>
					</div>
			
		</div>
	</div>
	<div id="dungeonTabs-2">
	
		<div class="roomGridClass">
			<button id="createRoomBut">Recreate Room</button>
			<br><br>
			Movement:
			<br>
			<div class="movementGrid">
				<button id="moveNW">NW</button>
				<button id="moveN">↑</button>
				<button id="moveNE">NE</button>
				<button id="moveW">←</button>
				<button >+</button>
				<button id="moveE">→</button>
				<button id="moveSW">SW</button>
				<button id="moveS">↓</button>
				<button id="moveSE">SE</button>
		
			</div>
			<br>
			<div class="controlgroup">
				<div class="menu-container">
					<div class="roomContainer">
						<button id="roomTile0"> </button>
						<button id="roomTile1"> </button>
						<button id="roomTile2"> </button>
						<button id="roomTile3"> </button>
						<button id="roomTile4"> </button>
						<button id="roomTile5"> </button>
						<button id="roomTile6"> </button>
						<button id="roomTile7"> </button>
						<button id="roomTile8"> </button>
						<button id="roomTile9"> </button>
						<button id="roomTile10"> </button>
						<button id="roomTile11"> </button>
						<button id="roomTile12"> </button>
						<button id="roomTile13"> </button>
						<button id="roomTile14"> </button>
						<button id="roomTile15"> </button>
						<button id="roomTile16"> </button>
						<button id="roomTile17"> </button>
						<button id="roomTile18"> </button>
						<button id="roomTile19"> </button>
						<button id="roomTile20"> </button>
						<button id="roomTile21"> </button>
						<button id="roomTile22"> </button>
						<button id="roomTile23"> </button>
						<button id="roomTile24"> </button>
						<button id="roomTile25"> </button>
						<button id="roomTile26"> </button>
						<button id="roomTile27"> </button>
						<button id="roomTile28"> </button>
						<button id="roomTile29"> </button>
						<button id="roomTile30"> </button>
						<button id="roomTile31"> </button>
						<button id="roomTile32"> </button>
						<button id="roomTile33"> </button>
						<button id="roomTile34"> </button>
						<button id="roomTile35"> </button>
						<button id="roomTile36"> </button>
						<button id="roomTile37"> </button>
						<button id="roomTile38"> </button>
						<button id="roomTile39"> </button>
						<button id="roomTile40"> </button>
						<button id="roomTile41"> </button>
						<button id="roomTile42"> </button>
						<button id="roomTile43"> </button>
						<button id="roomTile44"> </button>
						<button id="roomTile45"> </button>
						<button id="roomTile46"> </button>
						<button id="roomTile47"> </button>
						<button id="roomTile48"> </button>
						<button id="roomTile49"> </button>
						<button id="roomTile50"> </button>
						<button id="roomTile51"> </button>
						<button id="roomTile52"> </button>
						<button id="roomTile53"> </button>
						<button id="roomTile54"> </button>
						<button id="roomTile55"> </button>
						<button id="roomTile56"> </button>
						<button id="roomTile57"> </button>
						<button id="roomTile58"> </button>
						<button id="roomTile59"> </button>
						<button id="roomTile60"> </button>
						<button id="roomTile61"> </button>
						<button id="roomTile62"> </button>
						<button id="roomTile63"> </button>
						<button id="roomTile64"> </button>
						<button id="roomTile65"> </button>
						<button id="roomTile66"> </button>
						<button id="roomTile67"> </button>
						<button id="roomTile68"> </button>
						<button id="roomTile69"> </button>
						<button id="roomTile70"> </button>
						<button id="roomTile71"> </button>
						<button id="roomTile72"> </button>
						<button id="roomTile73"> </button>
						<button id="roomTile74"> </button>
						<button id="roomTile75"> </button>
						<button id="roomTile76"> </button>
						<button id="roomTile77"> </button>
						<button id="roomTile78"> </button>
						<button id="roomTile79"> </button>
						<button id="roomTile80"> </button>
						<button id="roomTile81"> </button>
						<button id="roomTile82"> </button>
						<button id="roomTile83"> </button>
						<button id="roomTile84"> </button>
						<button id="roomTile85"> </button>
						<button id="roomTile86"> </button>
						<button id="roomTile87"> </button>
						<button id="roomTile88"> </button>
						<button id="roomTile89"> </button>
						<button id="roomTile90"> </button>
						<button id="roomTile91"> </button>
						<button id="roomTile92"> </button>
						<button id="roomTile93"> </button>
						<button id="roomTile94"> </button>
						<button id="roomTile95"> </button>
						<button id="roomTile96"> </button>
						<button id="roomTile97"> </button>
						<button id="roomTile98"> </button>
						<button id="roomTile99"> </button>
						<button id="roomTile100"> </button>
						<button id="roomTile101"> </button>
						<button id="roomTile102"> </button>
						<button id="roomTile103"> </button>
						<button id="roomTile104"> </button>
						<button id="roomTile105"> </button>
						<button id="roomTile106"> </button>
						<button id="roomTile107"> </button>
						<button id="roomTile108"> </button>
						<button id="roomTile109"> </button>
						<button id="roomTile110"> </button>
						<button id="roomTile111"> </button>
						<button id="roomTile112"> </button>
						<button id="roomTile113"> </button>
						<button id="roomTile114"> </button>
						<button id="roomTile115"> </button>
						<button id="roomTile116"> </button>
						<button id="roomTile117"> </button>
						<button id="roomTile118"> </button>
						<button id="roomTile119"> </button>
						<button id="roomTile120"> </button>
						<button id="roomTile121"> </button>
						<button id="roomTile122"> </button>
						<button id="roomTile123"> </button>
						<button id="roomTile124"> </button>
						<button id="roomTile125"> </button>
						<button id="roomTile126"> </button>
						<button id="roomTile127"> </button>
						<button id="roomTile128"> </button>
						<button id="roomTile129"> </button>
						<button id="roomTile130"> </button>
						<button id="roomTile131"> </button>
						<button id="roomTile132"> </button>
						<button id="roomTile133"> </button>
						<button id="roomTile134"> </button>
						<button id="roomTile135"> </button>
						<button id="roomTile136"> </button>
						<button id="roomTile137"> </button>
						<button id="roomTile138"> </button>
						<button id="roomTile139"> </button>
						<button id="roomTile140"> </button>
						<button id="roomTile141"> </button>
						<button id="roomTile142"> </button>
						<button id="roomTile143"> </button>
						<button id="roomTile144"> </button>
						<button id="roomTile145"> </button>
						<button id="roomTile146"> </button>
						<button id="roomTile147"> </button>
						<button id="roomTile148"> </button>
						<button id="roomTile149"> </button>
						<button id="roomTile150"> </button>
						<button id="roomTile151"> </button>
						<button id="roomTile152"> </button>
						<button id="roomTile153"> </button>
						<button id="roomTile154"> </button>
						<button id="roomTile155"> </button>
						<button id="roomTile156"> </button>
						<button id="roomTile157"> </button>
						<button id="roomTile158"> </button>
						<button id="roomTile159"> </button>
						<button id="roomTile160"> </button>
						<button id="roomTile161"> </button>
						<button id="roomTile162"> </button>
						<button id="roomTile163"> </button>
						<button id="roomTile164"> </button>
						<button id="roomTile165"> </button>
						<button id="roomTile166"> </button>
						<button id="roomTile167"> </button>
						<button id="roomTile168"> </button>
						<button id="roomTile169"> </button>
						<button id="roomTile170"> </button>
						<button id="roomTile171"> </button>
						<button id="roomTile172"> </button>
						<button id="roomTile173"> </button>
						<button id="roomTile174"> </button>
						<button id="roomTile175"> </button>
						<button id="roomTile176"> </button>
						<button id="roomTile177"> </button>
						<button id="roomTile178"> </button>
						<button id="roomTile179"> </button>
						<button id="roomTile180"> </button>
						<button id="roomTile181"> </button>
						<button id="roomTile182"> </button>
						<button id="roomTile183"> </button>
						<button id="roomTile184"> </button>
						<button id="roomTile185"> </button>
						<button id="roomTile186"> </button>
						<button id="roomTile187"> </button>
						<button id="roomTile188"> </button>
						<button id="roomTile189"> </button>
						<button id="roomTile190"> </button>
						<button id="roomTile191"> </button>
						<button id="roomTile192"> </button>
						<button id="roomTile193"> </button>
						<button id="roomTile194"> </button>
						<button id="roomTile195"> </button>
						<button id="roomTile196"> </button>
						<button id="roomTile197"> </button>
						<button id="roomTile198"> </button>
						<button id="roomTile199"> </button>
						<button id="roomTile200"> </button>
						<button id="roomTile201"> </button>
						<button id="roomTile202"> </button>
						<button id="roomTile203"> </button>
						<button id="roomTile204"> </button>
						<button id="roomTile205"> </button>
						<button id="roomTile206"> </button>
						<button id="roomTile207"> </button>
						<button id="roomTile208"> </button>
						<button id="roomTile209"> </button>
						<button id="roomTile210"> </button>
						<button id="roomTile211"> </button>
						<button id="roomTile212"> </button>
						<button id="roomTile213"> </button>
						<button id="roomTile214"> </button>
						<button id="roomTile215"> </button>
						<button id="roomTile216"> </button>
						<button id="roomTile217"> </button>
						<button id="roomTile218"> </button>
						<button id="roomTile219"> </button>
						<button id="roomTile220"> </button>
						<button id="roomTile221"> </button>
						<button id="roomTile222"> </button>
						<button id="roomTile223"> </button>
						<button id="roomTile224"> </button>
						<button id="roomTile225"> </button>
						<button id="roomTile226"> </button>
						<button id="roomTile227"> </button>
						<button id="roomTile228"> </button>
						<button id="roomTile229"> </button>
						<button id="roomTile230"> </button>
						<button id="roomTile231"> </button>
						<button id="roomTile232"> </button>
						<button id="roomTile233"> </button>
						<button id="roomTile234"> </button>
						<button id="roomTile235"> </button>
						<button id="roomTile236"> </button>
						<button id="roomTile237"> </button>
						<button id="roomTile238"> </button>
						<button id="roomTile239"> </button>
						<button id="roomTile240"> </button>
						<button id="roomTile241"> </button>
						<button id="roomTile242"> </button>
						<button id="roomTile243"> </button>
						<button id="roomTile244"> </button>
						<button id="roomTile245"> </button>
						<button id="roomTile246"> </button>
						<button id="roomTile247"> </button>
						<button id="roomTile248"> </button>
						<button id="roomTile249"> </button>
						<button id="roomTile250"> </button>
						<button id="roomTile251"> </button>
						<button id="roomTile252"> </button>
						<button id="roomTile253"> </button>
						<button id="roomTile254"> </button>
						<button id="roomTile255"></button>
					</div>
					<br>
					Entering from:
					<br>
					<div class="enterFromGrid">
						<button></button>
						<button id="enterN">↓</button>
						<button></button>
						<button id="enterW">→</button>
						<button id="enterA">+</button>
						<button id="enterE">←</button>
						<button></button>
						<button id="enterS">↑</button>
						<button></button>
					</div>
					<br>
					<div id="roomStuffTabs">
					  <ul>
						<li><a href="#roomStuffTabs-1">Monsters</a></li>
						<li><a href="#roomStuffTabs-2">Items</a></li>
						<li><a href="#roomStuffTabs-3">Traps</a></li>
					  </ul>
					  <div id="roomStuffTabs-1">
					  <!-- Monsters -->
						<div id="monsterTabs">
						  <ul>
							<li><a href="#monsterTabs-1">Monster 1</a></li>
							<li><a href="#monsterTabs-2">Monster 2</a></li>
							<li><a href="#monsterTabs-3">Monster 3</a></li>
							<li><a href="#monsterTabs-4">Monster 4</a></li>
							<li><a href="#monsterTabs-5">Monster 5</a></li>
							<li><a href="#monsterTabs-6">Monster 6</a></li>
							<li><a href="#monsterTabs-7">Monster 7</a></li>
							<li><a href="#monsterTabs-8">Monster 8</a></li>
							<li><a href="#monsterTabs-9">Monster 9</a></li>
							<li><a href="#monsterTabs-10">Monster 10</a></li>
						  </ul>
						  <br>
						  <h3 id="monstHasMoved"></h3>
						  <br>
						  <button id="clearMonstBut">Clear</button>
						  <br><br>
						  <fieldset>
							<div class="monstStatsGrid">
								<label for="monstStatEditRadio1">Current</label>
								<input type="radio" name="monstStatEditRadio" id="monstStatEditRadio1">
								<label for="monstStatEditRadio2">Max</label>
								<input type="radio" name="monstStatEditRadio" id="monstStatEditRadio2">
								<p id="monstHP">HP:</p><input type="spinner" id="monstSpinhp" style="width: 50px">
								<p id="monstEnergy">Energy:</p><input type="spinner" id="monstSpinenergy" style="width: 50px">
								<p id="monstAC">AC:</p><input type="spinner" id="monstSpinAC" style="width: 50px">
								<p id="monstTurnAct">Actions this turn:</p><br>
								<p>To Hit:</p><br>
								<p id="monstIndex">Index:</p><br>
								<p id="monstAil">Ailments:</p><br>
							</div>
						</fieldset>
						  <div id="monsterTabs-1">
							
						  </div>
						  <div id="monsterTabs-2">
							
						  </div>
						  <div id="monsterTabs-3">
							
							
						  </div>
						  <div id="monsterTabs-4">
							
						  </div>
						  <div id="monsterTabs-5">
							
						  </div>
						  <div id="monsterTabs-6">
							
							
						  </div>
						  <div id="monsterTabs-7">
							
						  </div>
						  <div id="monsterTabs-8">
							
						  </div>
						  <div id="monsterTabs-9">
							
							
						  </div>
						  <div id="monsterTabs-10">
							
							
						  </div>
						</div>
						
					  </div>
					  
					  <!-- Items -->
					  <div id="roomStuffTabs-2">
					  		<div id="roomItemsTabs">
								<ul>
									<li><a href="#roomItemsTabs-1">Item 1</a></li>
									<li><a href="#roomItemsTabs-2">Item 2</a></li>
									<li><a href="#roomItemsTabs-3">Item 3</a></li>
									<li><a href="#roomItemsTabs-4">Item 4</a></li>
									<li><a href="#roomItemsTabs-5">Item 5</a></li>
									<li><a href="#roomItemsTabs-6">Item 6</a></li>
									<li><a href="#roomItemsTabs-7">Item 7</a></li>
									<li><a href="#roomItemsTabs-8">Item 8</a></li>
									<li><a href="#roomItemsTabs-9">Item 9</a></li>
									<li><a href="#roomItemsTabs-10">Item 10</a></li>
								 </ul>
								 <br>
								 <h2 id="roomItemName"></h2>
								 <button id="clearItemBut">Clear Item</button>
								 <br>
								 <p id="roomItemIndex">Index: </p>
								 <div id="roomItemsTabs-1">
									<p> </p>
								 </div>
								 <div id="roomItemsTabs-2">
									<p> </p>
								 </div>
								 <div id="roomItemsTabs-3">
									<p> </p>
								 </div>
								 <div id="roomItemsTabs-4">
									<p> </p>
								 </div>
								 <div id="roomItemsTabs-5">
									<p> </p>
								 </div>
								 <div id="roomItemsTabs-6">
									<p> </p>
								 </div>
								 <div id="roomItemsTabs-7">
									<p> </p>
								 </div>
								 <div id="roomItemsTabs-8">
									<p> </p>
								 </div>
								 <div id="roomItemsTabs-9">
									<p> </p>
								 </div>
								 <div id="roomItemsTabs-10">
									<p> </p>
								 </div>
							</div>
					  </div>
					  
					  <!-- Traps -->
					  <div id="roomStuffTabs-3">
						
						<div id="trapsTabs">
								<ul>
									<li><a href="#trapsTabs-1">Trap 1</a></li>
									<li><a href="#trapsTabs-2">Trap 2</a></li>
									<li><a href="#trapsTabs-3">Trap 3</a></li>
									<li><a href="#trapsTabs-4">Trap 4</a></li>
									<li><a href="#trapsTabs-5">Trap 5</a></li>
									<li><a href="#trapsTabs-6">Trap 6</a></li>
									<li><a href="#trapsTabs-7">Trap 7</a></li>
									<li><a href="#trapsTabs-8">Trap 8</a></li>
									<li><a href="#trapsTabs-9">Trap 9</a></li>
									<li><a href="#trapsTabs-10">Trap 10</a></li>
								 </ul>
								 <br>
								 <button id="clearTrapBut">Clear Trap</button>
								 <br>
								 <p id="trapIndex">Index: </p>
								 <div id="trapsTabs-1">
									<p> </p>
								 </div>
								 <div id="trapsTabs-2">
									<p> </p>
								 </div>
								 <div id="trapsTabs-3">
									<p> </p>
								 </div>
								 <div id="trapsTabs-4">
									<p> </p>
								 </div>
								 <div id="trapsTabs-5">
									<p> </p>
								 </div>
								 <div id="trapsTabs-6">
									<p> </p>
								 </div>
								 <div id="trapsTabs-7">
									<p> </p>
								 </div>
								 <div id="trapsTabs-8">
									<p> </p>
								 </div>
								 <div id="trapsTabs-9">
									<p> </p>
								 </div>
								 <div id="trapsTabs-10">
									<p> </p>
								 </div>
							</div>
						
						
					  </div>
					</div>
				</div>
			</div>
		</div>
  
	</div>
	
	<div id="dungeonTabs-3">
		<div id="itemTabs">
			<ul>
				<li><a href="#itemTabs-1">Identified</a></li>
				<li><a href="#itemTabs-2">Scrolls</a></li>
				<li><a href="#itemTabs-3">Spellbooks</a></li>
				<li><a href="#itemTabs-4">Potions</a></li>
				<li><a href="#itemTabs-5">Robes</a></li>
				<li><a href="#itemTabs-6">Shoes</a></li>
				<li><a href="#itemTabs-7">Gloves</a></li>
				<li><a href="#itemTabs-8">Rings</a></li>
				<li><a href="#itemTabs-9">Amulets</a></li>
				<li><a href="#itemTabs-10">Wands</a></li>
			 </ul>
			 <div id="itemTabs-1">
				<p id="identified"> </p>
			 </div>
			 <div id="itemTabs-2">
				<p id="scrolls"> </p>
			 </div>
			 <div id="itemTabs-3">
				<p id="spellbooks"> </p>
			 </div>
			 <div id="itemTabs-4">
				<p id="potions"> </p>
			 </div>
			 <div id="itemTabs-5">
				<p id="robes"> </p>
			 </div>
			 <div id="itemTabs-6">
				<p id="shoes"> </p>
			 </div>
			 <div id="itemTabs-7">
				<p id="gloves"> </p>
			 </div>
			 <div id="itemTabs-8">
				<p id="rings"> </p>
			 </div>
			 <div id="itemTabs-9">
				<p id="amulets"> </p>
			 </div>
			 <div id="itemTabs-10">
				<p id="wands"> </p>
			 </div>
		</div>
	</div>
</div>

<script>
$("div.movementGrid").find("button").click(function( event ) {

	var butId=this.id;
	var destTileInd; //for checking destination tile
	var destTileTemp; //for comparison
	var destTilePlayer;
	var destTileMonst;
	var destTileWall;
	var tempPlayInd; //setting destination tile of player
	
	
	hideVision();
	
	if (butId=="moveN") {
	
		destTileInd=roomTileIndex;
		destTileInd-=roomMaxLength;
		
		//check if not occupied by another being or wall
		for (i=0;i<playersMax;i++) {
			
			if (allPlayers[i].playerExists==true) {
			
				if (allPlayers[i].index==destTileInd) {
				
					destTilePlayer=true;
				}
				
			}
				
		}
		
		for (i=0;i<allRooms[currRoomIndex].roomMonsters.length;i++) {
			
			if (allRooms[currRoomIndex].roomMonsters[i].monsterExists==true) {
			
				if (allRooms[currRoomIndex].roomMonsters[i].index==destTileInd) {
				
					destTileMonst=true;
				}
				
			}
				
		}
		
		destTileTemp=$("#roomTile"+destTileInd).html();
		
		if (destTileTemp=="─" || destTileTemp=="│" || destTileTemp=="┐" || destTileTemp=="└" || destTileTemp=="┘" || destTileTemp=="┌" || destTileTemp=="+" || destTileTemp=="@") {
		
			destTileWall=true;
		}
		
		if (destTilePlayer!=true && destTileMonst!=true && destTileWall!=true) {
	
			//check if active monster or player matches current room tile (or item?)
			
			if (allPlayers[whoIsActive].playerExists==true || allRooms[currRoomIndex].roomMonsters[monstActive].monsterExists==true) {
			
				if (allPlayers[whoIsActive].index==roomTileIndex) {
				
					$("#roomTile"+allPlayers[whoIsActive].index).css("background", tileDefColor);
					
					//if not standing on item
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==false) {
						$("#roomTile"+allPlayers[whoIsActive].index).html("");
					}
					
					//currently standing on item
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==true) {
						$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol);
					}
					
					//currently standing on trap
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasTrap==true) {
						$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].trapSymbol);
						$("#roomTile"+allPlayers[whoIsActive].index).css("background", visionColor);
					}
					
					//previous tile no longer has a being on it
					allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=false;
				
					allPlayers[whoIsActive].index-=roomMaxLength;
					roomTileIndex=allPlayers[whoIsActive].index;
					
					$("#roomTile"+roomTileIndex).css("background", butSelColor);
					
					//current tile has a being on it
					allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=true;
					
					tempPlayInd=whoIsActive;
					tempPlayInd++;
					$("#roomTile"+allPlayers[whoIsActive].index).html("P"+tempPlayInd);
				} //player
				
				if (allRooms[currRoomIndex].roomMonsters.length>0) {
				
					if (allRooms[currRoomIndex].roomMonsters[monstActive].index==roomTileIndex) {
					
						$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).css("background", tileDefColor);
						
						//if not standing on item
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==false) {
							$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html("");
						}
						
						//currently standing on item
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==true) {
							$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol);
						}
						
						//currently standing on trap
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasTrap==true) {
							$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].trapSymbol);
							$("#roomTile"+allPlayers[whoIsActive].index).css("background", visionColor);
						}
					
						//previous tile no longer has a being on it
						allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=false;
					
						allRooms[currRoomIndex].roomMonsters[monstActive].index-=roomMaxLength;
						roomTileIndex=allRooms[currRoomIndex].roomMonsters[monstActive].index;
						
						$("#roomTile"+roomTileIndex).css("background", butSelColor);
						$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomMonsters[monstActive].monstSymbol);
						
						//current tile has a being on it
						allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=true;
					
						allRooms[currRoomIndex].roomMonsters[monstActive].moved=true;
					
					} //monster
				
				} //room has monsters
			
			} //exists
			
		} //not occupied/wall
		
	} //north
	
	if (butId=="moveW") {
	
		destTileInd=roomTileIndex;
		destTileInd--;
		
		//check if not occupied by another being or wall
		for (i=0;i<playersMax;i++) {
			
			if (allPlayers[i].playerExists==true) {
			
				if (allPlayers[i].index==destTileInd) {
				
					destTilePlayer=true;
				}
				
			}
				
		}
		
		for (i=0;i<allRooms[currRoomIndex].roomMonsters.length;i++) {
			
			if (allRooms[currRoomIndex].roomMonsters[i].monsterExists==true) {
			
				if (allRooms[currRoomIndex].roomMonsters[i].index==destTileInd) {
				
					destTileMonst=true;
				}
				
			}
				
		}
		
		destTileTemp=$("#roomTile"+destTileInd).html();
		
		if (destTileTemp=="─" || destTileTemp=="│" || destTileTemp=="┐" || destTileTemp=="└" || destTileTemp=="┘" || destTileTemp=="┌" || destTileTemp=="+" || destTileTemp=="@") {
		
			destTileWall=true;
		}
		
		if (destTilePlayer!=true && destTileMonst!=true && destTileWall!=true) {
	
			//check if active monster or player matches current room tile (or item?)
			
			if (allPlayers[whoIsActive].playerExists==true || allRooms[currRoomIndex].roomMonsters[monstActive].monsterExists==true) {
			
				if (allPlayers[whoIsActive].index==roomTileIndex) {
				
					$("#roomTile"+allPlayers[whoIsActive].index).css("background", tileDefColor);
					
					//if not standing on item
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==false) {
						$("#roomTile"+allPlayers[whoIsActive].index).html("");
					}
					
					//currently standing on item
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==true) {
						$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol);
						
					}
					
					//currently standing on trap
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasTrap==true) {
						$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].trapSymbol);
						$("#roomTile"+allPlayers[whoIsActive].index).css("background", visionColor);
					}
					
					//previous tile no longer has a being on it
					allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=false;
				
					allPlayers[whoIsActive].index--;
					roomTileIndex=allPlayers[whoIsActive].index;
					
					$("#roomTile"+roomTileIndex).css("background", butSelColor);
					
					//current tile has a being on it
					allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=true;
					
					tempPlayInd=whoIsActive;
					tempPlayInd++;
					$("#roomTile"+allPlayers[whoIsActive].index).html("P"+tempPlayInd);
				} //player
				
				if (allRooms[currRoomIndex].roomMonsters.length>0) {
				
					if (allRooms[currRoomIndex].roomMonsters[monstActive].index==roomTileIndex) {
					
						$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).css("background", tileDefColor);
						
						//if not standing on item
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==false) {
							$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html("");
						}
						
						//currently standing on item
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==true) {
							$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol);
						}
						
						//currently standing on trap
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasTrap==true) {
							$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].trapSymbol);
							$("#roomTile"+allPlayers[whoIsActive].index).css("background", visionColor);
						}
					
						//previous tile no longer has a being on it
						allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=false;
					
						allRooms[currRoomIndex].roomMonsters[monstActive].index--;
						roomTileIndex=allRooms[currRoomIndex].roomMonsters[monstActive].index;
						
						$("#roomTile"+roomTileIndex).css("background", butSelColor);
						$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomMonsters[monstActive].monstSymbol);
						
						//current tile has a being on it
						allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=true;
					
						allRooms[currRoomIndex].roomMonsters[monstActive].moved=true;
					
					} //monster
				
				} //room has monsters
			
			} //exists
			
		} //not occupied/wall
		
	} //west
	
	if (butId=="moveE") {
	
		destTileInd=roomTileIndex;
		destTileInd++;
		
		//check if not occupied by another being or wall
		for (i=0;i<playersMax;i++) {
			
			if (allPlayers[i].playerExists==true) {
			
				if (allPlayers[i].index==destTileInd) {
				
					destTilePlayer=true;
				}
				
			}
				
		}
		
		for (i=0;i<allRooms[currRoomIndex].roomMonsters.length;i++) {
			
			if (allRooms[currRoomIndex].roomMonsters[i].monsterExists==true) {
			
				if (allRooms[currRoomIndex].roomMonsters[i].index==destTileInd) {
				
					destTileMonst=true;
				}
				
			}
				
		}
		
		destTileTemp=$("#roomTile"+destTileInd).html();
		
		if (destTileTemp=="─" || destTileTemp=="│" || destTileTemp=="┐" || destTileTemp=="└" || destTileTemp=="┘" || destTileTemp=="┌" || destTileTemp=="+" || destTileTemp=="@") {
		
			destTileWall=true;
		}
		
		if (destTilePlayer!=true && destTileMonst!=true && destTileWall!=true) {
	
			//check if active monster or player matches current room tile (or item?)
			
			if (allPlayers[whoIsActive].playerExists==true || allRooms[currRoomIndex].roomMonsters[monstActive].monsterExists==true) {
			
				if (allPlayers[whoIsActive].index==roomTileIndex) {
				
					$("#roomTile"+allPlayers[whoIsActive].index).css("background", tileDefColor);
					
					//if not standing on item
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==false) {
						$("#roomTile"+allPlayers[whoIsActive].index).html("");
					}
					
					//currently standing on item
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==true) {
						$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol);
					}
					
					//currently standing on trap
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasTrap==true) {
						$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].trapSymbol);
						$("#roomTile"+allPlayers[whoIsActive].index).css("background", visionColor);
					}
					
					//previous tile no longer has a being on it
					allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=false;
				
					allPlayers[whoIsActive].index++;
					roomTileIndex=allPlayers[whoIsActive].index;
					
					$("#roomTile"+roomTileIndex).css("background", butSelColor);
					
					//current tile has a being on it
					allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=true;
					
					tempPlayInd=whoIsActive;
					tempPlayInd++;
					$("#roomTile"+allPlayers[whoIsActive].index).html("P"+tempPlayInd);
				} //player
				
				if (allRooms[currRoomIndex].roomMonsters.length>0) {
				
					if (allRooms[currRoomIndex].roomMonsters[monstActive].index==roomTileIndex) {
					
						$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).css("background", tileDefColor);
						
						//if not standing on item
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==false) {
							$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html("");
						}
						
						//currently standing on item
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==true) {
							$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol);
						}
					
						//previous tile no longer has a being on it
						allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=false;
					
						allRooms[currRoomIndex].roomMonsters[monstActive].index++;
						roomTileIndex=allRooms[currRoomIndex].roomMonsters[monstActive].index;
						
						$("#roomTile"+roomTileIndex).css("background", butSelColor);
						$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomMonsters[monstActive].monstSymbol);
						
						//current tile has a being on it
						allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=true;
					
						allRooms[currRoomIndex].roomMonsters[monstActive].moved=true;
					
					} //monster
				
				} //room has monsters
			
			} //exists
			
		} //not occupied/wall
		
	} //east
	
	if (butId=="moveS") {
	
		destTileInd=roomTileIndex;
		destTileInd+=roomMaxLength;
		
		//check if not occupied by another being or wall
		for (i=0;i<playersMax;i++) {
			
			if (allPlayers[i].playerExists==true) {
			
				if (allPlayers[i].index==destTileInd) {
				
					destTilePlayer=true;
				}
				
			}
				
		}
		
		for (i=0;i<allRooms[currRoomIndex].roomMonsters.length;i++) {
			
			if (allRooms[currRoomIndex].roomMonsters[i].monsterExists==true) {
			
				if (allRooms[currRoomIndex].roomMonsters[i].index==destTileInd) {
				
					destTileMonst=true;
				}
				
			}
				
		}
		
		destTileTemp=$("#roomTile"+destTileInd).html();
		
		if (destTileTemp=="─" || destTileTemp=="│" || destTileTemp=="┐" || destTileTemp=="└" || destTileTemp=="┘" || destTileTemp=="┌" || destTileTemp=="+" || destTileTemp=="@") {
		
			destTileWall=true;
		}
		
		if (destTilePlayer!=true && destTileMonst!=true && destTileWall!=true) {
	
			//check if active monster or player matches current room tile (or item?)
			
			if (allPlayers[whoIsActive].playerExists==true || allRooms[currRoomIndex].roomMonsters[monstActive].monsterExists==true) {
			
				if (allPlayers[whoIsActive].index==roomTileIndex) {
				
					$("#roomTile"+allPlayers[whoIsActive].index).css("background", tileDefColor);
					
					//if not standing on item
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==false) {
						$("#roomTile"+allPlayers[whoIsActive].index).html("");
					}
					
					//currently standing on item
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==true) {
						$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol);
					}
					
					//currently standing on trap
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasTrap==true) {
						$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].trapSymbol);
						$("#roomTile"+allPlayers[whoIsActive].index).css("background", visionColor);
					}
					
					//previous tile no longer has a being on it
					allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=false;
				
					allPlayers[whoIsActive].index+=roomMaxLength;
					roomTileIndex=allPlayers[whoIsActive].index;
					
					$("#roomTile"+roomTileIndex).css("background", butSelColor);
					
					//current tile has a being on it
					allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=true;
					
					tempPlayInd=whoIsActive;
					tempPlayInd++;
					$("#roomTile"+allPlayers[whoIsActive].index).html("P"+tempPlayInd);
				} //player
				
				if (allRooms[currRoomIndex].roomMonsters.length>0) {
				
					if (allRooms[currRoomIndex].roomMonsters[monstActive].index==roomTileIndex) {
					
						$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).css("background", tileDefColor);
						
						//if not standing on item
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==false) {
							$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html("");
						}
						
						//currently standing on item
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==true) {
							$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol);
						}
					
						//previous tile no longer has a being on it
						allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=false;
					
						allRooms[currRoomIndex].roomMonsters[monstActive].index+=roomMaxLength;
						roomTileIndex=allRooms[currRoomIndex].roomMonsters[monstActive].index;
						
						$("#roomTile"+roomTileIndex).css("background", butSelColor);
						$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomMonsters[monstActive].monstSymbol);
						
						//current tile has a being on it
						allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=true;
					
						allRooms[currRoomIndex].roomMonsters[monstActive].moved=true;
					
					} //monster
				
				} //room has monsters
			
			} //exists
			
		} //not occupied/wall
		
	} //south
	
	if (butId=="moveNW") {
	
		destTileInd=roomTileIndex;
		destTileInd-=roomMaxLength+1;
		
		//check if not occupied by another being or wall
		for (i=0;i<playersMax;i++) {
			
			if (allPlayers[i].playerExists==true) {
			
				if (allPlayers[i].index==destTileInd) {
				
					destTilePlayer=true;
				}
				
			}
				
		}
		
		for (i=0;i<allRooms[currRoomIndex].roomMonsters.length;i++) {
			
			if (allRooms[currRoomIndex].roomMonsters[i].monsterExists==true) {
			
				if (allRooms[currRoomIndex].roomMonsters[i].index==destTileInd) {
				
					destTileMonst=true;
				}
				
			}
				
		}
		
		destTileTemp=$("#roomTile"+destTileInd).html();
		
		if (destTileTemp=="─" || destTileTemp=="│" || destTileTemp=="┐" || destTileTemp=="└" || destTileTemp=="┘" || destTileTemp=="┌" || destTileTemp=="+" || destTileTemp=="@") {
		
			destTileWall=true;
		}
		
		if (destTilePlayer!=true && destTileMonst!=true && destTileWall!=true) {
	
			//check if active monster or player matches current room tile (or item?)
			
			if (allPlayers[whoIsActive].playerExists==true || allRooms[currRoomIndex].roomMonsters[monstActive].monsterExists==true) {
			
				if (allPlayers[whoIsActive].index==roomTileIndex) {
				
					$("#roomTile"+allPlayers[whoIsActive].index).css("background", tileDefColor);
					
					//if not standing on item
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==false) {
						$("#roomTile"+allPlayers[whoIsActive].index).html("");
					}
					
					//currently standing on item
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==true) {
						$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol);
					}
					
					//currently standing on trap
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasTrap==true) {
						$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].trapSymbol);
						$("#roomTile"+allPlayers[whoIsActive].index).css("background", visionColor);
					}
					
					//previous tile no longer has a being on it
					allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=false;
				
					allPlayers[whoIsActive].index-=roomMaxLength+1;
					roomTileIndex=allPlayers[whoIsActive].index;
					
					$("#roomTile"+roomTileIndex).css("background", butSelColor);
					
					//current tile has a being on it
					allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=true;
					
					tempPlayInd=whoIsActive;
					tempPlayInd++;
					$("#roomTile"+allPlayers[whoIsActive].index).html("P"+tempPlayInd);
				} //player
				
				if (allRooms[currRoomIndex].roomMonsters.length>0) {
				
					if (allRooms[currRoomIndex].roomMonsters[monstActive].index==roomTileIndex) {
					
						$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).css("background", tileDefColor);
						
						//if not standing on item
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==false) {
							$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html("");
						}
						
						//currently standing on item
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==true) {
							$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol);
						}
					
						//previous tile no longer has a being on it
						allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=false;
					
						allRooms[currRoomIndex].roomMonsters[monstActive].index-=roomMaxLength+1;
						roomTileIndex=allRooms[currRoomIndex].roomMonsters[monstActive].index;
						
						$("#roomTile"+roomTileIndex).css("background", butSelColor);
						$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomMonsters[monstActive].monstSymbol);
						
						//current tile has a being on it
						allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=true;
					
						allRooms[currRoomIndex].roomMonsters[monstActive].moved=true;
					
					} //monster
				
				} //room has monsters
			
			} //exists
			
		} //not occupied/wall
		
	} //northwest
	
	if (butId=="moveNE") {
	
		destTileInd=roomTileIndex;
		destTileInd-=roomMaxLength-1;
		
		//check if not occupied by another being or wall
		for (i=0;i<playersMax;i++) {
			
			if (allPlayers[i].playerExists==true) {
			
				if (allPlayers[i].index==destTileInd) {
				
					destTilePlayer=true;
				}
				
			}
				
		}
		
		for (i=0;i<allRooms[currRoomIndex].roomMonsters.length;i++) {
			
			if (allRooms[currRoomIndex].roomMonsters[i].monsterExists==true) {
			
				if (allRooms[currRoomIndex].roomMonsters[i].index==destTileInd) {
				
					destTileMonst=true;
				}
				
			}
				
		}
		
		destTileTemp=$("#roomTile"+destTileInd).html();
		
		if (destTileTemp=="─" || destTileTemp=="│" || destTileTemp=="┐" || destTileTemp=="└" || destTileTemp=="┘" || destTileTemp=="┌" || destTileTemp=="+" || destTileTemp=="@") {
		
			destTileWall=true;
		}
		
		if (destTilePlayer!=true && destTileMonst!=true && destTileWall!=true) {
	
			//check if active monster or player matches current room tile (or item?)
			
			if (allPlayers[whoIsActive].playerExists==true || allRooms[currRoomIndex].roomMonsters[monstActive].monsterExists==true) {
			
				if (allPlayers[whoIsActive].index==roomTileIndex) {
				
					$("#roomTile"+allPlayers[whoIsActive].index).css("background", tileDefColor);
					
					//if not standing on item
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==false) {
						$("#roomTile"+allPlayers[whoIsActive].index).html("");
					}
					
					//currently standing on item
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==true) {
						$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol);
					}
					
					//currently standing on trap
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasTrap==true) {
						$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].trapSymbol);
						$("#roomTile"+allPlayers[whoIsActive].index).css("background", visionColor);
					}
					
					//previous tile no longer has a being on it
					allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=false;
				
					allPlayers[whoIsActive].index-=roomMaxLength-1;
					roomTileIndex=allPlayers[whoIsActive].index;
					
					$("#roomTile"+roomTileIndex).css("background", butSelColor);
					
					//current tile has a being on it
					allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=true;
					
					tempPlayInd=whoIsActive;
					tempPlayInd++;
					$("#roomTile"+allPlayers[whoIsActive].index).html("P"+tempPlayInd);
				} //player
				
				if (allRooms[currRoomIndex].roomMonsters.length>0) {
				
					if (allRooms[currRoomIndex].roomMonsters[monstActive].index==roomTileIndex) {
					
						$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).css("background", tileDefColor);
						
						//if not standing on item
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==false) {
							$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html("");
						}
						
						//currently standing on item
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==true) {
							$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol);
						}
					
						//previous tile no longer has a being on it
						allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=false;
					
						allRooms[currRoomIndex].roomMonsters[monstActive].index-=roomMaxLength-1;
						roomTileIndex=allRooms[currRoomIndex].roomMonsters[monstActive].index;
						
						$("#roomTile"+roomTileIndex).css("background", butSelColor);
						$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomMonsters[monstActive].monstSymbol);
						
						//current tile has a being on it
						allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=true;
					
						allRooms[currRoomIndex].roomMonsters[monstActive].moved=true;
					
					} //monster
				
				} //room has monsters
			
			} //exists
			
		} //not occupied/wall
		
	} //northeast
	
	if (butId=="moveSW") {
	
		destTileInd=roomTileIndex;
		destTileInd+=roomMaxLength-1;
		
		//check if not occupied by another being or wall
		for (i=0;i<playersMax;i++) {
			
			if (allPlayers[i].playerExists==true) {
			
				if (allPlayers[i].index==destTileInd) {
				
					destTilePlayer=true;
				}
				
			}
				
		}
		
		for (i=0;i<allRooms[currRoomIndex].roomMonsters.length;i++) {
			
			if (allRooms[currRoomIndex].roomMonsters[i].monsterExists==true) {
			
				if (allRooms[currRoomIndex].roomMonsters[i].index==destTileInd) {
				
					destTileMonst=true;
				}
				
			}
				
		}
		
		destTileTemp=$("#roomTile"+destTileInd).html();
		
		if (destTileTemp=="─" || destTileTemp=="│" || destTileTemp=="┐" || destTileTemp=="└" || destTileTemp=="┘" || destTileTemp=="┌"  || destTileTemp=="+" || destTileTemp=="@") {
		
			destTileWall=true;
		}
		
		if (destTilePlayer!=true && destTileMonst!=true && destTileWall!=true) {
	
			//check if active monster or player matches current room tile (or item?)
			
			if (allPlayers[whoIsActive].playerExists==true || allRooms[currRoomIndex].roomMonsters[monstActive].monsterExists==true) {
			
				if (allPlayers[whoIsActive].index==roomTileIndex) {
				
					$("#roomTile"+allPlayers[whoIsActive].index).css("background", tileDefColor);
					
					//if not standing on item
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==false) {
						$("#roomTile"+allPlayers[whoIsActive].index).html("");
					}
					
					//currently standing on item
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==true) {
						$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol);
					}
					
					//currently standing on trap
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasTrap==true) {
						$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].trapSymbol);
						$("#roomTile"+allPlayers[whoIsActive].index).css("background", visionColor);
					}
					
					//previous tile no longer has a being on it
					allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=false;
				
					allPlayers[whoIsActive].index+=roomMaxLength-1;
					roomTileIndex=allPlayers[whoIsActive].index;
					
					$("#roomTile"+roomTileIndex).css("background", butSelColor);
					
					//current tile has a being on it
					allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=true;
					
					tempPlayInd=whoIsActive;
					tempPlayInd++;
					$("#roomTile"+allPlayers[whoIsActive].index).html("P"+tempPlayInd);
				} //player
				
				if (allRooms[currRoomIndex].roomMonsters.length>0) {
				
					if (allRooms[currRoomIndex].roomMonsters[monstActive].index==roomTileIndex) {
					
						$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).css("background", tileDefColor);
						
						//if not standing on item
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==false) {
							$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html("");
						}
						
						//currently standing on item
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==true) {
							$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol);
						}
					
						//previous tile no longer has a being on it
						allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=false;
					
						allRooms[currRoomIndex].roomMonsters[monstActive].index+=roomMaxLength-1;
						roomTileIndex=allRooms[currRoomIndex].roomMonsters[monstActive].index;
						
						$("#roomTile"+roomTileIndex).css("background", butSelColor);
						$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomMonsters[monstActive].monstSymbol);
						
						//current tile has a being on it
						allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=true;
					
						allRooms[currRoomIndex].roomMonsters[monstActive].moved=true;
					
					} //monster
				
				} //room has monsters
			
			} //exists
			
		} //not occupied/wall
		
	} //southwest
	
	if (butId=="moveSE") {
	
		destTileInd=roomTileIndex;
		destTileInd+=roomMaxLength+1;
		
		//check if not occupied by another being or wall
		for (i=0;i<playersMax;i++) {
			
			if (allPlayers[i].playerExists==true) {
			
				if (allPlayers[i].index==destTileInd) {
				
					destTilePlayer=true;
				}
				
			}
				
		}
		
		for (i=0;i<allRooms[currRoomIndex].roomMonsters.length;i++) {
			
			if (allRooms[currRoomIndex].roomMonsters[i].monsterExists==true) {
			
				if (allRooms[currRoomIndex].roomMonsters[i].index==destTileInd) {
				
					destTileMonst=true;
				}
				
			}
				
		}
		
		destTileTemp=$("#roomTile"+destTileInd).html();
		
		if (destTileTemp=="─" || destTileTemp=="│" || destTileTemp=="┐" || destTileTemp=="└" || destTileTemp=="┘" || destTileTemp=="┌" || destTileTemp=="+" || destTileTemp=="@") {
		
			destTileWall=true;
		}
		
		if (destTilePlayer!=true && destTileMonst!=true && destTileWall!=true) {
	
			//check if active monster or player matches current room tile (or item?)
			
			if (allPlayers[whoIsActive].playerExists==true || allRooms[currRoomIndex].roomMonsters[monstActive].monsterExists==true) {
			
				if (allPlayers[whoIsActive].index==roomTileIndex) {
				
					$("#roomTile"+allPlayers[whoIsActive].index).css("background", tileDefColor);
					
					//if not standing on item
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==false) {
						$("#roomTile"+allPlayers[whoIsActive].index).html("");
					}
					
					//currently standing on item
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==true) {
						$("#roomTile"+allPlayers[whoIsActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol);
					}
					
					//previous tile no longer has a being on it
					allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=false;
				
					allPlayers[whoIsActive].index+=roomMaxLength+1;
					roomTileIndex=allPlayers[whoIsActive].index;
					
					$("#roomTile"+roomTileIndex).css("background", butSelColor);
					
					//current tile has a being on it
					allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=true;
					
					tempPlayInd=whoIsActive;
					tempPlayInd++;
					$("#roomTile"+allPlayers[whoIsActive].index).html("P"+tempPlayInd);
				} //player
				
				if (allRooms[currRoomIndex].roomMonsters.length>0) {
				
					if (allRooms[currRoomIndex].roomMonsters[monstActive].index==roomTileIndex) {
					
						$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).css("background", tileDefColor);
						
						//if not standing on item
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==false) {
							$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html("");
						}
						
						//currently standing on item
						if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem==true) {
							$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol);
						}
					
						//previous tile no longer has a being on it
						allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=false;
					
						allRooms[currRoomIndex].roomMonsters[monstActive].index+=roomMaxLength+1;
						roomTileIndex=allRooms[currRoomIndex].roomMonsters[monstActive].index;
						
						$("#roomTile"+roomTileIndex).css("background", butSelColor);
						$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomMonsters[monstActive].monstSymbol);
						
						//current tile has a being on it
						allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing=true;
					
						allRooms[currRoomIndex].roomMonsters[monstActive].moved=true;
					
					} //monster
				
				} //room has monsters
			
			} //exists
			
		} //not occupied/wall
		
	} //southeast
	
	showVision();
	updatePlayer();
	updateMonst();

});

$( "#createRoomBut" ).click(function( event ) {

	//clear current room
	$("div.roomContainer").find("button").html(""); //initialize
	$("div.roomContainer").find("button").css("background", butDefColor);
	
	clearRoom();
	 
	/*for (i=0;i<roomSize;i++) {
	
		
		$("#roomTile" + i).html("");
		
	}*/

	roomGen();
	allRooms[currRoomIndex].roomExists=true;

});

$("div.roomContainer").find( "button").click(function( event ) {

	var tileStr;
	var tempInd;


	//get index
	tileStr=this.id;
	tileStr=tileStr.replace("roomTile","");

	
	tileStr=parseInt(tileStr);
	
	
	//reset previous current tile color
	$("#roomTile"+roomTileIndex).css("background", tileDefColor);
	
	//tile is red if trap
	if (roomTileIndex>0) {
	
		if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasTrap==true) {
			$("#roomTile"+roomTileIndex).css("background", trapDefColor);
		}
	
	}
	
	roomTileIndex=tileStr;
	showVision();
	

	
	
	//color selected tile
	$("#roomTile"+roomTileIndex).css("background", butSelColor);
	
	//check if click tile is player
	for (i=0; i<playersMax;i++) {
	
		if (allPlayers[i].playerExists==true) {
		
			if (allPlayers[i].index==roomTileIndex) {
			
			
				tempInd=i;
				tempInd++;
				$('#playerTabs a[href="#playerTabs-' + tempInd + '"]').trigger('click');
			}
		
		} //if player exists
	} //player
	
	//check if click tile is monster
	for (i=0; i<allRooms[currRoomIndex].roomMonsters.length;i++) {
	
	
			if (allRooms[currRoomIndex].roomMonsters[i].monsterExists==true) {
		
				if (allRooms[currRoomIndex].roomMonsters[i].index==roomTileIndex) {
				
				
					tempInd=i;
					tempInd++;
					$('#monsterTabs a[href="#monsterTabs-' + tempInd + '"]').trigger('click');
				}
			
			} //if monster exists
		

	} //monster
	
	
	//check if click tile is item
	for (i=0; i<allRooms[currRoomIndex].roomItems.length;i++) {
	
	
			if (allRooms[currRoomIndex].roomItems[i].itemExists==true) {
		
				if (allRooms[currRoomIndex].roomItems[i].index==roomTileIndex) {
				
				
					tempInd=i;
					tempInd++;
					$('#roomItemsTabs a[href="#roomItemsTabs-' + tempInd + '"]').trigger('click');
				}
			
			} //if item exists
		

	} //items
	
	//check if click tile is trap
	for (i=0; i<allRooms[currRoomIndex].roomTraps.length;i++) {
	
	
			if (allRooms[currRoomIndex].roomTraps[i].trapExists==true) {
		
				if (allRooms[currRoomIndex].roomTraps[i].index==roomTileIndex) {
				
				
					tempInd=i;
					tempInd++;
					$('#trapsTabs a[href="#trapsTabs-' + tempInd + '"]').trigger('click');
				}
			
			} //if item exists
		

	} //items
	
});

$("#monsterTabs").tabs({collapsible: true});

$( "#monsterTabs" ).tabs({
  beforeActivate: function( event, ui ) {
  
	
	var tabCmp=ui.newPanel.attr('id'); //for comparing tab id
	
	//alert(ui.newPanel.attr('id'));
	
	if (tabCmp=="monsterTabs-1")
	{
		monstActive=0;

		updateMonst();
	}
	
	if (tabCmp=="monsterTabs-2")
	{
		monstActive=1;
		
		updateMonst();
	}
	
	if (tabCmp=="monsterTabs-3")
	{
		monstActive=2;
		
		updateMonst();
	}
	
	if (tabCmp=="monsterTabs-4")
	{
		monstActive=3;

		updateMonst();
	}
	
	if (tabCmp=="monsterTabs-5")
	{
		monstActive=4;
		
		updateMonst();
	}	
	
	if (tabCmp=="monsterTabs-6")
	{
		monstActive=5;
		
		updateMonst();
	}
	
	if (tabCmp=="monsterTabs-7")
	{
		monstActive=6;
		
		updateMonst();
		
	}
	
	if (tabCmp=="monsterTabs-8")
	{
		monstActive=7;
		updateMonst();
	}
	
	if (tabCmp=="monsterTabs-9")
	{
		monstActive=8;
		updateMonst();
	}
	
	if (tabCmp=="monsterTabs-10")
	{
		monstActive=9;
		updateMonst();
	}
	
	
	//clears spinner entries
	$("div.monstStatsGrid").find("input[type=\"spinner\"]").spinner("value", '');
	
	
	//select room tile
	if (allRooms[currRoomIndex].roomMonsters.length>monstActive) {
	
		if (allRooms[currRoomIndex].roomMonsters[monstActive].monsterExists==true) {
		
			if (allRooms[currRoomIndex].roomMonsters[monstActive].index>0) {
			
				//reset previous current tile color
				$("#roomTile"+roomTileIndex).css("background", tileDefColor);
				
				//color if trap
				if (roomTileIndex>0) {
	
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasTrap==true) {
						$("#roomTile"+roomTileIndex).css("background", trapDefColor);
					}
				
				}
				
				
				roomTileIndex=allRooms[currRoomIndex].roomMonsters[monstActive].index;
				$("#roomTile"+roomTileIndex).css("background", butSelColor);
				
			}
		}
	
	}
	
	if (allRooms[currRoomIndex].roomMonsters.length<=monstActive) {
	
		$("#roomTile"+roomTileIndex).css("background", tileDefColor);
		
		
	
	}
	
	
  } //func
});

function updateMonst() {

	var tempStat="";
	var tempNum=0;
	
	//tab titles
	//for (i=0; i<allRooms[currRoomIndex].roomMonsters.length;i++) {
	for (i=0;i<monstMax;i++) {
	
	
		if (allRooms[currRoomIndex].roomMonsters.length>i) {
	
			if (allRooms[currRoomIndex].roomMonsters[i].monsterExists==true) {
				$('#monsterTabs ul:first li:eq(' + i + ') a').text(allRooms[currRoomIndex].roomMonsters[i].monstName);
			}
		
		}
		
		
		if (allRooms[currRoomIndex].roomMonsters.length<=i) {
		
			tempNum=i;
			tempNum++;
			$('#monsterTabs ul:first li:eq(' + i + ') a').text("Monster " + tempNum);
		}
	
	}
	
	if (allRooms[currRoomIndex].roomMonsters.length>monstActive) {
	
		if (allRooms[currRoomIndex].roomMonsters[monstActive].monsterExists==true) {
		
			tempStat="HP: " + allRooms[currRoomIndex].roomMonsters[monstActive].hpCurr;
			tempStat+=" / "+ allRooms[currRoomIndex].roomMonsters[monstActive].hpMax;
			$("#monstHP").html(tempStat);

			tempStat="Energy: " + allRooms[currRoomIndex].roomMonsters[monstActive].energyCurr;
			tempStat+=" / "+ allRooms[currRoomIndex].roomMonsters[monstActive].energyMax;
			$("#monstEnergy").html(tempStat);

			tempStat="AC: " + allRooms[currRoomIndex].roomMonsters[monstActive].totalAC;
			$("#monstAC").html(tempStat);
			
			tempStat="Index: " + allRooms[currRoomIndex].roomMonsters[monstActive].index;
			$("#monstIndex").html(tempStat);
			
			tempStat="Actions this turn: "; 
			if (allRooms[currRoomIndex].roomMonsters[monstActive].speed>=12 && allRooms[currRoomIndex].roomMonsters[monstActive].speed<24){
				tempStat+="1";
				allRooms[currRoomIndex].roomMonsters[monstActive].actions=1;
			}
			if (allRooms[currRoomIndex].roomMonsters[monstActive].speed>=24){
				tempStat+="2";
				allRooms[currRoomIndex].roomMonsters[monstActive].actions=2;
			}
			
			if (allRooms[currRoomIndex].roomMonsters[monstActive].speed<12){
				tempStat+="0";
				allRooms[currRoomIndex].roomMonsters[monstActive].actions=0;
			}
			
			$('#monstTurnAct').html(tempStat);
			
			if (allRooms[currRoomIndex].roomMonsters[monstActive].moved==true) {
				
				$("#monstHasMoved").html("Moved");
			}
			
			if (allRooms[currRoomIndex].roomMonsters[monstActive].moved!=true) {
				
				$("#monstHasMoved").html("");
			}
		
		} //if monst exists
	
	}
	
	else if (allRooms[currRoomIndex].roomMonsters.length<=monstActive) {
	
		tempStat="HP: ";
		$("#monstHP").html(tempStat);

		tempStat="Energy: ";
		$("#monstEnergy").html(tempStat);

		tempStat="AC: ";
		$("#monstAC").html(tempStat);
		
		tempStat="Index: ";
		$("#monstIndex").html(tempStat);
		
		tempStat="Actions this turn: "; 
		$('#monstTurnAct').html(tempStat);
	}

}

$( "#clearMonstBut" ).click(function( event ) {

	var corpseDrop=rollDie(2,1);

	$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).css("background", tileDefColor);
	
	//dont clear if standing on item?
	$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html("");
	
	if (allRooms[currRoomIndex].roomTile.hasItem==true) {
	
		$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html(allRooms[currRoomIndex].roomTile.itemSymbol);
	}
	
	//chance to drop corpse
	if (corpseDrop==1) {
	
		//console.log("drop corpse");
		
		let corpseOf=allRooms[currRoomIndex].roomMonsters[monstActive].monstName;
		console.log(corpseOf);
		
		if (allRooms[currRoomIndex].roomItems.length<10) {
		
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: corpseOf + " corpse",
						itemSymbol: "%",
						BUC: 0,
						enhancement:0,
						index: allRooms[currRoomIndex].roomMonsters[monstActive].index,
						itemExists:true,
						amount:1,
						isFood:true,
						corpseTurns:0,
					
			});
			
			$("#roomTile"+allRooms[currRoomIndex].roomMonsters[monstActive].index).html("%");
			
			updateItem();
		
		}
	}

	//console.log(allRooms[currRoomIndex].roomMonsters.length);
	allRooms[currRoomIndex].roomMonsters.splice(monstActive,1);
	//console.log(allRooms[currRoomIndex].roomMonsters.length);
	
	updateMonst();
})

$( "#monstStatEditRadio1" ).click(function( event ) {

	monstCurrMax=0;
});

$( "#monstStatEditRadio2" ).click(function( event ) {

	monstCurrMax=1;
});


/*$( function() {
	$( "input[type=\"radio\"]" ).checkboxradio();
} );*/

$("div.monstStatsGrid").find("input[type=\"spinner\"]").spinner();

$("div.monstStatsGrid").find("input").keyup(function(event) {


	var enterVal = this.value;
	var tempStr;
	//var tempStr2;
	enterVal=parseInt(enterVal);
	//alert(typeof(enterVal));
	
    if (event.keyCode === 13) {
	
	
		if (isNaN(enterVal)==false && allRooms[currRoomIndex].roomMonsters[monstActive].monsterExists==true) {
	
			tempStr=this.id;
			tempStr=tempStr.replace("monstSpin","");
			//tempStr=tempStr.toLowerCase();
			
			//var element_id = this.data()[element_type + 'id'];
			
			
			//allPlayers[whoIsActive][tempStr2]+=enterVal;
			
			//current
			if (tempStr=="hp" && monstCurrMax==0) {

				
				allRooms[currRoomIndex].roomMonsters[monstActive].hpCurr+=enterVal;
				//console.log(allRooms[currRoomIndex].roomMonsters[monstActive].hpCurr);
				
			}
			
			//max
			if (tempStr=="hp" && monstCurrMax==1) {
			
				
				
				allRooms[currRoomIndex].roomMonsters[monstActive].hpMax+=enterVal;
				
			}
			
			//current
			if (tempStr=="energy" && monstCurrMax==0) {

				
				
				allRooms[currRoomIndex].roomMonsters[monstActive].energyCurr+=enterVal;
				console.log(allRooms[currRoomIndex].roomMonsters[monstActive].energyCurr);
				
			}
			
			//max
			if (tempStr=="energy" && monstCurrMax==1) {
			
				
				
				allRooms[currRoomIndex].roomMonsters[monstActive].energyMax+=enterVal;
				
			}
			
		
			
			/*else {
			
				allRooms[currRoomIndex].roomMonsters[monstActive][tempStr]+=enterVal;
			}*/
			
			//alert(allPlayers[whoIsActive].hpCurr);
			
			updateMonst();
			
	
		}
    }
	
	
	
});


$("#itemTabs").tabs({collapsible: true});
$("#roomItemsTabs").tabs({collapsible: true});

$( "#roomItemsTabs" ).tabs({
  beforeActivate: function( event, ui ) {
  
	
	var tabCmp=ui.newPanel.attr('id'); //for comparing tab id
	
	
	
	/*//select room tile
	if (allRooms[currRoomIndex].roomMonsters.length>monstActive) {
	
		if (allRooms[currRoomIndex].roomMonsters[monstActive].monsterExists==true) {
		
			if (allRooms[currRoomIndex].roomMonsters[monstActive].index>0) {
			
				//reset previous current tile color
				$("#roomTile"+roomTileIndex).css("background", tileDefColor);
				
				
				roomTileIndex=allRooms[currRoomIndex].roomMonsters[monstActive].index;
				$("#roomTile"+roomTileIndex).css("background", butSelColor);
				
			}
		}
	
	}
	
	if (allRooms[currRoomIndex].roomMonsters.length<=monstActive) {
	
		$("#roomTile"+roomTileIndex).css("background", tileDefColor);
		
		
	
	}*/
	
	
  }
});

var wandsID=["aluminum", "curved", "iridium", "marble", "ash", "uranium", "balsa", "oak", "forked", "jeweled", "pine", "glass", "walnut", "platinum", "crystal", "maple", "mahogany", "tin",];
var wands=["light", "enlightenment", "unlocking", "tick", "lance", "invisibility", "scrutiny", "slow", "brisk", "haste", "force bolt", "ice spike", "fireball", "lightning", "sleep", "cancellation", "create monster", "death"];
var wandsUsed=[];
var potions=["healing", "panacea", "full healing", "juice", "see invisible", "silence", "confusion", "restore energy", "hallucination", "invisibility", "blindness", "ESP", "object detection", "enlightenment", "levitation", "brisk", "haste", "acid", "oil", "paralysis", "gain level", "gain ability", "poison"];
var potionsID=["fuschia", "lavender", "yellow", "emerald", "vermillion", "cyan", "tangerine", "cerulean", "magenta", "sparkling", "puce", "milky", "swirly", "bubbly", "smoky", "cloudy", "viscous", "black", "golden", "brown", "fizzy", "ruby", "white", "murky"];
var potionsUsed=[];
var scrolls=["identify", "light", "displacement", "enhance armor", "remove curse", "mapping", "food detection", "paralysis", "amnesia", "charging", "punishment", "poison mist", "teleportation"];
var scrollsID=["SEGINUS", "FOMALHAUT", "GLAUSAR", "HADAR", "HAMAL", "ALCYONE", "HASSALEH", "JISHUI", "TARAZED", "LESATH", "MAHASIM", "MARKAB", "SYRMA", "MINTAKA"];
var scrollsUsed=[];
var spellbooks=["force bolt", "nosferatu", "lance", "ice spike", "fireball", "discharge", "unlock", "tick", "reflect", "cancellation", "create monster", "light", "sonar", "detect food", "identify", "protection", "remove curse", "slow", "blind", "taunt", "sleep", "paralyze", "healing", "regeneration", "restore ability", "mend", "convalesce", "amplify", "surge", "redoubt"];
var spellbooksID=["stained", "dusty", "glittering", "vellum", "cloth-bound", "shining", "ragged", "leather-bound", "dull", "dog-eared", "velvet", "thin", "thick", "mottled", "wrinkled", "hardcover", "canvas", "violet", "red", "golden", "silver", "copper", "white", "blue", "green", "indigo", "tan", "softcover", "torn", "shabby"];
var spellbooksUsed=[];
var robes=["magic resistance", "protection", "invisibility", "channeling", "cold immunity", "fire immunity", "shock immunity", "drain immunity", "slow", "brisk"];
var robesID=["tattered", "ornamental", "opera", "velour", "taffeta", "satin", "cashmere", "silk", "cotton", "velvet"];
var robesUsed=[];
var gloves=["fumbling", "power", "dexterity", "throwing"];
var glovesID=["padded gloves", "fencing gloves", "shining gloves", "spiked gloves"];
var glovesUsed=[];
var shoes=["dash", "fumbling", "hover", "slow", "speed", "water walking"];
var shoesID=["mud boots", "hiking boots", "snow boots", "buckled boots", "combat boots", "bowling shoes"];
var shoesUsed=[];
var rings=["hunger", "protection", "provocation", "stealth", "sustain ability", "warning", "cold resistance", "fire resistance", "shock resistance", "poison resistance", "sleep resistance", "confusion","paralysis resistantce", "strength", "dexterity", "intelligence", "wisdom", "constitution", "increase damage", "increase accuracy", "invisibility", "levitation", "searching", "slow digestion", "vulnerability", "enfeeblement"];
var ringsID=["pearl", "engagement", "clay", "jade", "diamond", "wire", "shiny", "coral", "agate", "ivory", "twisted", "bronze", "wooden", "onyx", "topaz", "aquamarine", "steel", "golden", "silver", "brass", "granite", "sapphire", "opal", "garnet", "amethyst"];
var ringsUsed=[];
var amulets=["change gender", "esp", "life saving", "reflection", "restful sleep", "strangulation", "water walking", "silence", "vigor", "moxie"];
var amuletsID=["hexagonal", "octagonal", "spherical", "oval", "concave", "circular", "triangular", "pyramidal", "dodecahedronal", "toroid"];
var amuletsUsed=[];

initItems();


function initItems() {
	
	
	/*var wandsID=["aluminum", "curved", "iridium", "marble", "ash", "uranium", "balsa", "oak", "forked", "jeweled", "pine", "glass", "walnut", "platinum", "crystal", "maple", "mahogany", "tin",];
	var wands=["light", "enlightenment", "unlocking", "tick", "lance", "invisibility", "scrutiny", "slow", "brisk", "haste", "force bolt", "ice spike", "fireball", "lightning", "sleep", "cancellation", "create monster", "death"];
	var wandsUsed=[];
	var potions=["healing", "panacea", "full healing", "juice", "see invisible", "silence", "confusion", "restore energy", "hallucination", "invisibility", "blindness", "ESP", "object detection", "enlightenment", "levitation", "brisk", "haste", "acid", "oil", "paralysis", "gain level", "gain ability", "poison"];
	var potionsID=["fuschia", "lavender", "yellow", "emerald", "vermillion", "cyan", "tangerine", "cerulean", "magenta", "sparkling", "puce", "milky", "swirly", "bubbly", "smoky", "cloudy", "viscous", "black", "golden", "brown", "fizzy", "ruby", "white", "murky"];
	var potionsUsed=[];
	var scrolls=["identify", "light", "displacement", "enhance armor", "remove curse", "mapping", "food detection", "paralysis", "amnesia", "charging", "punishment", "poison mist", "teleportation"];
	var scrollsID=["SEGINUS", "FOMALHAUT", "GLAUSAR", "HADAR", "HAMAL", "ALCYONE", "HASSALEH", "JISHUI", "TARAZED", "LESATH", "MAHASIM", "MARKAB", "SYRMA", "MINTAKA"];
	var scrollsUsed=[];
	var spellbooks=["force bolt", "nosferatu", "lance", "ice spike", "fireball", "discharge", "unlock", "tick", "reflect", "cancellation", "create monster", "light", "sonar", "detect food", "identify", "protection", "remove curse", "slow", "blind", "taunt", "sleep", "paralyze", "healing", "regeneration", "restore ability", "mend", "convalesce", "amplify", "surge", "redoubt"];
	var spellbooksID=["stained", "dusty", "glittering", "vellum", "cloth-bound", "shining", "ragged", "leather-bound", "dull", "dog-eared", "velvet", "thin", "thick", "mottled", "wrinkled", "hardcover", "canvas", "violet", "red", "golden", "silver", "copper", "white", "blue", "green", "indigo", "tan", "softcover", "torn", "shabby"];
	var spellbooksUsed=[];
	var robes=["magic resistance", "protection", "invisibility", "channeling", "cold immunity", "fire immunity", "shock immunity", "drain immunity", "slow", "brisk"];
	var robesID=["tattered", "ornamental", "opera", "velour", "taffeta", "satin", "cashmere", "silk", "cotton", "velvet"];
	var robesUsed=[];
	var gloves=["fumbling", "power", "dexterity", "throwing"];
	var glovesID=["padded gloves", "fencing gloves", "shining gloves", "spiked gloves"];
	var glovesUsed=[];
	var shoes=["dash", "fumbling", "hover", "slow", "speed", "water walking"];
	var shoesID=["mud boots", "hiking boots", "snow boots", "buckled boots", "combat boots", "bowling shoes"];
	var shoesUsed=[];
	var rings=["hunger", "protection", "provocation", "stealth", "sustain ability", "warning", "cold resistance", "fire resistance", "shock resistance", "poison resistance", "sleep resistance", "confusion","paralysis resistantce", "strength", "dexterity", "intelligence", "wisdom", "constitution", "increase damage", "increase accuracy", "invisibility", "levitation", "searching", "slow digestion", "vulnerability", "enfeeblement"];
	var ringsID=["pearl", "engagement", "clay", "jade", "diamond", "wire", "shiny", "coral", "agate", "ivory", "twisted", "bronze", "wooden", "onyx", "topaz", "aquamarine", "steel", "golden", "silver", "brass", "granite", "sapphire", "opal", "garnet", "amethyst"];
	var ringsUsed=[];
	var amulets=["change gender", "esp", "life saving", "reflection", "restful sleep", "strangulation", "water walking", "silence", "vigor", "moxie"];
	var amuletsID=["hexagonal", "octagonal", "spherical", "oval", "concave", "circular", "triangular", "pyramidal", "dodecahedronal", "toroid"];
	var amuletsUsed=[];*/
	
	var amount=0;
	var itemRoll=0;
	



	
	// ---wands---
	amount=wands.length;
	
	for (i=0;i<amount;i++) {
	
		itemRoll=rollDie0(amount,1);
	
		while (wandsUsed.includes(itemRoll)) {
		
			itemRoll=rollDie0(amount,1);
			//console.log(wandsUsed.length);
		}
		
		wandsUsed.push(itemRoll);
		
		$("#wands").append(wands[i] + " = ");
		$("#wands").append(wandsID[itemRoll] + "<br>");

	}
	
	
	// ---potions---
	amount=potions.length;
	
	for (i=0;i<amount;i++) {
	
		itemRoll=rollDie0(amount,1);
	
		while (potionsUsed.includes(itemRoll)) {
		
			itemRoll=rollDie0(amount,1);
			//console.log(potionsUsed.length);
		}
		
		potionsUsed.push(itemRoll);
		
		$("#potions").append(potions[i] + " = ");
		$("#potions").append(potionsID[itemRoll] + "<br>");

	}
	
	
	// ---scrolls---
	amount=scrolls.length;
	
	for (i=0;i<amount;i++) {
	
		itemRoll=rollDie0(amount,1);
	
		while (scrollsUsed.includes(itemRoll)) {
		
			itemRoll=rollDie0(amount,1);
			//console.log(scrollsUsed.length);
		}
		
		scrollsUsed.push(itemRoll);
		
		$("#scrolls").append(scrolls[i] + " = ");
		$("#scrolls").append(scrollsID[itemRoll] + "<br>");

	}
	
	
	// ---spellbooks---
	amount=spellbooks.length;
	
	for (i=0;i<amount;i++) {
	
		itemRoll=rollDie0(amount,1);
	
		while (spellbooksUsed.includes(itemRoll)) {
		
			itemRoll=rollDie0(amount,1);
			//console.log(spellbooksUsed.length);
		}
		
		spellbooksUsed.push(itemRoll);
		
		$("#spellbooks").append(spellbooks[i] + " = ");
		$("#spellbooks").append(spellbooksID[itemRoll] + "<br>");

	}
	
	
	// ---robes---
	amount=robes.length;
	
	for (i=0;i<amount;i++) {
	
		itemRoll=rollDie0(amount,1);
	
		while (robesUsed.includes(itemRoll)) {
		
			itemRoll=rollDie0(amount,1);
			//console.log(robesUsed.length);
		}
		
		robesUsed.push(itemRoll);
		
		$("#robes").append(robes[i] + " = ");
		$("#robes").append(robesID[itemRoll] + "<br>");

	}
	
	// ---gloves---
	amount=gloves.length;
	
	for (i=0;i<amount;i++) {
	
		itemRoll=rollDie0(amount,1);
	
		while (glovesUsed.includes(itemRoll)) {
		
			itemRoll=rollDie0(amount,1);
			//console.log(glovesUsed.length);
		}
		
		glovesUsed.push(itemRoll);
		
		$("#gloves").append(gloves[i] + " = ");
		$("#gloves").append(glovesID[itemRoll] + "<br>");

	}
	
	
	// ---shoes---
	amount=shoes.length;
	
	for (i=0;i<amount;i++) {
	
		itemRoll=rollDie0(amount,1);
	
		while (shoesUsed.includes(itemRoll)) {
		
			itemRoll=rollDie0(amount,1);
			//console.log(shoesUsed.length);
		}
		
		shoesUsed.push(itemRoll);
		
		$("#shoes").append(shoes[i] + " = ");
		$("#shoes").append(shoesID[itemRoll] + "<br>");

	}
	
	
	// ---rings---
	amount=rings.length;
	
	for (i=0;i<amount;i++) {
	
		itemRoll=rollDie0(amount,1);
	
		while (ringsUsed.includes(itemRoll)) {
		
			itemRoll=rollDie0(amount,1);
			//console.log(ringsUsed.length);
		}
		
		ringsUsed.push(itemRoll);
		
		$("#rings").append(rings[i] + " = ");
		$("#rings").append(ringsID[itemRoll] + "<br>");

	}
	
	
	// ---amulets---
	amount=amulets.length;
	
	for (i=0;i<amount;i++) {
	
		itemRoll=rollDie0(amount,1);
	
		while (amuletsUsed.includes(itemRoll)) {
		
			itemRoll=rollDie0(amount,1);
			//console.log(amuletsUsed.length);
		}
		
		amuletsUsed.push(itemRoll);
		
		$("#amulets").append(amulets[i] + " = ");
		$("#amulets").append(amuletsID[itemRoll] + "<br>");

	}
	
}

function clearRoom () {

	var tempSym="";

	//clear symbols
	for (i=0;i<roomSize;i++) {
	
		tempSym=$("#roomTile" + i).html();
		
		if (tempSym!="─" && tempSym!="│" && tempSym!="┐" && tempSym!="└" && tempSym!="┘" && tempSym!="┌" && tempSym!="+" && tempSym!="@" ){
		
			$("#roomTile" + i).html("");
		}
	}	
	
	//clear monsters
	allRooms[currRoomIndex].roomMonsters.length=0;
	
	//clear items
	allRooms[currRoomIndex].roomItems.length=0;
	for (i=0;i<roomSize;i++) {
		allRooms[currRoomIndex].roomTile[i].itemSymbol="";
		allRooms[currRoomIndex].roomTile[i].hasItem=false;
	}
	
	//clear traps
	allRooms[currRoomIndex].roomTraps.length=0;
	for (i=0;i<roomSize;i++) {
		allRooms[currRoomIndex].roomTile[i].trapSymbol="";
		allRooms[currRoomIndex].roomTile[i].hasTrap=false;
	}
	
	//clear spawn array
	//allRooms[currRoomIndex].spawnArray.length=0;
}

function wipeRoom () {

	//console.log("wipe" +currRoomIndex);

	var tempSym="";

	//clear symbols/tiles
	for (j=0;j<roomSize;j++) {
		$("#roomTile" + j).html("");
		allRooms[currRoomIndex].roomTile[j].symbol="";
	}	
	
	allRooms[currRoomIndex].roomExists=false;
	
	//clear monsters
	allRooms[currRoomIndex].roomMonsters.length=0;
	
	//clear items
	allRooms[currRoomIndex].roomItems.length=0;
	for (j=0;j<roomSize;j++) {
		allRooms[currRoomIndex].roomTile[j].itemSymbol="";
		allRooms[currRoomIndex].roomTile[j].hasItem=false;
	}
	
	//clear traps
	allRooms[currRoomIndex].roomTraps.length=0;
	for (i=0;i<roomSize;i++) {
		allRooms[currRoomIndex].roomTile[i].trapSymbol="";
		allRooms[currRoomIndex].roomTile[i].hasTrap=false;
	}
	
	//clear spawn array
	allRooms[currRoomIndex].spawnArray.length=0;

}

$("div.enterFromGrid").find("button").click(function( event ) {

	if (allRooms[currRoomIndex].roomExists==true) {
	
		clearRoom();
	
		var tempId=this.id;
		var playerInd=0;
		
		if (tempId!="") {
		
			var tempInd;
			var enterCheck=-1; //1 for north, 2 for west, 3 for east, 4 for south
			var tempEx=0; //index for exit
			
			//color room tiles
			
			for (i=0;i<allRooms[currRoomIndex].spawnArray.length;i++) {
			
				$("#roomTile"+allRooms[currRoomIndex].spawnArray[i]).css("background", tileDefColor);
				
			}

		
			if (tempId=="enterA") {
			
				
				if (allRooms[currRoomIndex].arrExit>1) {
				
					//check for which adjacent tile is in spawn zone
				
				
					//north
					tempInd=allRooms[currRoomIndex].arrExit+16;			
					
					if (allRooms[currRoomIndex].spawnArray.includes(tempInd)==true) {
					
						enterCheck=1;
					}
					
					//west
					tempInd=allRooms[currRoomIndex].arrExit+1;
					
					
					if (allRooms[currRoomIndex].spawnArray.includes(tempInd)==true) {
					
						enterCheck=2;
					}
				
					
					//east
					tempInd=allRooms[currRoomIndex].arrExit-1;
					
					
					if (allRooms[currRoomIndex].spawnArray.includes(tempInd)==true) {
					
						enterCheck=3;
					}
					
					
					
					//south
					tempInd=allRooms[currRoomIndex].arrExit-16;
					
					
					if (allRooms[currRoomIndex].spawnArray.includes(tempInd)==true) {
					
						enterCheck=4;
					}
					
					//console.log(enterCheck);
				
				}
			
			}
		
			if (tempId=="enterN" || enterCheck==1) {
			
			
				if (allRooms[currRoomIndex].northExit>1 || enterCheck==1) {
				
					clearRoom();
				
					//start 3 down, 1 right
					//populate leftwards
					
					//3 down, 1 right is +49
					
					if (enterCheck<0) {
						tempInd=allRooms[currRoomIndex].northExit+49;
						tempEx=allRooms[currRoomIndex].northExit;
					}
					
					else if (enterCheck==1) {
					
						tempInd=allRooms[currRoomIndex].arrExit+49;
						tempEx=allRooms[currRoomIndex].arrExit;
					}
					
					else {
					
						alert("wrong enter");
					}
					
					
					for (i=0;i<playersMax;i++) {
						
						//console.log(tempInd);
						//allRooms[currRoomIndex]
						
						$("#roomTile" + tempInd).html(formArr[i]);
						
						if (formArr[i]!="") {
						
							playerInd=formArr[i];
							//console.log(playerInd);
							playerInd=playerInd.replace("P","");
							playerInd=parseInt(playerInd);
							playerInd--;
							//console.log(playerInd);
							allPlayers[playerInd].index=tempInd;
						
							
							//current tile has being on it
							allRooms[currRoomIndex].roomTile[tempInd].hasBeing=true;
						
						}
						
						tempInd--;
						
						if (tempInd==(tempEx+46)) {
						
							tempInd=tempEx+33;
						
						}
						
						if (tempInd==(tempEx+30)) {
						
							tempInd=tempEx+17;
						
						}
							
						
						
					}	//players
					
					//focus on player 1 by default
					roomTileIndex=allPlayers[0].index;
					
					//create monsters/items/traps after entering
					monstSpawn();
					itemSpawn();
					trapSpawn();
				
				} //has north exit
			
			} //north
			
			
			
			if (tempId=="enterW" || enterCheck==2) {
			
				clearRoom();
			
				//start 3 right, 1 up
				//populate downwards
				
				//3 right, 1 up is -13
				
				if (allRooms[currRoomIndex].westExit>1 || enterCheck==2) {
				
					if (enterCheck<0) {
					
						tempInd=allRooms[currRoomIndex].westExit-13;
						tempEx=allRooms[currRoomIndex].westExit;
					}
					
					else if (enterCheck==2) {
					
						tempInd=allRooms[currRoomIndex].arrExit-13;
						tempEx=allRooms[currRoomIndex].arrExit;
					}
					
					else {
					
						alert("wrong enter");
					}
					
					
					for (i=0;i<playersMax;i++) {
					
						
						
						//console.log(tempInd);
						//allRooms[currRoomIndex]
						
						$("#roomTile" + tempInd).html(formArr[i]);
						
						if (formArr[i]!="") {
						
							playerInd=formArr[i];
							//console.log(playerInd);
							playerInd=playerInd.replace("P","");
							playerInd=parseInt(playerInd);
							playerInd--;
							//console.log(playerInd);
							allPlayers[playerInd].index=tempInd;
							
							//current tile has being on it
							allRooms[currRoomIndex].roomTile[tempInd].hasBeing=true;
						
						}
						
						tempInd+=roomMaxLength;
						
						if (tempInd==(tempEx+35)) {
						
							tempInd=tempEx-14;
						
						}
						
						if (tempInd==(tempEx+34)) {
						
							tempInd=tempEx-15;
						
						}
							
						
						
					}	//players
					
					//focus on player 1 by default
					roomTileIndex=allPlayers[0].index;
					
					//create monsters/items/traps after entering
					monstSpawn();
					itemSpawn();
					trapSpawn();
				
				} //has west exit
				
			
			} //west
			
			
			
			
			if (tempId=="enterE" || enterCheck==3) {
			
				clearRoom();
			
				//start 3 left, 1 down
				//populate upwards
				
				//3 left, 1 down is +13
				
				if (allRooms[currRoomIndex].eastExit>1 || enterCheck==3) {
				
					if (enterCheck<0) {
					
						tempInd=allRooms[currRoomIndex].eastExit+13;
						tempEx=allRooms[currRoomIndex].eastExit;
					}
					
					else if (enterCheck==3) {
					
						tempInd=allRooms[currRoomIndex].arrExit+13;
						tempEx=allRooms[currRoomIndex].arrExit;
					}
					
					else {
					
						alert("wrong enter");
					}
					
					
					for (i=0;i<playersMax;i++) {
					
						
						
						//console.log(tempInd);
						//allRooms[currRoomIndex]
						
						$("#roomTile" + tempInd).html(formArr[i]);
						
						if (formArr[i]!="") {
						
							playerInd=formArr[i];
							//console.log(playerInd);
							playerInd=playerInd.replace("P","");
							playerInd=parseInt(playerInd);
							playerInd--;
							//console.log(playerInd);
							allPlayers[playerInd].index=tempInd;
							
							//current tile has being on it
							allRooms[currRoomIndex].roomTile[tempInd].hasBeing=true;
						
						}
						
						tempInd-=roomMaxLength;
						
						if (tempInd==(tempEx-35)) {
						
							tempInd=tempEx+14;
						
						}
						
						if (tempInd==(tempEx-34)) {
						
							tempInd=tempEx+15;
						
						}
							
						
						
					}	//players
					
					//focus on player 1 by default
					roomTileIndex=allPlayers[0].index;
					
					//create monsters/items/traps after entering
					monstSpawn();
					itemSpawn();
					trapSpawn();
				
				} //has east exit
				
			
			} //east
			
			
			
			if (tempId=="enterS" || enterCheck==4) {
			
				if (allRooms[currRoomIndex].southExit>1 || enterCheck==4) {
				
					clearRoom();
					
				
					//start 3 up, 1 left
					//populate rightwards
					
					//3 up, 1 left is -49
					
					
					if (enterCheck<0) {
						tempInd=allRooms[currRoomIndex].southExit-49;
						tempEx=allRooms[currRoomIndex].southExit;
					}
					
					else if (enterCheck==4) {
					
						tempInd=allRooms[currRoomIndex].arrExit-49;
						tempEx=allRooms[currRoomIndex].arrExit;
					}
					
					else {
					
						alert("wrong enter");
					}
					
					
					for (i=0;i<playersMax;i++) {
					
						
						
						//console.log(tempInd);
						//allRooms[currRoomIndex]
						
						$("#roomTile" + tempInd).html(formArr[i]);
						
						if (formArr[i]!="") {
						
							playerInd=formArr[i];
							//console.log(playerInd);
							playerInd=playerInd.replace("P","");
							playerInd=parseInt(playerInd);
							playerInd--;
							//console.log(playerInd);
							allPlayers[playerInd].index=tempInd;
							
							
							
							//current tile has being on it
							allRooms[currRoomIndex].roomTile[tempInd].hasBeing=true;
						
						}
						
						tempInd++;
						
						if (tempInd==(tempEx-46)) {
						
							tempInd=tempEx-33;
						
						}
						
						if (tempInd==(tempEx-30)) {
						
							tempInd=tempEx-17;
						
						}
							
						
						
					}	//players
					
					//focus on player 1 by default
					roomTileIndex=allPlayers[0].index;
					
					
					//create monsters/items/traps after entering
					monstSpawn();
					itemSpawn();
					trapSpawn();
				
				}
			
			} //south
			
			hideVision();
			showVision();
			updatePlayer();
			
		} //if an actual button
		
	}
});

function showVision() {

	var tempIndex=0;
	var tempTile=0;
	
	var wallNorth=false;
	var wallEast=false;
	var wallWest=false;
	var wallSouth=false;
	var trapRoll=rollDie(10,1);
	var isTrap=false;
	
	for (i=0;i<playersMax;i++) {
	
		if (allPlayers[i].playerExists==true && hasFormation==true) {
		
			wallNorth=false;
			wallEast=false;
			wallWest=false;
			wallSouth=false;
		
			if (allPlayers[i].race!=3 && allPlayers[i].race!=1) {
			
				tempIndex=allPlayers[i].index;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && whoIsActive!=i && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
	
				//one north
				tempIndex=allPlayers[i].index-roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallNorth=true;
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				
				//one east
				tempIndex=allPlayers[i].index+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallEast=true;
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName); 
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				
				//one west
				tempIndex=allPlayers[i].index-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallWest=true;
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				//one south
				tempIndex=allPlayers[i].index+roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallSouth=true;
				
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				//corners
				
				tempIndex=allPlayers[i].index-roomMaxLength-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				tempIndex=allPlayers[i].index-roomMaxLength+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				tempIndex=allPlayers[i].index+roomMaxLength-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName); 
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;							
						}
					
					}
				}
				
				tempIndex=allPlayers[i].index+roomMaxLength+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName); 
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName); 
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
			
			} //non elf/dwarf
			
			//dwarf
			if (allPlayers[i].race==1) {
			
				tempIndex=allPlayers[i].index;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && whoIsActive!=i)
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
	
				//one north
				tempIndex=allPlayers[i].index-roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallNorth=true;
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				//two north
				tempIndex=allPlayers[i].index-(roomMaxLength*2);
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempIndex>0) {
					if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true)
					$("#roomTile"+tempIndex).css("background", infraColor);
				}
				
				
				//one east
				tempIndex=allPlayers[i].index+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallEast=true;
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				
				//two east
				tempIndex=allPlayers[i].index+2;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallEast!=true && allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true)
				$("#roomTile"+tempIndex).css("background", infraColor);
				
				
				//one west
				tempIndex=allPlayers[i].index-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallWest=true;
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				//two west
				tempIndex=allPlayers[i].index-2;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallWest!=true && allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true)
				$("#roomTile"+tempIndex).css("background", infraColor);
				
				//one south
				tempIndex=allPlayers[i].index+roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallSouth=true;
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				//two south
				tempIndex=allPlayers[i].index+(roomMaxLength*2);
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempIndex<roomMaxLength*roomMaxLength) {
					if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallSouth!=true && allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true)
					$("#roomTile"+tempIndex).css("background", infraColor);
				}
				
				
				//corners
				
				tempIndex=allPlayers[i].index-roomMaxLength-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				tempIndex=allPlayers[i].index-roomMaxLength+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				tempIndex=allPlayers[i].index+roomMaxLength-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				tempIndex=allPlayers[i].index+roomMaxLength+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
			} //dwarf
			
			//elf
			if (allPlayers[i].race==3) {
			
				tempIndex=allPlayers[i].index;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && whoIsActive!=i)
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
	
				//one north
				tempIndex=allPlayers[i].index-roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallNorth=true;
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				//2 north
				tempIndex=allPlayers[i].index-(roomMaxLength*2);
				tempTile=$("#roomTile"+tempIndex).html();
				
				if (tempIndex>0) {
			
					//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true)
					if (tempTile!="@" && wallNorth!=true)
					$("#roomTile"+tempIndex).css("background", visionColor);
				
					if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
					
						if (allPlayers[i].playerPassives.searching!=true) {
						
							trapRoll=rollDie(10,1);
							
							if (trapRoll==1) {
							
								$("#roomTile"+tempIndex).css("background", visionColor);
								alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
								allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
							}
						
						}
						
						if (allPlayers[i].playerPassives.searching==true) {
						
							trapRoll=rollDie(2,1);
							
							if (trapRoll==1) {
							
								$("#roomTile"+tempIndex).css("background", visionColor);
								alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
								allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
							}
						
						}
					}
				
				} //in bounds
				
				//one east
				tempIndex=allPlayers[i].index+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallEast=true;
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				//2 east
				tempIndex=allPlayers[i].index+2;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="@" && wallEast!=true)
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				//one west
				tempIndex=allPlayers[i].index-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallWest=true;
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				//two west
				tempIndex=allPlayers[i].index-2;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="@" && wallWest!=true)
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				//one south
				tempIndex=allPlayers[i].index+roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallSouth=true;
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				
				//two south
				tempIndex=allPlayers[i].index+(roomMaxLength*2);
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempIndex<roomMaxLength*roomMaxLength) {
				
					if (tempTile!="@" && wallSouth!=true)
					$("#roomTile"+tempIndex).css("background", visionColor);
					
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
					
						if (allPlayers[i].playerPassives.searching!=true) {
						
							trapRoll=rollDie(10,1);
							
							if (trapRoll==1) {
							
								$("#roomTile"+tempIndex).css("background", visionColor);
								alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
								allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
							}
						
						}
						
						if (allPlayers[i].playerPassives.searching==true) {
						
							trapRoll=rollDie(2,1);
							
							if (trapRoll==1) {
							
								$("#roomTile"+tempIndex).css("background", visionColor);
								alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
								allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
							}
						
						}
					}
				
				} //in bounds
				
				//corners
				
				tempIndex=allPlayers[i].index-roomMaxLength-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				tempIndex=allPlayers[i].index-roomMaxLength+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				tempIndex=allPlayers[i].index+roomMaxLength-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
				
				tempIndex=allPlayers[i].index+roomMaxLength+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				//if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				if (tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true && allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
				
					if (allPlayers[i].playerPassives.searching!=true) {
					
						trapRoll=rollDie(10,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
					
					if (allPlayers[i].playerPassives.searching==true) {
					
						trapRoll=rollDie(2,1);
						
						if (trapRoll==1) {
						
							$("#roomTile"+tempIndex).css("background", visionColor);
							alert(allPlayers[i].playerName + "has identified a " + allRooms[currRoomIndex].roomTile[tempIndex].trapName);
							allRooms[currRoomIndex].roomTile[tempIndex].trapSeen=true;
						}
					
					}
				}
			
				/*tempIndex=allPlayers[i].index;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && whoIsActive!=i)
				$("#roomTile"+tempIndex).css("background", visionColor);
	
				//one north
				tempIndex=allPlayers[i].index-roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallNorth=true;
				
				tempIndex=allPlayers[i].index-(roomMaxLength*2);
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true)
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				//one east
				tempIndex=allPlayers[i].index+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallEast=true;
				
				tempIndex=allPlayers[i].index+2;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallEast!=true)
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				//one west
				tempIndex=allPlayers[i].index-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallWest=true;
				
				tempIndex=allPlayers[i].index-2;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallWest!=true)
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				tempIndex=allPlayers[i].index+roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallSouth=true;
				
				tempIndex=allPlayers[i].index+(roomMaxLength*2);
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				tempIndex=allPlayers[i].index-roomMaxLength-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				tempIndex=allPlayers[i].index-roomMaxLength+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				tempIndex=allPlayers[i].index+roomMaxLength-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				tempIndex=allPlayers[i].index+roomMaxLength+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				//extended range
				
				tempIndex=allPlayers[i].index+(roomMaxLength*2)+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && wallEast!=true && wallWest!=true && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				tempIndex=allPlayers[i].index+(roomMaxLength*2)-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && wallEast!=true && wallWest!=true && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				tempIndex=allPlayers[i].index-(roomMaxLength*2)+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && wallEast!=true && wallWest!=true && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				tempIndex=allPlayers[i].index-(roomMaxLength*2)-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && wallEast!=true && wallWest!=true && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				tempIndex=allPlayers[i].index+2+roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && wallEast!=true && wallWest!=true && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				tempIndex=allPlayers[i].index+2-roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && wallEast!=true && wallWest!=true && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				tempIndex=allPlayers[i].index-2+roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && wallEast!=true && wallWest!=true && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", visionColor);
				
				tempIndex=allPlayers[i].index-2-roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && wallEast!=true && wallWest!=true && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", visionColor);*/
				
			
			} //elf
		
		} //if player exists
	
	}

}

function hideVision() {

	var tempIndex=0;
	var tempTile=0;
	
	var wallNorth=false;
	var wallEast=false;
	var wallWest=false;
	var wallSouth=false;
	
	for (i=0;i<playersMax;i++) {
	
		if (allPlayers[i].playerExists==true && hasFormation==true) {
		
			if (allPlayers[i].race!=3 && allPlayers[i].race!=1) {
			
				tempIndex=allPlayers[i].index;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="+" && tempTile!="@" && whoIsActive!=i && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", tileDefColor);
	
				//one north
				tempIndex=allPlayers[i].index-roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="+" && tempTile!="@"  && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@")
				wallNorth=true;
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
				
				//one east
				tempIndex=allPlayers[i].index+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="+" && tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@")
				wallEast=true;
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
				
				//one west
				tempIndex=allPlayers[i].index-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="+" && tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@")
				wallWest=true;
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
				
				
				//one south
				tempIndex=allPlayers[i].index+roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="+" && tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@")
				wallSouth=true;
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
				
				
				//extended vision
				
				tempIndex=allPlayers[i].index-roomMaxLength-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="+" && tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
				
				tempIndex=allPlayers[i].index-roomMaxLength+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
				
				tempIndex=allPlayers[i].index+roomMaxLength-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
				
				tempIndex=allPlayers[i].index+roomMaxLength+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap!=true))
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
			
			} //non elf
			
			if (allPlayers[i].race==3 || allPlayers[i].race==1) {
			
				tempIndex=allPlayers[i].index;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && whoIsActive!=i)
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				
	
				//one north
				tempIndex=allPlayers[i].index-roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallNorth=true;
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
				
				//two north
				tempIndex=allPlayers[i].index-(roomMaxLength*2);
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempIndex>0) {
				
					if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true)
					$("#roomTile"+tempIndex).css("background", tileDefColor);
					
					if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
					$("#roomTile"+tempIndex).css("background", butDefColor);
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

						if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
							$("#roomTile"+tempIndex).css("background", trapDefColor);
						}
						
						if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
							$("#roomTile"+tempIndex).css("background", visionColor);
						}
				
					}
					
				}	
				
				//one east
				tempIndex=allPlayers[i].index+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallEast=true;
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
				
				//two east
				tempIndex=allPlayers[i].index+2;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallEast!=true)
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
				
				//one west
				tempIndex=allPlayers[i].index-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallWest=true;
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
				
				
				//two west
				tempIndex=allPlayers[i].index-2;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallWest!=true)
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
				
				
				//one south
				tempIndex=allPlayers[i].index+roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@" || (tempIndex%roomMaxLength==0 || tempIndex%roomMaxLength==15))
				wallSouth=true;
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
				
				
				//two south
				tempIndex=allPlayers[i].index+(roomMaxLength*2);
				tempTile=$("#roomTile"+tempIndex).html();
				
				if (tempIndex<roomMaxLength*roomMaxLength) {
			
					if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallSouth!=true)
					$("#roomTile"+tempIndex).css("background", tileDefColor);
					
					if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
					$("#roomTile"+tempIndex).css("background", butDefColor);
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

						if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
							$("#roomTile"+tempIndex).css("background", trapDefColor);
						}
						
						if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
							$("#roomTile"+tempIndex).css("background", visionColor);
						}
				
					}
				
				}
				
				//extended vision
				
				tempIndex=allPlayers[i].index-roomMaxLength-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
				
			
				
				tempIndex=allPlayers[i].index-roomMaxLength+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
				
				tempIndex=allPlayers[i].index+roomMaxLength-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
				
				tempIndex=allPlayers[i].index+roomMaxLength+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", tileDefColor);
			
				if (tempTile=="+" || tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│")
				$("#roomTile"+tempIndex).css("background", butDefColor);
				
				if (allRooms[currRoomIndex].roomTile[tempIndex].hasTrap==true ) {

					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen!=true) {
						$("#roomTile"+tempIndex).css("background", trapDefColor);
					}
					
					if (allRooms[currRoomIndex].roomTile[tempIndex].trapSeen==true) {
						$("#roomTile"+tempIndex).css("background", visionColor);
					}
			
				}
			
				/*tempIndex=allPlayers[i].index;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && whoIsActive!=i)
				$("#roomTile"+tempIndex).css("background", tileDefColor);
	
				//one north
				tempIndex=allPlayers[i].index-roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@")
				wallNorth=true;
				
				tempIndex=allPlayers[i].index-(roomMaxLength*2);
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true)
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				//one east
				tempIndex=allPlayers[i].index+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@")
				wallEast=true;
				
				tempIndex=allPlayers[i].index+2;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallEast!=true)
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				//one west
				tempIndex=allPlayers[i].index-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@")
				wallWest=true;
				
				tempIndex=allPlayers[i].index-2;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallWest!=true)
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				tempIndex=allPlayers[i].index+roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="+" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				if (tempTile=="┐" || tempTile=="└" || tempTile=="┘" || tempTile=="┌" || tempTile=="─" || tempTile=="│" || tempTile=="+" || tempTile=="@")
				wallSouth=true;
				
				tempIndex=allPlayers[i].index+(roomMaxLength*2);
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				tempIndex=allPlayers[i].index-roomMaxLength-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="+" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				tempIndex=allPlayers[i].index-roomMaxLength+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				tempIndex=allPlayers[i].index+roomMaxLength-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				tempIndex=allPlayers[i].index+roomMaxLength+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@")
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				//extended vision
				
				tempIndex=allPlayers[i].index+(roomMaxLength*2)+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && wallEast!=true && wallWest!=true && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				tempIndex=allPlayers[i].index+(roomMaxLength*2)-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && wallEast!=true && wallWest!=true && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				tempIndex=allPlayers[i].index-(roomMaxLength*2)+1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && wallEast!=true && wallWest!=true && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				tempIndex=allPlayers[i].index-(roomMaxLength*2)-1;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && wallEast!=true && wallWest!=true && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				tempIndex=allPlayers[i].index+2+roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && wallEast!=true && wallWest!=true && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				tempIndex=allPlayers[i].index+2-roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && wallEast!=true && wallWest!=true && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				tempIndex=allPlayers[i].index-2+roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && wallEast!=true && wallWest!=true && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", tileDefColor);
				
				tempIndex=allPlayers[i].index-2-roomMaxLength;
				tempTile=$("#roomTile"+tempIndex).html();
			
				if (tempTile!="┐" && tempTile!="└" && tempTile!="┘" && tempTile!="┌" && tempTile!="─" && tempTile!="│" && tempTile!="@" && wallNorth!=true && wallEast!=true && wallWest!=true && wallSouth!=true)
				$("#roomTile"+tempIndex).css("background", tileDefColor);*/
				
			
			} //elf
		
		} //if player exists
	
	}

}

function trapSpawn() {

	var trapAmount=0;
	var trapProb=0;
	var spawnTile=0;
	var spawnArrLength=allRooms[currRoomIndex].spawnArray.length;
	spawnArrLength--;
	var spawnInd;
	
	trapProb=rollDie(10,1);
	
	if (trapProb<8) {
	
		console.log("spawning traps");
		trapAmount=rollDie(4,1,3);
		
		for (i=0;i<trapAmount;i++) {
		
			//choose an open space
			spawnInd=rollDie0(spawnArrLength,1);
			spawnTile=allRooms[currRoomIndex].spawnArray[spawnInd];
			
			//check if on unoccupied space
			while ( $("#roomTile"+spawnTile).html()!="") {
			
				spawnInd=rollDie0(spawnArrLength,1);
				spawnTile=allRooms[currRoomIndex].spawnArray[spawnInd];
				//console.log($("#roomTile"+spawnTile).html());
			}
			
			//create item on chosen tile
			trapGen(spawnTile);
			$("#roomTile" + spawnTile).html(allRooms[currRoomIndex].roomTraps[i].trapSymbol);
			
			//make tile red
			$("#roomTile" + spawnTile).css("background", trapDefColor);
			
			allRooms[currRoomIndex].roomTile[spawnTile].hasTrap=true;
			allRooms[currRoomIndex].roomTile[spawnTile].trapSymbol=allRooms[currRoomIndex].roomTraps[i].trapSymbol;
			allRooms[currRoomIndex].roomTile[spawnTile].trapName=allRooms[currRoomIndex].roomTraps[i].trapName;
			
		} //trap amount
	
	} //trap probability
	
	updateTraps();

}

function trapGen(spawnTile) {

	whichTrap=rollDie(22,1);

	//quicksand
	if (whichTrap<=1) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "quicksand trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//curse item
	else if (whichTrap==2) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "curse item trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//drain energy
	else if (whichTrap==3) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "drain energy trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//bear trap
	else if (whichTrap==4) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "bear trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//reduce str
	else if (whichTrap==5) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "reduce str trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//reduce dex
	else if (whichTrap==6) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "reduce dex trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//reduce int
	else if (whichTrap==7) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "reduce int trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//reduce wis
	else if (whichTrap==8) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "reduce wis trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//reduce con
	else if (whichTrap==9) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "reduce con trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//arrow
	else if (whichTrap==10) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "arrow trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//chest explode
	else if (whichTrap==11) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "chest explode trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//landmine
	else if (whichTrap==12) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "landmine",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//poison gas
	else if (whichTrap==13) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "poison gas trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//sleeping gas
	else if (whichTrap==14) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "sleeping gas trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//confusion gas
	else if (whichTrap==15) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "confusion gas trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//reduce max hp
	else if (whichTrap==16) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "reduce max hp trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//hole
	else if (whichTrap==17) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "hole",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//teleport
	else if (whichTrap==18) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "teleport trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//web
	else if (whichTrap==19) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "web trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//erode
	else if (whichTrap==20) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "erosion trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//silence
	else if (whichTrap==21) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "silence trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
	
	//reduce max energy
	else if (whichTrap==22) {
	
		allRooms[currRoomIndex].roomTraps.push({
				
			trapName: "reduce max energy trap",
			trapSymbol: "^",
			index: spawnTile,
			trapExists:true,
			trapColor:trapDefColor,
			seen:false,
		});
	
	}
}

function updateTraps() {

	var tempStat="";
	var tempNum=0;
	
	//tab titles
	for (i=0;i<10;i++) {
	
	
		if (allRooms[currRoomIndex].roomTraps.length>i) {
	
			if (allRooms[currRoomIndex].roomTraps[i].trapExists==true) {
			
				tempStat+=allRooms[currRoomIndex].roomTraps[i].trapName;
			
				
				//tempStat=tempStat.replace(" trap", "");
			
				$('#trapsTabs ul:first li:eq(' + i + ') a').text(tempStat);
				
				tempStat="";
			
			}
			
		
		}	
		
		
		if (allRooms[currRoomIndex].roomTraps.length<=i) {
		
			tempNum=i;
			tempNum++;
			$('#trapsTabs ul:first li:eq(' + i + ') a').text("Trap " + tempNum);
		}
	
	}
	
	if (allRooms[currRoomIndex].roomTraps.length>trapActive) {
	
		if (allRooms[currRoomIndex].roomTraps[trapActive].trapExists==true) {
		
		
			
			
			tempStat="Index: ";
			tempStat+=allRooms[currRoomIndex].roomTraps[trapActive].index;
			$("#trapIndex").html(tempStat);

		
		} //if trap exists
	
	}
	
	else if (allRooms[currRoomIndex].roomTraps.length<=trapActive) {
	

		$("#trapName").html("");
		
		tempStat="Index: ";
		$("#trapIndex").html(tempStat);

	}
	
	
}

$( "#trapsTabs" ).tabs({
  beforeActivate: function( event, ui ) {
  
	
	var tabCmp=ui.newPanel.attr('id'); //for comparing tab id
	
	//alert(ui.newPanel.attr('id'));
	
	if (tabCmp=="trapsTabs-1")
	{
		trapActive=0;

		updateTraps();
	}
	
	if (tabCmp=="trapsTabs-2")
	{
		trapActive=1;
		
		updateTraps();
	}
	
	if (tabCmp=="trapsTabs-3")
	{
		trapActive=2;
		
		updateTraps();
	}
	
	if (tabCmp=="trapsTabs-4")
	{
		trapActive=3;

		updateTraps();
	}
	
	if (tabCmp=="trapsTabs-5")
	{
		trapActive=4;
		
		updateTraps();
	}	
	
	if (tabCmp=="trapsTabs-6")
	{
		trapActive=5;
		
		updateTraps();
	}
	
	if (tabCmp=="trapsTabs-7")
	{
		trapActive=6;
		
		updateTraps();
		
	}
	
	if (tabCmp=="trapsTabs-8")
	{
		trapActive=7;
		updateTraps();
	}
	
	if (tabCmp=="trapsTabs-9")
	{
		trapActive=8;
		updateTraps();
	}
	
	if (tabCmp=="trapsTabs-10")
	{
		trapActive=9;
		updateTraps();
	}
	
	
	
	
	//select room tile
	if (allRooms[currRoomIndex].roomTraps.length>trapActive) {
	
		if (allRooms[currRoomIndex].roomTraps[trapActive].trapExists==true) {
		
			if (allRooms[currRoomIndex].roomTraps[trapActive].index>0) {
			
				//reset previous current tile color
				$("#roomTile"+roomTileIndex).css("background", tileDefColor);
				
				//color if trap
				if (roomTileIndex>0) {
	
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasTrap==true) {
						$("#roomTile"+roomTileIndex).css("background", trapDefColor);
					}
				
				}
				
				
				roomTileIndex=allRooms[currRoomIndex].roomTraps[trapActive].index;
				$("#roomTile"+roomTileIndex).css("background", butSelColor);
				
			}
		}
	
	}
	
	if (allRooms[currRoomIndex].roomTraps.length<=trapActive) {
	
		$("#roomTile"+roomTileIndex).css("background", tileDefColor);
		
		
	
	}
	
	
  }
});


function itemSpawn() {

	var itemAmount=0;
	var itemProb=0;
	var spawnTile=0;
	var spawnArrLength=allRooms[currRoomIndex].spawnArray.length;
	spawnArrLength--;
	var spawnInd;
	
	itemProb=rollDie(10,1);
	
	if (itemProb<8) {
	
		console.log("spawning items");
		itemAmount=rollDie(5,1);
		
		for (i=0;i<itemAmount;i++) {
		
			//choose an open space
			spawnInd=rollDie0(spawnArrLength,1);
			spawnTile=allRooms[currRoomIndex].spawnArray[spawnInd];
			
			//check if on unoccupied space
			while ( $("#roomTile"+spawnTile).html()!="") {
			
				spawnInd=rollDie0(spawnArrLength,1);
				spawnTile=allRooms[currRoomIndex].spawnArray[spawnInd];
				//console.log($("#roomTile"+spawnTile).html());
			}
			
			//create item on chosen tile
			itemGen(spawnTile);
			$("#roomTile" + spawnTile).html(allRooms[currRoomIndex].roomItems[i].itemSymbol);
			
			allRooms[currRoomIndex].roomTile[spawnTile].hasItem=true;
			allRooms[currRoomIndex].roomTile[spawnTile].itemSymbol=allRooms[currRoomIndex].roomItems[i].itemSymbol;
			
		} //item amount
	
	} //item probability
	
	updateItem();

}

function itemGen(spawnTile) {

	var itemType=rollDie(100,1);
	var bucRoll=rollDie(100,1);
	var buc=0; //0 for uncursed, 1 for blessed, 2 for cursed
	var enhance=0; // +/-
	var enhanceRoll=0;
	var tempRoll=0; //for whatever
	var whichItem=0;
	var amountRoll=rollDie(5,1);
	
	//weapons 8%
	//armor 8%
	//arrows 4%
	//gold 5%
	//tools 5%
	//food 15%
	//scrolls 15%
	//potions 20%
	//spellbooks 4%
	//amulets 3%
	//rings 5%
	//wands 8%
	
	if (bucRoll<=75) //uncursed, 75%
	{
		buc=0;
	}
	
	else if (bucRoll<=85) //blessed, 10%
	{
		buc=1;
	}
	
	else if (bucRoll<=100) //cursed, 15%
	{
		buc=2;
	}
	
	//itemType=5; //weapon test
	//itemType=rollDie(20,1); //weapon/armor test
	
	//weapons 10%
	if (itemType<=8) {
	
		//enhancement
		
		if (buc==0)
		{
			//uncursed, +2 to -2
			enhanceRoll=rollDie(3,1);
			enhanceRoll--;
			
			tempRoll=rollDie(100,1);
			
			//70% chance of no enhance
			if (tempRoll<=70)
			{
				enhanceRoll=0;
			}
			
			//negative enhance, 15%
			else if (tempRoll<=85)
			{
				if (enhanceRoll>0)
				{
					let negEnhance=enhanceRoll*2;
					enhanceRoll-=negEnhance;
				}
			}
		}
		
		if (buc==1)
		{
			
			//blessed
			enhanceRoll=rollDie(3,1);
			enhanceRoll--;
			
		}
		
		if (buc==2)
		{
			//cursed, give negative enhance
			enhanceRoll-=rollDie(3,1);
		}
		
		//dagger 15%
		//sword 15%
		//axe 15%
		//hammer 15%
		//spear 10%
		//staff 10%	
		//polearm 10%
		//bow 10%
		
		whichItem=rollDie(100,1);
		
		//whichItem=15; //dagger test
		
		//daggers, 15%
		if (whichItem<=15) {
		
			//crude dagger 30%
			//dagger 10%
			//throwing knife 10%
			//stiletto 10%
			//orcish dagger 7%
			//elven dagger 7%
			//dwarven dagger 7%
			//silver dagger 6%
			//mithril dagger 5%
			//rondel 5%
			//peshkabz 3%
		
			whichItem=rollDie(100,1);
			
			//whichItem=35;
			
			//crude
			if (whichItem<=30) {
			
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "crude dagger",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
				
				/*allRooms[currRoomIndex].roomTile[spawnTile].tileItemArr.push({
				
					itemSymbol:"[",
				
				});*/
			
			} //crude
			
			//throwing, 10%
			else if (whichItem<=40) {
			
				if (amountRoll==1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "throwing knife",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
				
				else if (amountRoll>1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "throwing knives",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}

			} //throwing
			
			//dagger, 10%
			else if (whichItem<=50) {
			
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "dagger",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			
			} //dagger
			
			//stiletto, 10%
			else if (whichItem<=60) {
			
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "stiletto",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			
			} //stiletto
			
			//orcish, 7%
			else if (whichItem<=67) {
			
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "orcish dagger",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			
			} //orcish
			
			//elven, 7%
			else if (whichItem<=74) {
			
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "elven dagger",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			
			} //elven
			
			//dwarven, 7%
			else if (whichItem<=81) {
			
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "dwarven dagger",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			
			} //dwarven
			
			//silver, 6%
			else if (whichItem<=87) {
			
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "silver dagger",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			
			} //silver
			
			//mithril, 5%
			else if (whichItem<=92) {
			
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "mithril dagger",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			
			} //mithril
			
			//rondel, 5%
			else if (whichItem<=97) {
			
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "rondel",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			
			} //rondel
			
			//peshkabz, 5%
			else if (whichItem<=100) {
			
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "peshkabz",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			
			} //peshkabz
		
		} //daggers
		
		//swords, 15%
		else if (whichItem<=30) {
		
			//crude sword 35%
			//shortsword 10%
			//longsword 10%
			//two-handed sword (zweihander) 10%
			//claymore 10%
			//orcish blade 5%
			//elven blade 5%
			//dwarven blade 5%
			//scimitar 5%
			//silver saber 3%
			//mithril saber 2%
			
			whichItem=rollDie(100,1);
			
			if (whichItem<=5) //dwarven
			{
			
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "dwarven blade",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=40) //crude
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "crude sword",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=50) //shortsword
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "shortsword",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=60) //longsword
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "longsword",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=70) //two-handed
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "zweihander",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=80) //claymore
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "claymore",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=85) //orcish
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "orcish blade",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=90) //elven
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "elven blade",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=95) //scimitar
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "scimitar",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=98) //silver saber
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "silver saber",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=100) //mithril saber
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "mithril saber",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
		
		}
		
		//axes, 15%
		else if (whichItem<=45) {
		
			//crude axe 30%
			//battle axe 15%
			//tomohawk 10%
			//francisca 10%
			//double-bearded axe 7%
			//tabar 5%
			//dwarven axe 5%
			//orcish axe 5%
			//elven axe 5%
			//silver axe 5%
			//mithril axe 3%
			
			whichItem=rollDie(100,1);
			
			if (whichItem<=5) //dwarven
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "dwarven axe",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=35) //crude
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "crude axe",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=40) //tabar
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "tabar",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=55) //battle axe
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "battle axe",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=65) //tomohawk
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "tomohawk",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=75) //francisca
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "francisca",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=82) //double-bearded axe
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "double-bearded axe",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=87) //orcish
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "orcish axe",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=92) //elven
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "elven axe",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=97) //silver
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "silver axe",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=100) //mithril
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "mithril axe",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
		
		}
		
		//bludgeons, 15%
		else if (whichItem<=60) {
		
			//crude hammer, 40%
			//mace, 15%
			//morningstar, 15%
			//war hammer, 10%
			//orcish hammer, 5%
			//elven hammer, 5%
			//dwarven hammer, 5%
			//silver hammer, 3%
			//mithril hammer, 2%
			
			whichItem=rollDie(100,1);
			
			if (whichItem<=40) //crude
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "crude hammer",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=55) //mace
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "mace",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=70) //morningstar
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "morningstar",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=80) //war hammer
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "warhammer",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=85) //elven
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "elven hammer",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=90) //orcish
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "orcish hammer",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=95) //dwarven
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "dwarven hammer",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=98) //silver
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "silver hammer",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=100) //mithril
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "mithril hammer",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
		
		}
		
		//spears, 10%
		else if (whichItem<=70) {
		
			//crude spear 40%
			//sarissa 15%
			//javelin 10%
			//pilum 10%
			//falarica 5%
			//elven spear 5%
			//orcish spear 5%
			//dwarven spear 5%
			//silver spear 3%
			//mithril spear 2%
			
			whichItem=rollDie(100,1);
			
			if (whichItem<=40) //crude
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "crude spear",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=55) //sarissa
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "sarissa",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=60) //falarica
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "falarica",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=70) //javelin
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "javelin",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=80) //pilum
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "pilum",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=85) //elven
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "elven spear",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=90) //orcish
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "orcish spear",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=95) //dwarven
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "dwarven spear",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=98) //silver
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "silver spear",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=100) //mithril
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "mithril spear",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
		
		}
		
		//polearms, 10%
		else if (whichItem<=80) {
		
			//crude polearm 35%
			//halberd 15%
			//bec-de-corbin 15%
			//ranseur 10%
			//spetum 5%
			//glaive 5%
			//lucern 5%
			//bill-guisarme 5%
			//bardiche (silver) 3%
			//voulge (mithril) 2%
			
			whichItem=rollDie(100,1);
			
			if (whichItem<=35) //crude
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "crude polearm",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=50) //halberd
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "halberd",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=65) //bec
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "bec-de-corbin",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=75) //ranseur
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "ranseur",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=80) //spetum
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "spetum",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=85) //glaive
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "glaive",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=90) //lucerne
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "lucerne",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=95) //bill guisarme
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "bill-guisarme",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=98) //bardiche
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "bardiche",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=100) //voulge
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "voulge",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
		
		}
		
		//staff, 10%
		else if (whichItem<=90) {
		
			//crude staff 60%
			//acolyte's staff 10%
			//runed staff 10%
			//quarterstaff 10%
			//magister's staff 6%
			//puissant staff 4%
			
			whichItem=rollDie(100,1);
			
			if (whichItem<=60) //crude
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "crude staff",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=70) //acolyte
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "acolyte",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=80) //runed
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "runed staff",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=90) //quarterstaff
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "quarterstaff",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=96) //magister
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "magister's staff",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=100) //puissant
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "puissant staff",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
				
			}
		
		}
		
		//bows, 10%
		else if (whichItem<=100) {
		
			//crude bow 35%
			//bow 15%
			//elven bow 10%
			//orcish bow 10%
			//crossbow 10%
			//sniper crossbow 10%
			//avelyn 4%
			//silver bow 3%
			//mithril bow 3%
			
			whichItem=rollDie(100,1);
		
			if (whichItem<=35) //crude bow
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "crude bow",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=50) //bow
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "bow",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=60) //elven bow
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "elven bow",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=70) //orcish bow
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "orcish bow",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=80) //crossbow
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "crossbow",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=90) //sniper crossbow
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "sniper crossbow",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=94) //avelyn
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "avelyn",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=97) //silver bow
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "silver bow",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
			
			else if (whichItem<=100) //mithril bow
			{
				allRooms[currRoomIndex].roomItems.push({
				
					itemName: "mithril bow",
					itemSymbol: "[",
					BUC: buc,
					enhancement:enhanceRoll ,
					index: spawnTile,
					itemExists:true,
					amount:1,
				
				});
			}
		
		}
	
	} //weapons
	
	//armor 8%
	else if (itemType<=16) {
	
		//enhancement
		
		if (buc==0)
		{
			//uncursed, +2 to -2
			enhanceRoll=rollDie(3,1);
			enhanceRoll--;
			
			tempRoll=rollDie(100,1);
			
			//70% chance of no enhance
			if (tempRoll<=70)
			{
				enhanceRoll=0;
			}
			
			//negative enhance, 10%
			else if (tempRoll<=85)
			{
				if (enhanceRoll>0)
				{
					let negEnhance=enhanceRoll*2;
					enhanceRoll-=negEnhance;
				}
			}
		}
		
		if (buc==1)
		{
			
			//blessed
			enhanceRoll=rollDie(3,1);
			enhanceRoll--;
			
		}
		
		if (buc==2)
		{
			//cursed, give negative enhance
			enhanceRoll-=rollDie(3,1);
		}
		
		//shirt 5%
		//body 15%
		//helm 20%
		//boots 20%
		//gloves 20%
		//shield 15%	
		//cloak 5%
		
		whichItem=rollDie(100,1);
		
		//helms
		if (whichItem<=20) {
		
			//leather helm 30%
			//studded leather helm 15%
			//pointy hat 15%
			//elven helm  10%
			//orcish helm 10%
			//dwarven helm 10%
			//great helm 5%
			//mithril helm 3%
			//piquant hat 2%
			
			
			whichItem=rollDie(100,1);
			
			if (whichItem<=30) //leather
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "leather helm",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=45) //studded leather
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "studded leather helm",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=60) //pointy hat
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "pointy hat",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=70) //elven helm
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "elven helm",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=80) //orcish helm
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "orcish helm",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=90) //dwarven helm
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "dwarven helm",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=95) //great helm
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "great helm",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=98) //mithril helm
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "mithril helm",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=100) //piquant hat
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "piquant hat",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
		
		}
		
		//boots
		else if (whichItem<=40) {	
		
			//boots 30%
			//plate greaves 15%
			//dash shoes 5%
			//fumble shoes 15% always cursed
			//water walking 5%
			//hover shoes 5%
			//shoes of speed 5%
			//shoes of slow 15% always cursed
			//mithril shoes 5%
			
			whichItem=rollDie(100,1);
			
			if (whichItem<=30) //boots
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "boots",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=45) //plate greaves
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "plate greaves",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=60) //fumble
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "fumble shoes",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=65) //water walking
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "water walking shoes",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=80) //slow
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "shoes of slow",
						itemSymbol: "&",
						BUC: 2,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=85) //dash
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "dash shoes",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=90) //hover
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "hover shoes",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=95) //speed
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "shoes of speed",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=100) //mithril
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "mithril shoes",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
		
		}
		
		//gloves
		else if (whichItem<=60) {
		
			//leather gloves 30%
			//studded leather gloves 15%
			//cestus 10%
			//gauntlet 10%
			//mittens 5%
			//gloves of throwing 5%
			//gloves of power 5%
			//gloves of dexterity 5%
			//gloves of fumbling 15% always cursed
		
			whichItem=rollDie(100,1);
			
			if (whichItem<=30) //leather gloves
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "leather gloves",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=45) //studded leather gloves
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "studded leather gloves",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=55) //cestus
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "cestus",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=65) //gauntlet
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "gauntlet",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=70) //mittens
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "mittens",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=75) //gloves of throwing
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "gloves of throwing",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=80) //gloves of power
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "gloves of power",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=85) //gloves of dexterity
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "gloves of dexterity",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=100) //fumbling
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "gloves of fumbling",
						itemSymbol: "&",
						BUC: 2,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
		
		}
		
		//body
		else if (whichItem<=75) {
		
			//leather armor 30%
			//studded leather armor 15%
			//scale armor 10%
			//chain mail 10%
			//splint mail 10%
			//plate armor 5%
			//elven mail 5%
			//orcish mail 5%
			//dwarven mail 5%
			//mithril coat 3%
			//crystal plate mail 2%
		
			whichItem=rollDie(100,1);
			
			if (whichItem<=30) //leather
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "leather armor",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=45) //studded leather
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "studded leather armor",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=55) //scale armor
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "scale armor",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=65) //chain mail
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "chain mail",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=75) //splint mail
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "splint mail",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=80) //plate armor
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "plate armor",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=85) //elven mail
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "elven coat",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=90) //orcish mail
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "orcish armor",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=95) //dwarven mail
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "dwarven mail",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=98) //mithril coat
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "mithril coat",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=100) //crystal plate mail
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "crystal plate mail",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			
			}
		
		}
		
		//shield
		else if (whichItem<=90) {
		
			//leather shield 30%
			//round shield 15%
			//kite shield 10%
			//great shield 10%
			//elven shield 10%
			//orcish shield 10%
			//dwarven shield 10%
			//mithril shield 5%
			
			whichItem=rollDie(100,1);
			
			if (whichItem<=30) //leather
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "leather shield",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});	
			
			}
			
			else if (whichItem<=45) //round
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "round shield",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});		
			}
			
			else if (whichItem<=55) //kite
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "kite shield",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});		
			}
			
			else if (whichItem<=65) //great
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "great shield",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});	
			}
			
			else if (whichItem<=75) //elven
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "elven shield",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});	
			}
			
			else if (whichItem<=85) //orcish
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "orcish shield",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});		
			}
			
			else if (whichItem<=95) //dwarven
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "dwarven shield",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});		
			}
			
			else if (whichItem<=100) //mithril
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "mithril shield",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});		
			}
		
		}
		
		//shirt
		else if (whichItem<=95) {
		
			//tunic 47%
			//hawaiian shirt 47%
			//mithril shirt 3%
		
			whichItem=rollDie(100,1);
			
			if (whichItem<=47) //tunic
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "tunic",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=94) //hawaiian shirt
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "hawaiian shirt",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=100) //mithril shirt
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "mithril shirt",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			
			}
		
		}
		
		//cloak
		else if (whichItem<=100) {
		
			//leather cloak 30%
			//magic resistance 5%
			//faded 5%
			//channeling 5%
			//invisibility 5%
			//smock 5%
			//protection 5%
			//cold immunity 5%
			//fire immunity 5%
			//shock immunity 5%
			//scented 10%
			//drain immunity 5%
			//reflection 2%
			//disintegration resistance 3%
			//brisk 5%
			
			whichItem=rollDie(100,1);
			
			if (whichItem<=30) //leather
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "leather cloak",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=35) //drain immunity
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "cloak of drain immunity",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=37) //reflection
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "cloak of reflection",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=40) //disintegration resistance
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "cloak of disintegration resistance",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=45) //brisk
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "cloak of brisk",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=55) //scented
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "scented cloak",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=60) //smock
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "smock",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=65) //invisibility
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "invisibility cloak",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=70) //magic resistance
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "cloak of magic resistance",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=75) //faded
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "faded cloak",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=80) //channeling
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "channeling robe",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=85) //protection
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "cloak of protection",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=90) //fire immunity
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "cloak of fire immunity",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=95) //cold immunity
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "cloak of cold immunity",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
			
			else if (whichItem<=100) //shock immunity
			{
				allRooms[currRoomIndex].roomItems.push({
					
						itemName: "cloak of shock immunity",
						itemSymbol: "&",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:1,
					
				});
			}
		
		}
	
	}
	
	//arrows 4%
	else if (itemType<=20) {
	
		//crude arrow 30%
		//arrow 20%
		//elven arrow 10%
		//orcish arrow 10%
		//crossbow bolt 10%
		//poisoned arrow 10%
		//silver arrow 6%
		//mithril arrow 4%
	
		whichItem=rollDie(100,1);
	
			if (whichItem<=30) //crude arrows
			{
				if (amountRoll==1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "crude arrow",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
				
				else if (amountRoll>1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "crude arrows",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
			}
			
			
			else if (whichItem<=50) //arrows
			{
				if (amountRoll==1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "arrow",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
				
				else if (amountRoll>1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "arrows",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
			}
			
			else if (whichItem<=60) //elven arrows
			{
				if (amountRoll==1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "elven arrow",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
				
				else if (amountRoll>1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "elven arrows",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
			}
			
			else if (whichItem<=70) //orcish arrows
			{
				if (amountRoll==1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "orcish arrow",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
				
				else if (amountRoll>1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "orcish arrows",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
			}
			
			else if (whichItem<=80) //crossbow bolts
			{
				if (amountRoll==1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "crossbow bolt",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
				
				else if (amountRoll>1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "crossbow bolts",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
			}
			
			else if (whichItem<=90) //poisoned arrows
			{
				if (amountRoll==1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "poisoned arrow",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
				
				else if (amountRoll>1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "poisoned arrows",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
			}
			
			else if (whichItem<=96) //silver arrows
			{
				if (amountRoll==1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "silver arrow",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
				
				else if (amountRoll>1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "silver arrows",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
			}
			
			else if (whichItem<=100) //mithril arrows
			{
				if (amountRoll==1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "mithril arrow",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
				
				else if (amountRoll>1) {
			
					allRooms[currRoomIndex].roomItems.push({
					
						itemName: "mithril arrows",
						itemSymbol: "[",
						BUC: buc,
						enhancement:enhanceRoll ,
						index: spawnTile,
						itemExists:true,
						amount:amountRoll,
					
					});
				
				}
			
			}
	
	}
	
	//gold 5%
	else if (itemType<=25) {
	
	
		//to do
		//fix gold
		
		let goldAmount=rollDie(100,1);
		
		allRooms[currRoomIndex].roomItems.push({
					
			itemName: goldAmount + " gold",
			itemSymbol: "$",
			BUC: 0,
			enhancement:0 ,
			index: spawnTile,
			itemExists:true,
			amount:1,
			isGold:true,
					
		});
	
	}
	
	//tools 5%
	else if (itemType<=30) {
	
		//chest 25%
	
		//bag of tricks 5%
		//bugle 5%
		//harp 5%
		//stehoscope 5%
		//oil lamp 5%
		//lock pick 5%
		//pan 3%
		//skeleton key 2%
		//bag 5%
		//blindfold 5%
		//bag of holding 2%
		//crystal ball 5%
		//tinning kit 5%
		//tin opener 5%
		//magic marker 5%
		//bandage 8%
		
		whichItem=rollDie(100,1);
		
		if (whichItem<=25) //chest
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "chest",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
				isChest:true,
					
			});
		}
		
		else if (whichItem<=33) //bandage
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "bandage",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
					
			});
		}
		
		else if (whichItem<=38) //tricks
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "bag of tricks",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
					
			});
		}
		
		else if (whichItem<=43) //bugle
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "bugle",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
					
			});
		}
		
		else if (whichItem<=45) //bag of holding
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "bag of holding",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
					
			});
		}
		
		else if (whichItem<=50) //harp
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "harp",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
					
			});
		}
		
		else if (whichItem<=55) //stethoscope
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "stethoscope",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
					
			});
		}
		
		else if (whichItem<=60) //lamp
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "oil lamp",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
					
			});
		}
		
		else if (whichItem<=65) //lockpick
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "lockpick",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
					
			});
		}
		
		else if (whichItem<=68) //pan
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "pan",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
					
			});
		}
		
		else if (whichItem<=70) //skeleton key
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "skeleton",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
					
			});
		}
		
		else if (whichItem<=75) //bag
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "bag",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
					
			});
		}
		
		else if (whichItem<=80) //blindfold
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "blindfold",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
					
			});
		}
		
		else if (whichItem<=85) //palantir
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "crystal ball",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
					
			});
		}
		
		else if (whichItem<=90) //tinning kit
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "tinning kit",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
					
			});
		}
		
		else if (whichItem<=95) //tin opener
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "tin opener",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
					
			});
		}
		
		else if (whichItem<=100) //magic marker
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "magic marker",
				itemSymbol: "#",
				BUC: buc,
				enhancement:0,
				index: spawnTile,
				itemExists:true,
				amount:1,
					
			});
		}
	
	}
	
	//food 15%
	else if (itemType<=45) {
	
		/*
		apple  5%
		orange  5%
		banana  5%
		pear  5%
		candy bar  5%
		fortune cookie 5% 
		food ration 5% 
		pancake  5%
		melon  5%
		meatball 5% 
		egg  5%
		clove of garlic 5% 
		lembas wafer  5%
		pickle  3%
		piece of texas toast 3%  
		tin of spinach  3%
		tin of pickled fish lips 3%  
		cookie  3%
		onion  2%
		chicken finger 2%
		box combo 2%
		spicy meatball sub  2%
		chicken soft taco  2%
		breakfast burrito 2%  
		turkey leg  2%
		pizza slice 2%
		cheeseburger  2%
		slab of roast beef 2%
		*/
	
		
		whichItem=rollDie(100,1);
		
		if (whichItem<=5) //apple
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "apple",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=10) //orange
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "orange",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=15) //banana
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "banana",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=20) //pear
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "pear",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=25) //candy bar
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "candy bar",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=30) //fortune cookie
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "fortune cookie",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=35) //food ration
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "food ration",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=40) //pancake
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "pancake",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=45) //melon
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "melon",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=50) //meatball
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "meatball",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=55) //egg
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "deviled egg",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=60) //garlic
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "clove of garlic",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=65) //lembas wafer
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "lembas wafer",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=68) //pickle
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "pickle",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=71) //toast
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "texas toast",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=74) //spinach
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "tin of spinach",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=77) //fish lips
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "tin of pickled fish lips",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=80) //cookie
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "cookie",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=82) //onion
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "onion",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=84) //chicken finger
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "chicken finger",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=86) //box combo
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "box combo",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=88) //meatball sub
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "meatball sub",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=90) //taco
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "chicken soft taco",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=92) //burrito
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "breakfast burrito",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=94) //turkey
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "turkey leg",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=96) //pizza
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "pizza slice",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=98) //burger
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "cheeseburger",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
		
		else if (whichItem<=100) //beef
		{
			allRooms[currRoomIndex].roomItems.push({
					
						itemName: "slab of roast beef",
						itemSymbol: "%",
						BUC: buc,
						enhancement:0 ,
						index: spawnTile,
						itemExists:true,
						amount:1,
						isFood:true,
					
			});
		}
	
	}
	
	//scrolls 15%
	else if (itemType<=60) {
	
		/*
		Blank 10%
		Identify 10%
		Light 10%
		Amnesia 10%
		Punishment 10%
		Displacement 5%
		Enhance Weapon 5%
		Enhance Armor 5%
		Remove Curse 5%
		Mapping 5%
		Food Detection 5%
		Paralysis 5%
		Charging 5%
		Poison Mist 5%
		Teleportation 5%
		*/
	
		whichItem=rollDie(100,1);
	
		let scrollOf="scroll of ";
		
		if (whichItem<=10) //blank
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: "blank scroll",
				itemSymbol: "?",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=20) //identify
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: scrollOf + "identify",
				itemSymbol: "?",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=30) //light
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: scrollOf + "light",
				itemSymbol: "?",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=40) //amnesia
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: scrollOf + "amnesia",
				itemSymbol: "?",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=50) //punishment
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: scrollOf + "punishment",
				itemSymbol: "?",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=55) //displacement
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: scrollOf + "displacement",
				itemSymbol: "?",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=60) //enhance weapon
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: scrollOf + "enhance weapon",
				itemSymbol: "?",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=65) //enhance armor
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: scrollOf + "enhance armor",
				itemSymbol: "?",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=70) //remove curse
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: scrollOf + "remove curse",
				itemSymbol: "?",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=75) //mapping
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: scrollOf + "mapping",
				itemSymbol: "?",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=80) //food detection
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: scrollOf + "food detection",
				itemSymbol: "?",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=85) //paralysis
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: scrollOf + "paralysis",
				itemSymbol: "?",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=90) //charging
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: scrollOf + "charging",
				itemSymbol: "?",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=95) //poison mist
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: scrollOf + "poison mist",
				itemSymbol: "?",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=100) //teleport
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: scrollOf + "teleport",
				itemSymbol: "?",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
	
	}
	
	//potions 20%
	else if (itemType<=80) {
	
		/*
		Panacea 4%
		Healing 4%
	 	Full healing 4%
		Water 4%
		Old English 4%
		Cranberry juice 4%
		See invisible 4%
		Silence 4%
		Confusion 4%
		Restore energy 4%
		Hallucination 4%
		Invisibility 4%
		Blindness 4%
		ESP 4%
		Object detection 4%
		Enlightenment 4%
		Levitation 4%
		Brisk 4%
		Haste 4%
		Acid 4%
		Oil 4%
		Paralysis 4%
		Gain level 4%
		Gain ability 4%
		Poison	4%
		*/
		
		whichItem=rollDie(100,1);
		
		let potionOf="potion of ";
		
		if (whichItem<=4) //panacea
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "panacea",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=8) //healing
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "healing",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=12) //full healing
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "full healing",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=16) //water
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "water",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=20) //olde english
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "olde english",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=24) //cranberry juice
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "juice",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=28) //see invisible
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "see invisible",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=32) //silence
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "silence",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=36) //confusion
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "confusion",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=40) //restore energy
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "restore energy",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=44) //hallucination
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "hallucination",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=48) //invisibility
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "invisibility",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=52) //blindness
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "blindness",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=56) //esp
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "ESP",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=60) //object
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "object detection",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=64) //enlightenment
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "enlightenment",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=68) //levitation
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "levitation",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=72) //brisk
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "brisk",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=76) //haste
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "haste",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=80) //acid
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "acid",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=84) //oil
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "oil",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=88) //paralysis
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "paralysis",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=92) //gain level
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "gain level",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=96) //gain ability
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "increase attribute",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=100) //poison
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: potionOf + "poison",
				itemSymbol: "!",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
	
	}
	
	//spellbooks 4%
	else if (itemType<=84) {
	
		/*
		Force Bolt 5%
		Nosferatu 5%
		Unlock 5%
		Tick 5%
		Light 5%
		Slow 5%
		Blind 5%
		Taunt 5%
		Protection 5%
		Healing 5%
		Regeneration 3%
		Lance 3%
		Ice Spike 3%
		Fireball 3%
		Discharge 3%
		Sonar 3%
		Detect Food 3%
		Identify 3%
		Sleep 3%
		Paralyze 3%
		Restore Ability 3%
		Redoubt 2%
		Amplify 2%
		Surge 2%
		Reflect 2%
		Cancellation 2%
		Create Monster 2%
		Mend 2%
		Remove Curse 2%
		Convalesce 1%
		*/
		
		whichItem=rollDie(100,1);
	
		let spellbookOf="spellbook of ";
		
		if (whichItem<=5) //magic missile
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "magic missile",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=10) //nosferatu
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "nosferatu",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=15) //unlock
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "unlock",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=20) //tick
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "tick",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=25) //light
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "light",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=30) //slow
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "slow",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=35) //blind
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "blind",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=40) //taunt
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "taunt",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=45) //protection
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "protection",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=50) //healing
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "healing",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=53) //regen
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "regeneration",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=55) //regen
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "redoubt",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=58) //lance
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "lance",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=61) //ice spike
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "ice spike",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=64) //fireball
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "fireball",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=67) //discharge
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "discharge",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=70) //sonar
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "sonar",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=73) //detect food
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "detect food",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=76) //identify
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "identify",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=79) //sleep
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "sleep",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=82) //paralyze
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "paralyze",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=85) //restore ability
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "restore ability",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=87) //amplify
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "amplify",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=89) //surge
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "surge",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=91) //reflect
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "reflection",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=93) //cancellation
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "cancellation",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=95) //create monster
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "create monster",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=97) //mend
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "mend",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=99) //remove curse
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "remove curse",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=100) //convalesce
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: spellbookOf + "convalesce",
				itemSymbol: "~",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
	
	}
	
	//amulets 3%
	else if (itemType<=87) {
	
		/*
		Change gender 10%
		ESP	 10%
		Life saving 10%
		Reflection 10%
		Restful sleep 10%
		Strangulation 10%
		Water walking 10%
		Silence 10%
		Vigor 10%
		Moxie 10%
		*/

		whichItem=rollDie(100,1);
	
		let amuletOf="amulet of ";
		
		if (whichItem<=10) //vigor
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: amuletOf + "vigor",
				itemSymbol: "\"",
				BUC: buc,
				enhancement:enhanceRoll ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=20) //moxie
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: amuletOf + "moxie",
				itemSymbol: "\"",
				BUC: buc,
				enhancement:enhanceRoll ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=30) //sleep
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: amuletOf + "sleep",
				itemSymbol: "\"",
				BUC: 2,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=40) //strangulation
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: amuletOf + "strangulation",
				itemSymbol: "\"",
				BUC: 2,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=50) //change gender
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: amuletOf + "change gender",
				itemSymbol: "\"",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=60) //esp
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: amuletOf + "ESP",
				itemSymbol: "\"",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=70) //life saving
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: amuletOf + "life saving",
				itemSymbol: "\"",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=80) //reflection
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: amuletOf + "reflection",
				itemSymbol: "\"",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=90) //water walking
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: amuletOf + "water walking",
				itemSymbol: "\"",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=100) //silence
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: amuletOf + "silence",
				itemSymbol: "\"",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
	
	}
	
	//rings 5%
	else if (itemType<=92) {
	
		/*
		Hunger 8% always cursed
		Vulnerability 8% always cursed
		Enfeeblement 8% always cursed
		Provocation 8% always cursed
		Stealth 4%
		Sustain ability 4%
		Warning 3%
		Resistance:
			Cold 3%
			Fire 3%
			Shock 3%
			Poison 3%
			Sleep 3%
			Confusion 3%
			Paralysis 3%
		Gain stat:
			Strength 3%
			Dexterity 3%
			Intelligence 3%
			Wisdom 3%
			Constitution 3%
			Protection 3%
		Increase damage 3%
		Increase accuracy 3%
		Invisibility 3%
		Levitation 3%
		Searching 3%
		Slow digestion 3%
		*/
	
		
		whichItem=rollDie(100,1);
		
		let ringOf="ring of ";

		
		if (whichItem<=8) //hunger
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "hunger",
				itemSymbol: "=",
				BUC: 2,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=16) //enfeeblement
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "enfeeblement",
				itemSymbol: "=",
				BUC: 2,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=24) //vulnerability
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "vulnerability",
				itemSymbol: "=",
				BUC: 2,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=28) //sustain ability
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "sustain ability",
				itemSymbol: "=",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=32) //stealth
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "stealth",
				itemSymbol: "=",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		
		else if (whichItem<=40) //provocation
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "provocation",
				itemSymbol: "=",
				BUC: 2,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=43) //warning
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "warning",
				itemSymbol: "=",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=46) //cold resist
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "cold resist",
				itemSymbol: "=",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=49) //fire resist
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "fire resist",
				itemSymbol: "=",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=52) //shock resist
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "shock resist",
				itemSymbol: "=",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=55) //poison resist
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "poison resist",
				itemSymbol: "=",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=58) //sleep resist
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "sleep resist",
				itemSymbol: "=",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=61) //confusion resist
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "confusion resist",
				itemSymbol: "=",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=64) //Paralysis resist
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "paralysis resist",
				itemSymbol: "=",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=67) //strength
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "strength",
				itemSymbol: "=",
				BUC: buc,
				enhancement:enhanceRoll ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=70) //dexterity
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "dexterity",
				itemSymbol: "=",
				BUC: buc,
				enhancement:enhanceRoll ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=73) //intelligence
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "intelligence",
				itemSymbol: "=",
				BUC: buc,
				enhancement:enhanceRoll ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=76) //wisdom
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "wisdom",
				itemSymbol: "=",
				BUC: buc,
				enhancement:enhanceRoll ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=79) //constitution
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "constitution",
				itemSymbol: "=",
				BUC: buc,
				enhancement:enhanceRoll ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=82) //protection
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "protection",
				itemSymbol: "=",
				BUC: buc,
				enhancement:enhanceRoll ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=85) //damage
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "increase damage",
				itemSymbol: "=",
				BUC: buc,
				enhancement:enhanceRoll ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		
		
		else if (whichItem<=88) //increase accuracy
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "accuracy",
				itemSymbol: "=",
				BUC: buc,
				enhancement:enhanceRoll ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=91) //invisibility
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "invisibility",
				itemSymbol: "=",
				BUC: buc,
				enhancement:enhanceRoll ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=94) //levitation
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "levitation",
				itemSymbol: "=",
				BUC: buc,
				enhancement:enhanceRoll ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=97) //searching
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "searching",
				itemSymbol: "=",
				BUC: buc,
				enhancement:enhanceRoll ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=100) //slow digestion
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: ringOf + "slow digestion",
				itemSymbol: "=",
				BUC: buc,
				enhancement:enhanceRoll ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
	
	}
	
	//wands 8%
	else if (itemType<=100) {
	
		/*
		Light 10%
		Unlocking 10%
		Enlightenment 5%
		Tick 5%
		Magic Missile 5%
		Invisibility 5%
		Scrutiny 5%
		Slow 5%
		Brisk 5%
		Haste 5%
		Force Bolt 5%
		Ice Spike 5%
		Fireball 5%
		Lightning 5%
		Sleep 5%
		Cancellation 5%
		Create Monster 5%
		Death 5%
		*/	
		
		whichItem=rollDie(100,1);
		
		let wandOf="wand of ";
		
		if (whichItem<=10) //light
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "light",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=20) //unlocking
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "unlocking",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=25) //enlightenment
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "enlightenment",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=30) //tick
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "tick",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=35) //lance
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "lance",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=40) //invisible
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "invisible",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=45) //scrutiny
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "scrutiny",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=50) //slow
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "slow",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=55) //brisk
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "brisk",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=60) //haste
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "haste",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=65) //magic missile
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "magic missile",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=70) //ice spike
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "ice spike",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=75) //fireball
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "fireball",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=80) //discharge
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "discharge",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=85) //sleep
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "sleep",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=90) //cancellation
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "cancellation",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=95) //create monster
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "create monster",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
		
		else if (whichItem<=100) //death
		{
			allRooms[currRoomIndex].roomItems.push({
					
				itemName: wandOf + "death",
				itemSymbol: "/",
				BUC: buc,
				enhancement:0 ,
				index: spawnTile,
				itemExists:true,
				amount:1,
			
			});
		}
	
	}

}

function updateItem() {

	var tempStat="";
	var tempNum=0;
	
	//tab titles
	//for (i=0; i<allRooms[currRoomIndex].roomMonsters.length;i++) {
	for (i=0;i<10;i++) {
	
	
		if (allRooms[currRoomIndex].roomItems.length>i) {
	
			if (allRooms[currRoomIndex].roomItems[i].itemExists==true) {
				$('#roomItemsTabs ul:first li:eq(' + i + ') a').text(allRooms[currRoomIndex].roomItems[i].itemName);
				
				//if (allRooms[currRoomIndex].roomItems[i].amount>1) {
				
					//$('#roomItemsTabs ul:first li:eq(' + i + ') a').text(allRooms[currRoomIndex].roomItems[i].itemName + "s");
					
				//}
			}
			
		
		}
		
		
		if (allRooms[currRoomIndex].roomItems.length<=i) {
		
			tempNum=i;
			tempNum++;
			$('#roomItemsTabs ul:first li:eq(' + i + ') a').text("Item " + tempNum);
		}
	
	}
	
	if (allRooms[currRoomIndex].roomItems.length>itemActive) {
	
		if (allRooms[currRoomIndex].roomItems[itemActive].itemExists==true) {
		
			//amount
			
			if (allRooms[currRoomIndex].roomItems[itemActive].amount>1) {
			
				tempStat=allRooms[currRoomIndex].roomItems[itemActive].amount + " ";
			}
		
			//buc
			
			if (allRooms[currRoomIndex].roomItems[itemActive].BUC==0) {
			
				tempStat+="";
			
			}
		
			if (allRooms[currRoomIndex].roomItems[itemActive].BUC==1) {
			
				tempStat+="blessed ";
			
			}
			
			if (allRooms[currRoomIndex].roomItems[itemActive].BUC==2) {
			
				tempStat+="cursed ";
			
			}
			
			//enhance
			
			if (allRooms[currRoomIndex].roomItems[itemActive].enhancement>0) {
			
				tempStat+="+" + allRooms[currRoomIndex].roomItems[itemActive].enhancement + " ";
			
			}
			
			if (allRooms[currRoomIndex].roomItems[itemActive].enhancement<0) {
			
				tempStat+=allRooms[currRoomIndex].roomItems[itemActive].enhancement + " ";
			
			}
		
			tempStat+=allRooms[currRoomIndex].roomItems[itemActive].itemName;
			
			$("#roomItemName").html(tempStat);
			
			tempStat="Index: ";
			tempStat+=allRooms[currRoomIndex].roomItems[itemActive].index;
			$("#roomItemIndex").html(tempStat);

		
		} //if item exists
	
	}
	
	else if (allRooms[currRoomIndex].roomItems.length<=itemActive) {
	

		$("#roomItemName").html("");
		
		tempStat="Index: ";
		$("#roomItemIndex").html(tempStat);

	}
	
	
}

$( "#clearItemBut" ).click(function( event ) {

	
	
	//dont clear if standing on item?
	if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasBeing!=true) {
		$("#roomTile"+allRooms[currRoomIndex].roomItems[itemActive].index).html("");
		$("#roomTile"+allRooms[currRoomIndex].roomItems[itemActive].index).css("background", tileDefColor);
	}

	//console.log(allRooms[currRoomIndex].roomItems.length);
	allRooms[currRoomIndex].roomItems.splice(itemActive,1);
	//console.log(allRooms[currRoomIndex].roomItems.length);
	

	allRooms[currRoomIndex].roomTile[roomTileIndex].itemSymbol="";
	allRooms[currRoomIndex].roomTile[roomTileIndex].hasItem=false;

	
	updateItem();
})

$( "#roomItemsTabs" ).tabs({
  beforeActivate: function( event, ui ) {
  
	
	var tabCmp=ui.newPanel.attr('id'); //for comparing tab id
	
	//alert(ui.newPanel.attr('id'));
	
	if (tabCmp=="roomItemsTabs-1")
	{
		itemActive=0;

		updateItem();
	}
	
	if (tabCmp=="roomItemsTabs-2")
	{
		itemActive=1;
		
		updateItem();
	}
	
	if (tabCmp=="roomItemsTabs-3")
	{
		itemActive=2;
		
		updateItem();
	}
	
	if (tabCmp=="roomItemsTabs-4")
	{
		itemActive=3;

		updateItem();
	}
	
	if (tabCmp=="roomItemsTabs-5")
	{
		itemActive=4;
		
		updateItem();
	}	
	
	if (tabCmp=="roomItemsTabs-6")
	{
		itemActive=5;
		
		updateItem();
	}
	
	if (tabCmp=="roomItemsTabs-7")
	{
		itemActive=6;
		
		updateItem();
		
	}
	
	if (tabCmp=="roomItemsTabs-8")
	{
		itemActive=7;
		updateItem();
	}
	
	if (tabCmp=="roomItemsTabs-9")
	{
		itemActive=8;
		updateItem();
	}
	
	if (tabCmp=="roomItemsTabs-10")
	{
		itemActive=9;
		updateItem();
	}
	
	
	
	
	//select room tile
	if (allRooms[currRoomIndex].roomItems.length>itemActive) {
	
		if (allRooms[currRoomIndex].roomItems[itemActive].itemExists==true) {
		
			if (allRooms[currRoomIndex].roomItems[itemActive].index>0) {
			
				//reset previous current tile color
				$("#roomTile"+roomTileIndex).css("background", tileDefColor);
				
				//color if trap
				if (roomTileIndex>0) {
	
					if (allRooms[currRoomIndex].roomTile[roomTileIndex].hasTrap==true) {
						$("#roomTile"+roomTileIndex).css("background", trapDefColor);
					}
				
				}
				
				
				roomTileIndex=allRooms[currRoomIndex].roomItems[itemActive].index;
				$("#roomTile"+roomTileIndex).css("background", butSelColor);
				
			}
		}
	
	}
	
	if (allRooms[currRoomIndex].roomItems.length<=itemActive) {
	
		$("#roomTile"+roomTileIndex).css("background", tileDefColor);
		
		
	
	}
	
	
  }
});

function monstSpawn() {

	var monstAmount=0;
	var monstProb=0;
	var spawnTile=0;
	var spawnArrLength=allRooms[currRoomIndex].spawnArray.length;
	spawnArrLength--;
	var spawnInd;
	
	
	monstProb=rollDie(10,1);
	
	if (monstProb<9) {
	
		console.log("spawning");
		monstAmount=rollDie(monstMax,1);
		
		for (i=0;i<monstAmount;i++) {
		
			//choose an open space
			spawnInd=rollDie0(spawnArrLength,1);
			spawnTile=allRooms[currRoomIndex].spawnArray[spawnInd];
			
			//check if on unoccupied space
			while ( $("#roomTile"+spawnTile).html()!="") {
			
				spawnInd=rollDie0(spawnArrLength,1);
				spawnTile=allRooms[currRoomIndex].spawnArray[spawnInd];
				//console.log($("#roomTile"+spawnTile).html());
			}
			
			//create monster on chosen tile
			monstGen(i, spawnTile);
			$("#roomTile" + spawnTile).html(allRooms[currRoomIndex].roomMonsters[0].monstSymbol);
			allRooms[currRoomIndex].roomTile[spawnTile].hasBeing=true;
			
		} //monster amount
	
	} //monster probability
	
	updateMonst();
}

function monstGen (index, spawnTile) {

	var whichMonst=rollDie(100,1);
	
	
	if (whichMonst<=20) {
	
		genGoblin(spawnTile);
	}
	
	else if (whichMonst<=30) {
	
		genImp(spawnTile);
	}
	
	else if (whichMonst<=35) {
	
		genCobra(spawnTile);
	
	}
	
	else if (whichMonst<=40) {
	
		genMimic(spawnTile);
	
	}
	
	else if (whichMonst<=100) {
	
		genJackal(spawnTile);
	
	}
	
	//currMonsters[index].monsterName="asdf";
	/*currMonsters.push ({
	
		monsterName:"asdf",
		
	});*/
}



$( "#roomStuffTabs" ).tabs({
  collapsible: true
});

$( "#trapsTabs" ).tabs({
  collapsible: true
});


$( "#dungeonTabs" ).tabs({
  beforeActivate: function( event, ui ) {
        //var active = $('#tabs').tabs('option', 'active');
        //$("#tabid").html('the tab id is ' + $("#tabs ul>li a").eq(active).attr("href"));

		var tabCmp=ui.newPanel.attr('id'); //for comparing tab id

		//hideVision();
		
		if (tabCmp=="dungeonTabs-2") {
		
			$("div.roomContainer").find("button").html(""); //initialize
			$("div.roomContainer").find("button").css("background", butDefColor);
			
			
		
			//load selected room if it exists
			
			if (allRooms[currRoomIndex].roomExists==true && allRooms[currRoomIndex].floorSymbol!="█") {
			
				for (i=0;i<roomSize;i++) {
				
					$("#roomTile" + i).html(allRooms[currRoomIndex].roomTile[i].symbol);
				}
				
				for (i=0;i<allRooms[currRoomIndex].roomMonsters.length;i++) {
					
					if (allRooms[currRoomIndex].roomMonsters[i].monsterExists==true) {
						//console.log("asdf");
						$("#roomTile" + allRooms[currRoomIndex].roomMonsters[i].index).html(allRooms[currRoomIndex].roomMonsters[i].monstSymbol);
					}
				}
				
				for (i=0;i<allRooms[currRoomIndex].roomItems.length;i++) {
					
					//console.log(allRooms[currRoomIndex].roomItems[i].index);
					$("#roomTile" + allRooms[currRoomIndex].roomItems[i].index).html(allRooms[currRoomIndex].roomItems[i].itemSymbol);
					
				}
				
				for (i=0;i<allRooms[currRoomIndex].roomTraps.length;i++) {
					
					//console.log(allRooms[currRoomIndex].roomItems[i].index);
					$("#roomTile" + allRooms[currRoomIndex].roomTraps[i].index).html(allRooms[currRoomIndex].roomTraps[i].trapSymbol);
					
				}
				
				let tempPlayIndex=0;
				
				for (i=0;i<playersMax;i++) {
				
					tempPlayIndex=i;
					tempPlayIndex++;
				
					if (allPlayers[i].playerExists==true) {
						//console.log("asdf");
						$("#roomTile" + allPlayers[i].index).html("P" + tempPlayIndex);
					}
					
				}
				
				//color all room tiles
				for (i=0;i<allRooms[currRoomIndex].spawnArray.length;i++) {
				
					$("#roomTile"+allRooms[currRoomIndex].spawnArray[i]).css("background", tileDefColor);
					
				}
				
				hideVision();
				showVision();
			
			}
			
			
			//if doesnt exist, make one
			if (allRooms[currRoomIndex].roomExists==false && allRooms[currRoomIndex].floorSymbol!="█") {
			
				roomGen();
				allRooms[currRoomIndex].roomExists=true;
				for (i=0;i<roomSize;i++) {
				
					allRooms[currRoomIndex].roomTile[i].symbol=$("#roomTile" + i).html();
				}
			
				
			
			}
		
		}
		
    }
});

function roomGen() {

	//determine what the room/hall is, then create it

	var isRoom=currFloorSym.includes("■");
	var isDes=currFloorSym.includes("b");
	var isArr=currFloorSym.includes("a");
	
	var northEx=currFloorSym.includes("↑");
	var eastEx=currFloorSym.includes("→");
	var southEx=currFloorSym.includes("↓");
	var westEx=currFloorSym.includes("←");
	
	//quick fix for des room...
	if (isDes==true) {
	
		northEx=true;
		eastEx=true;
		southEx=true;
		westEx=true;
	}
	
	var isHall1=currFloorSym.includes("║");
	var isHall2=currFloorSym.includes("═");
	var isHall3=currFloorSym.includes("╗");
	var isHall4=currFloorSym.includes("╔");
	var isHall5=currFloorSym.includes("╚");
	var isHall6=currFloorSym.includes("╝");
	var isHall7=currFloorSym.includes("╦");
	var isHall8=currFloorSym.includes("╩");
	var isHall9=currFloorSym.includes("╠");
	var isHall10=currFloorSym.includes("╣");
	var isHall11=currFloorSym.includes("╬");
	
	
	var aCoor; //horizontal
	var bCoor; //vertical
	var exirCoor;
	var saveCoor; //for saving index
	
	var aCoor2; //for hallways
	var bCoor2; 
	var aCoor3;
	var bCoor3;
	
	var tempInd; //for iterating over room buttons
	var tempRange; //finding door
	

	//if room
	if (isRoom==true || isDes==true || isArr==true) {
	
		
	
		aCoor=rollDie(5,1,10);
		bCoor=rollDie(5,1,10);
		tempRange=aCoor-4;
		exitCoor=rollDie(tempRange, 1,3);
		
		//check exits
		
		$("#roomTile0").html("┌");
	
		//north wall
		for (i=1;i<=aCoor;i++) {
			
			
			$("#roomTile" + i).html("─");
			
			if (i==exitCoor && northEx==true) {
			
				$("#roomTile" + i).html("+");
				allRooms[currRoomIndex].northExit=i;
			}
			
			saveCoor=i;
		}
		
		$("#roomTile" + saveCoor).html("┐");
		
		tempRange=bCoor-4;
		exitCoor=rollDie(tempRange, 1,2);
		tempInd=saveCoor;
		
		
		//east wall
		for (i=1;i<bCoor;i++) {
			
			tempInd=saveCoor+(roomMaxLength*i);
			
			//console.log(vert);
			
			$("#roomTile" + tempInd).html("│");
			
			if (i==exitCoor && eastEx==true) {
			
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].eastExit=tempInd;
			}
			
			if (i==(bCoor-1)) {
			
				$("#roomTile" + tempInd).html("┘");
				saveCoor=i;
			}
		}
		
		tempRange=bCoor-4;
		exitCoor=rollDie(tempRange, 1,2);
		
		
		//west wall
		for (i=1;i<bCoor;i++) {
		
			tempInd=(roomMaxLength*i);
			
			$("#roomTile" + tempInd).html("│");
			
			if (i==exitCoor && westEx==true) {
			
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].westExit=tempInd;
			}
			
			if (i==(bCoor-1)) {
			
				$("#roomTile" + tempInd).html("└");
				saveCoor=tempInd;
			}
		}
		tempRange=bCoor-6;
		exitCoor=rollDie(tempRange, 1,4);
		tempInd=saveCoor;
		tempInd++; //dont overwrite bottom left corner
		
		
		//south wall
		for (i=2;i<=aCoor;i++) {
			
			
			$("#roomTile" + tempInd).html("─");
			
			if (i==exitCoor && southEx==true) {
			
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].southExit=tempInd;
			}
			
			tempInd++;
			
			
			
		}
		
		//if at arrival, one random wall becomes starting point
		if (isArr==true) {
			
			let aHasEnt=false;
			let tempButSym="";
			tempInd=0;
			let aRoll=0;
			let prevButSym="";
			let prevInd=0;
			let nextButSym="";
			let nextInd=0;
			let upButSym="";
			let upInd=0;
			let downButSym="";
			let downInd=0;
		
			while (aHasEnt==false) {
			
				if (tempInd>0){
					
					prevInd=tempInd;
					prevInd--;
				}
				
				if (tempInd<roomSize){
					
					nextInd=tempInd;
					nextInd++;
				}
				
				if (tempInd<(roomSize-roomMaxLength)){
					
					downInd=tempInd;
					downInd+=roomMaxLength;
				}
				
				if (tempInd>=roomMaxLength){
					
					upInd=tempInd;
					upInd-=roomMaxLength;
				}
			
				tempButSym=$("#roomTile" + tempInd).html();
				prevButSym=$("#roomTile" + prevInd).html();
				nextButSym=$("#roomTile" + nextInd).html();
				downButSym=$("#roomTile" + downInd).html();
				upButSym=$("#roomTile" + upInd).html();
				if ((tempButSym!="" && tempButSym!="┐" && tempButSym!="└" && tempButSym!="┘" && tempButSym!="┌") && tempButSym!="+") {
				
					aRoll=rollDie(20,1);
					
					if (aRoll==1 && prevButSym!="┐" && prevButSym!="└" && prevButSym!="┘" && prevButSym!="┌" 
						&& nextButSym!="┐" && nextButSym!="└" && nextButSym!="┘" && nextButSym!="┌" 
						&& upButSym!="┐" && upButSym!="└" && upButSym!="┘" && upButSym!="┌" 
						&& downButSym!="┐" && downButSym!="└" && downButSym!="┘" && downButSym!="┌") {
					
						$("#roomTile" + tempInd).html("@");
						aHasEnt=true;
						allRooms[currRoomIndex].arrExit=tempInd;
					
					}
				
				}
				
				tempInd++;

				
				if (tempInd>=roomSize) {
				
					tempInd=0;
				}
				
			}
		}
		
		
		//make monsters/items/traps
		//setSpawnPoints();
		
	} //room
	
	//straight up 6 oclock ║
	else if (isHall1==true) {
	
		aCoor=rollDie(2,1,3);
		bCoor=rollDie(4,1,11);
		//tempRange=aCoor-2;
		//exitCoor=rollDie(tempRange, 1,2);
		
		allRooms[currRoomIndex].hallWidth=aCoor;
		
		$("#roomTile0").html("┌");
		
		
		//west wall
		for (i=1;i<bCoor;i++) {
		
			tempInd=(roomMaxLength*i);
		
			$("#roomTile" + tempInd).html("│");
			saveCoor=tempInd;
			allRooms[currRoomIndex].hallLength1=i;
		}
		
		allRooms[currRoomIndex].hallLength1--;
		$("#roomTile" + tempInd).html("└");
		
		
		doorIndex=makeHallDoor(aCoor);
		//south wall
		for (i=1;i<=aCoor;i++) {
		
			tempInd++;
		
			$("#roomTile" + tempInd).html("─");
			
			saveCoor=i;
			
			if (i==doorIndex) {
			
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].southExit=tempInd;
			}
			
			

		}
		
		//makeHallDoor(aCoor, "south", tempInd, "left");
		
		
		doorIndex=makeHallDoor(aCoor);
		//north wall
		for (i=1;i<=aCoor;i++) {
		
			$("#roomTile" + i).html("─");
			
			saveCoor=i;
			
			
			if (i==doorIndex) {
			
				$("#roomTile" + i).html("+");
				allRooms[currRoomIndex].northExit=i;
			}

		}
		
		makeHallDoor(aCoor, "north");
		
		//one past hall width
		saveCoor++;
		$("#roomTile" + saveCoor).html("┐");
		
		tempInd=saveCoor;
		
		//east wall
		for (i=1;i<bCoor;i++) {
		
			tempInd+=roomMaxLength;
		
			$("#roomTile" + tempInd).html("│");
			saveCoor=tempInd;
		}
		
		$("#roomTile" + saveCoor).html("┘");
		
		
		//make monsters/items/traps
		//setSpawnPoints();
		
	
	} //║
	
	
	//═
	else if (isHall2==true) {
	
		bCoor=rollDie(2,1,3);
		aCoor=rollDie(4,1,11);
		var doorIndex;
		
		//console.log(bCoor);
		
		$("#roomTile0").html("┌");
		
		
		//north wall
		for (i=1;i<=aCoor;i++) {
		
			$("#roomTile" + i).html("─");
			
			saveCoor=i;

		}
		
		$("#roomTile" + saveCoor).html("┐");
		
		tempInd=saveCoor;
		
		
		doorIndex=makeHallDoor(bCoor);
		
		//east wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd+=roomMaxLength;
		
			$("#roomTile" + tempInd).html("│");
			saveCoor=tempInd;
			
			if (i==doorIndex) {
			
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].eastExit=tempInd;
			}
			

		}
		
		
		
		//bottom right corner
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("┘");
		
		doorIndex=makeHallDoor(bCoor);
		
		//west wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd=(roomMaxLength*i)
		
			$("#roomTile" + tempInd).html("│");
			saveCoor=tempInd;
			
			if (i==doorIndex) {
			
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].westExit=tempInd;
			}

		}
		
		//bottom left corner
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("└");
		
		//south wall
		
		for (i=1;i<aCoor;i++) {
		
			tempInd++;
		
			$("#roomTile" + tempInd).html("─");
		

		}
		
		//make monsters/items/traps
		//setSpawnPoints();
		
	} //═
	
	//╗
	if (isHall3==true) {
	
		aCoor=rollDie(4,1,11);
		bCoor=rollDie(3,1,3);
		aCoor2=aCoor-bCoor;
		aCoor2-=2;
		bCoor2=rollDie(4,1,11);
		bCoor3=bCoor2-bCoor;
		bCoor3-=2;
		
		$("#roomTile0").html("┌");
		doorIndex=makeHallDoor(bCoor);
		
		//west wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd=i*roomMaxLength;
			
			$("#roomTile" + tempInd).html("│");
			
			if (i==doorIndex) {
			
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].westExit=tempInd;
			}
			
			
			
		}

		
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("└");
		tempInd++;

		//short horizontal
		for (i=1;i<aCoor2;i++) {
		
			$("#roomTile" + tempInd).html("─");
			tempInd++;
			
			saveCoor=tempInd;
		
		}
		
		$("#roomTile" + tempInd).html("┐");
		
		//short vertical
		for (i=1;i<=bCoor3;i++) {
		
			tempInd+=roomMaxLength;
			
			$("#roomTile" + tempInd).html("│");
			
			
			
		}
		
		$("#roomTile" + tempInd).html("└");
		
		doorIndex=makeHallDoor(bCoor);
		//south wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd++;
			$("#roomTile" + tempInd).html("─");
			
			
			saveCoor=tempInd;
			
			if (i==doorIndex) {
			
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].southExit=tempInd;
			}
		
		}
		
		tempInd++;
		$("#roomTile" + tempInd).html("┘");
		
		
		
		//north wall
		for (i=1;i<aCoor;i++) {
		
			$("#roomTile" + i).html("─");
			
			saveCoor=i;
		}
		
		$("#roomTile" + saveCoor).html("┐");
		
		tempInd=saveCoor;

		bCoor2--;
		//east wall
		for (i=1;i<bCoor2;i++) {
		
			tempInd+=roomMaxLength;
			
			$("#roomTile" + tempInd).html("│");
			
			
			
		}
		
		//make monsters/items/traps
		//setSpawnPoints();
	
	}//╗
	
	//╔
	if (isHall4==true) {
	
		aCoor=rollDie(3,1,10);
		bCoor=rollDie(3,1,3);
		aCoor2=aCoor-bCoor;
		aCoor2-=2;
		bCoor2=rollDie(3,1,9);
		bCoor3=bCoor2-bCoor;
		//bCoor3-=2;
		
		$("#roomTile0").html("┌");
		
		//west wall
		for (i=1;i<=bCoor2;i++) {
		
			tempInd=i*roomMaxLength;
			
			$("#roomTile" + tempInd).html("│");
			
			
		}

		
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("└");
		//tempInd++;
		
		doorIndex=makeHallDoor(bCoor);
		//south wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd++;
			$("#roomTile" + tempInd).html("─");
			
			
			saveCoor=tempInd;
			
			if (i==doorIndex) {
			
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].southExit=tempInd;
			}
		
		}
		
		tempInd++;
		$("#roomTile" + tempInd).html("┘");
		tempInd-=roomMaxLength;

		//short vertical
		for (i=1;i<bCoor3;i++) {
		
			
		
			$("#roomTile" + tempInd).html("│");
			tempInd-=roomMaxLength;
			
			saveCoor=tempInd;
		
		}
		
		$("#roomTile" + tempInd).html("┌");
		tempInd++;
		
		//short horizontal
		for (i=1;i<aCoor2;i++) {
		
			$("#roomTile" + tempInd).html("─");
			tempInd++;
			
			saveCoor=tempInd;
		
		}
		
		$("#roomTile" + tempInd).html("┘");
		//tempInd-=roomMaxLength;
		
		doorIndex=makeHallDoor(bCoor);
		//console.log(doorIndex);
		//east wall
		for (i=0;i<bCoor;i++) {
		
			
			tempInd-=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
			
			
			if (i==doorIndex) {
			
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].eastExit=tempInd;
			}
			
		}
		
		tempInd-=roomMaxLength;
		
		
		//north wall
		for (i=1;i<aCoor;i++) {
		
			$("#roomTile" + i).html("─");
			
			saveCoor=i;
		}
		
		$("#roomTile" + saveCoor).html("┐");
		
		
		
		
		
	
	} //╔
	
	//╚
	if (isHall5==true) {
	
		aCoor=rollDie(3,1,9); //long vertical
		bCoor=rollDie(3,1,3); //width
		aCoor2=aCoor-bCoor; //short vertical
		bCoor2=rollDie(3,1,8); //long horizontal
		//bCoor2-=2;
		bCoor3=bCoor2-bCoor; //short horizontal
		
		$("#roomTile0").html("┌");
		
		doorIndex=makeHallDoor(bCoor);
		//north wall
		for (i=1;i<=bCoor;i++) {
		
			$("#roomTile" + i).html("─");
		
			if (i==doorIndex) {
			
				$("#roomTile" + i).html("+");
				allRooms[currRoomIndex].northExit=i;
			}
		
			tempInd=i;
			
		}
		
		tempInd++;
		$("#roomTile"+tempInd).html("┐");
		tempInd+=roomMaxLength;
		
		//short vertical
		for (i=0;i<aCoor2;i++) {
		
			$("#roomTile" + tempInd).html("│");
			tempInd+=roomMaxLength;
		
		}
		
		$("#roomTile"+tempInd).html("└");
		
		//short horizontal
		for (i=0;i<bCoor3;i++) {
		
			tempInd++;
			$("#roomTile" + tempInd).html("─");
		
		}
		
		tempInd++;
		$("#roomTile"+tempInd).html("┐");
		
		doorIndex=makeHallDoor(bCoor);
		//console.log(doorIndex);
		//east wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd+=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
			
		
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].eastExit=tempInd;
			}

		}
		
		tempInd+=roomMaxLength;
		$("#roomTile"+tempInd).html("┘");
		
		for (i=0;i<=bCoor2;i++) {
		
			tempInd--;
			$("#roomTile" + tempInd).html("─");
		
		}
		
		tempInd--;
		$("#roomTile"+tempInd).html("└");
		
		for (i=0;i<=aCoor;i++) {
		
			tempInd-=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
		}
		
	
	}//╚
	
	//╝
	if (isHall6==true) {
	
		aCoor=rollDie(3,1,9); //long vertical
		bCoor=rollDie(3,1,3); //width
		aCoor2=aCoor-bCoor; //short vertical
		bCoor2=rollDie(3,1,8); //long horizontal
		//bCoor2-=2;
		bCoor3=bCoor2-bCoor; //short horizontal
		
		
		
		tempInd=roomMaxLength;
		tempInd--;
	
		$("#roomTile" + tempInd).html("┐");
		
		doorIndex=makeHallDoor(bCoor);
		//north wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd--;
			$("#roomTile" + tempInd).html("─");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].northExit=tempInd;
			}

		}
		
		tempInd--;
		$("#roomTile" + tempInd).html("┌");
		
		for (i=0;i<aCoor2;i++) {
			
			tempInd+=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
		}
		
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("┘");
		tempInd--;
		
		for (i=0;i<aCoor2;i++) {
			
			$("#roomTile" + tempInd).html("─");
			tempInd--;
		}
		
		$("#roomTile" + tempInd).html("┌");
		
		
		doorIndex=makeHallDoor(bCoor);
		//west wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd+=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].westExit=tempInd;
			}

		}
		
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("└");
		tempInd++;
		
		//south wall
		for (i=0;i<=aCoor;i++) {
		
			$("#roomTile" + tempInd).html("─");
			tempInd++;
		
		}
		
		$("#roomTile" + tempInd).html("┘");
		tempInd-=roomMaxLength;
		
		//bCoor2++;
		//east wall
		for (i=0;i<=aCoor;i++) {
		
			$("#roomTile" + tempInd).html("│");
			tempInd-=roomMaxLength;
		
		}
		
	} //╝
	
	
	//╦
	if (isHall7==true) {
	
		aCoor=rollDie(2,1,14); //long vertical
		bCoor=rollDie(2,1,3); //width
		aCoor2= rollDie(2,1,4); //short vertical
		bCoor2=rollDie(3,1,8); //long horizontal
		//bCoor2-=2;
		bCoor3=bCoor2-bCoor; //short horizontal
		
		aCoor3=aCoor-bCoor-aCoor2;
		aCoor3-=2;
		
		//north wall
		$("#roomTile0").html("┌");
		
		for (i=1;i<aCoor;i++) {
		
			tempInd=i;
			$("#roomTile" + tempInd).html("─");
		}
		
		tempInd++;
		$("#roomTile" + tempInd).html("┐");
		//tempInd+=roomMaxLength;
		
		doorIndex=makeHallDoor(bCoor);
		//east wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd+=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].eastExit=tempInd;
			}

		}
		
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("┘");
	
		
		for (i=0;i<aCoor2;i++) {
		
			tempInd--;
			$("#roomTile" + tempInd).html("─");
		
		}
		
		tempInd--;
		$("#roomTile" + tempInd).html("┌");
		
		for(i=0;i<aCoor2;i++) {
		
			tempInd+=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
		
		}
		
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("┘");
		
		doorIndex=makeHallDoor(bCoor);
		//south wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd--;
			$("#roomTile" + tempInd).html("─");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].southExit=tempInd;
			}

		}
		
		tempInd--;
		$("#roomTile" + tempInd).html("└");
		
		for (i=0;i<aCoor2;i++) {
		
			tempInd-=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
			
		
		}
		
		tempInd-=roomMaxLength;
		$("#roomTile" + tempInd).html("┐");
		
		//console.log(aCoor3);
		
		for (i=0;i<aCoor3;i++) {
		
			tempInd--;
			$("#roomTile" + tempInd).html("─");
		
		}
		
		$("#roomTile" + tempInd).html("└");
		
		doorIndex=makeHallDoor(bCoor);
		//west wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd-=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].westExit=tempInd;
			}

		}
		
	
	} //╦
	
	
	
	//╩
	if (isHall8==true) {
	
		aCoor=rollDie(2,1,12); //long horizontal
		bCoor=rollDie(2,1,3); //width
		aCoor2= rollDie(2,1,4); //short vertical
		bCoor2=rollDie(2,1,5); //short horizontal right
		//bCoor2-=2;
		//bCoor3=bCoor2-bCoor; //short horizontal
		
		aCoor3=aCoor-bCoor-bCoor2;
		//aCoor3-=2; //other short horizontal left
		
		//start in bottom left corner
		
		tempInd=aCoor3;
		
		$("#roomTile" + tempInd).html("┌");
		
		doorIndex=makeHallDoor(bCoor);
		//north wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd++;
			$("#roomTile" + tempInd).html("─");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].northExit=tempInd;
			}

		}
		
		tempInd++;
		$("#roomTile" + tempInd).html("┐");
		
		for (i=0;i<aCoor2;i++) {
		
			tempInd+=roomMaxLength;
			$("#roomTile" + tempInd).html("│");		
		
		}
		
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("└");
		
		for (i=0;i<bCoor2;i++) {
		
			tempInd++;
			$("#roomTile" + tempInd).html("─");		
		
		}
		
		$("#roomTile" + tempInd).html("┐");
		
		doorIndex=makeHallDoor(bCoor);
		//east wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd+=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].eastExit=tempInd;
			}

		}
		
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("┘");
		
		//south wall
		for (i=0;i<aCoor;i++) {
		
			tempInd--;
			$("#roomTile" + tempInd).html("─");
		}
		
		tempInd--;
		$("#roomTile" + tempInd).html("└");
		
		doorIndex=makeHallDoor(bCoor);
		//west wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd-=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].westExit=tempInd;
			}

		}
		
		tempInd-=roomMaxLength;
		$("#roomTile" + tempInd).html("┌");
		
		for (i=0;i<aCoor3;i++) {
		
			tempInd++;
			$("#roomTile" + tempInd).html("─");
		
		}
		
		$("#roomTile" + tempInd).html("┘");
		
		for (i=0;i<aCoor2;i++) {
		
			tempInd-=roomMaxLength;
			$("#roomTile" + tempInd).html("│");		
		
		}
		
	
	} //╩
	
	
	
	//╠
	if (isHall9==true) {
	
		aCoor=rollDie(2,1,14); //long vertical
		bCoor=rollDie(2,1,3); //width
		aCoor2= rollDie(2,1,4); //short vertical
		bCoor2=rollDie(3,1,8); //long horizontal
		//bCoor2-=2;
		bCoor3=bCoor2-bCoor; //short horizontal
		
		aCoor3=aCoor-bCoor-aCoor2;
		aCoor3-=2; //other short horizontal
		
		$("#roomTile0").html("┌");
		tempInd=0;
		
		//west wall
		for (i=1;i<aCoor;i++) {
		
			tempInd+=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
		}
		
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("└");
		
		doorIndex=makeHallDoor(bCoor);
		//south wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd++;
			$("#roomTile" + tempInd).html("─");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].southExit=tempInd;
			}

		}
		
		tempInd++;
		$("#roomTile" + tempInd).html("┘");
		
		for (i=0;i<bCoor3;i++) {
		
			tempInd-=roomMaxLength;
			$("#roomTile" + tempInd).html("│");		
		
		}
		
		$("#roomTile" + tempInd).html("┌");
		
		
		for (i=0;i<=aCoor2;i++) {
		
			tempInd++;
			$("#roomTile" + tempInd).html("─");		
		
		}
		
		tempInd++;
		$("#roomTile" + tempInd).html("┘");
		
		doorIndex=makeHallDoor(bCoor);
		//east wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd-=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].eastExit=tempInd;
			}

		}
		
		tempInd-=roomMaxLength;
		$("#roomTile" + tempInd).html("┐");
		
		for (i=0;i<=aCoor2;i++) {
		
			tempInd--;
			$("#roomTile" + tempInd).html("─");		
		
		}
		
		tempInd--;
		$("#roomTile" + tempInd).html("└");
		
		for (i=0;i<aCoor3;i++) {
		
			tempInd-=roomMaxLength;
			$("#roomTile" + tempInd).html("│");		
		
		}
		
		//north wall
		doorIndex=makeHallDoor(bCoor);
		for (i=1;i<=bCoor;i++) {
		
			$("#roomTile" + i).html("─");
			
			
			if (i==doorIndex) {
				$("#roomTile" + i).html("+");
				allRooms[currRoomIndex].northExit=i;
			}
			
			tempInd=i;

		}
		
		tempInd++;
		$("#roomTile" + tempInd).html("┐");
		
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("│");	
		
		
	
	} //╠
	
	
	//╣
	if (isHall10==true) {
	
		aCoor=rollDie(2,1,14); //long vertical
		bCoor=rollDie(2,1,3); //width
		aCoor2= rollDie(2,1,4); //short vertical
		bCoor2=rollDie(3,1,8); //long horizontal
		//bCoor2-=2;
		bCoor3=bCoor2-bCoor; //short horizontal
		
		aCoor3=aCoor-bCoor-aCoor2;
		aCoor3-=2; //other short horizontal
		
		$("#roomTile15").html("┐");
		tempInd=15;
		
		//west wall
		for (i=1;i<aCoor;i++) {
		
			tempInd+=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
		}
		
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("┘");
		
		doorIndex=makeHallDoor(bCoor);
		//south wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd--;
			$("#roomTile" + tempInd).html("─");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].southExit=tempInd;
			}

		}
		
		tempInd--;
		$("#roomTile" + tempInd).html("└");
		
		for (i=0;i<bCoor3;i++) {
		
			tempInd-=roomMaxLength;
			$("#roomTile" + tempInd).html("│");		
		
		}
		
		$("#roomTile" + tempInd).html("┐");
		
		for (i=0;i<=aCoor2;i++) {
		
			tempInd--;
			$("#roomTile" + tempInd).html("─");		
		
		}
		
		tempInd--;
		$("#roomTile" + tempInd).html("└");
		
		doorIndex=makeHallDoor(bCoor);
		
		//west wall
		for (i=1;i<=bCoor;i++) {
		
			tempInd-=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].westExit=tempInd;
			}

		}
		
		tempInd-=roomMaxLength;
		$("#roomTile" + tempInd).html("┌");
		
		for (i=0;i<=aCoor2;i++) {
		
			tempInd++;
			$("#roomTile" + tempInd).html("─");		
		
		}
		
		tempInd++;
		$("#roomTile" + tempInd).html("┘");
		
		for (i=0;i<aCoor3;i++) {
		
			tempInd-=roomMaxLength;
			$("#roomTile" + tempInd).html("│");		
		
		}
		
		tempInd=15;
		
		//north wall
		doorIndex=makeHallDoor(bCoor);
		for (i=1;i<=bCoor;i++) {
		
			tempInd--;
			$("#roomTile" + tempInd).html("─");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].northExit=tempInd;
			}
			

		}
		
		tempInd--;
		$("#roomTile" + tempInd).html("┌");
		
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("│");	
		
	
	} //╣
	
	
	//╬
	if (isHall11==true) {
	
		vert1=rollDie(2,1,3); //upper vert
		hWidth=rollDie(2,1,3); //width
		vert2= rollDie(2,1,3); //lower vertical
		hori1=rollDie(2,1,3); //left horizontal
		hori2=rollDie(2,1,3); //right horizontal
		
		console.log(vert1);
		console.log(vert2);
		console.log(hori1);
		console.log(hori2);
		console.log(hWidth);
		
		tempInd=hori1;
		tempInd++;
		
		$("#roomTile" + tempInd).html("┌");
		
		//north wall
		doorIndex=makeHallDoor(hWidth);
		for (i=1;i<=hWidth;i++) {
		
			tempInd++;
			$("#roomTile" + tempInd).html("─");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].northExit=tempInd;
			}
			

		}
		
		tempInd++;
		$("#roomTile" + tempInd).html("┐");
		
		for (i=0;i<vert1;i++) {
		
			tempInd+=roomMaxLength;
			$("#roomTile" + tempInd).html("│");		
		
		}
		
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("└");
		
		for (i=0;i<hori2;i++) {
		
			tempInd++;
			$("#roomTile" + tempInd).html("─");		
		
		}
		
		tempInd++;
		$("#roomTile" + tempInd).html("┐");
		
		//east wall
		doorIndex=makeHallDoor(hWidth);
		for (i=1;i<=hWidth;i++) {
		
			tempInd+=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].eastExit=tempInd;
			}
			

		}
		
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("┘");

		for (i=0;i<hori2;i++) {
		
			tempInd--;
			$("#roomTile" + tempInd).html("─");		
		
		}
		
		tempInd--;
		$("#roomTile" + tempInd).html("┌");
		
		for (i=0;i<vert2;i++) {
		
			tempInd+=roomMaxLength;
			$("#roomTile" + tempInd).html("│");		
		
		}
		
		tempInd+=roomMaxLength;
		$("#roomTile" + tempInd).html("┘");
		
		//south wall
		doorIndex=makeHallDoor(hWidth);
		for (i=1;i<=hWidth;i++) {
		
			tempInd--;
			$("#roomTile" + tempInd).html("─");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].southExit=tempInd;
			}
			

		}
		
		tempInd--;
		$("#roomTile" + tempInd).html("└");
		
		for (i=0;i<vert2;i++) {
		
			tempInd-=roomMaxLength;
			$("#roomTile" + tempInd).html("│");		
		
		}
		
		tempInd-=roomMaxLength;
		$("#roomTile" + tempInd).html("┐");
		
		for (i=0;i<hori1;i++) {
		
			tempInd--;
			$("#roomTile" + tempInd).html("─");		
		
		}
		
		tempInd--;
		$("#roomTile" + tempInd).html("└");
		
		//west wall
		doorIndex=makeHallDoor(hWidth);
		for (i=1;i<=hWidth;i++) {
		
			tempInd-=roomMaxLength;
			$("#roomTile" + tempInd).html("│");
			
			
			if (i==doorIndex) {
				$("#roomTile" + tempInd).html("+");
				allRooms[currRoomIndex].westExit=tempInd;
			}
			

		}
		
		tempInd-=roomMaxLength;
		$("#roomTile" + tempInd).html("┌");
		
		for (i=0;i<hori1;i++) {
		
			tempInd++;
			$("#roomTile" + tempInd).html("─");		
		
		}
		
		tempInd++;
		$("#roomTile" + tempInd).html("┘");
		
		for (i=0;i<vert1;i++) {
		
			tempInd-=roomMaxLength;
			$("#roomTile" + tempInd).html("│");		
		
		}
		
		
		
	
	} //╬
	
	
	
	//put players in appropriate entrance
	
	//make monsters/items/traps
	setSpawnPoints();
}



function setSpawnPoints() {

	var tempInd=0;
	var prevInd=0;
	var prevSym="";
	var butSym="";
	var startPoint=-1;
	var inRoom=false;
	var inRow=false;
	var rowCount=0;
	var hasOther=false;
	var oppPieceUp=false;
	var oppPieceDown=false;
	var oppPair=false;
	
	var spawnArray=[];

	
	butSym=$("#roomTile"+tempInd).html();
	
	//determine starting point
	//while (startPoint<0) {
	for (i=0;i<roomSize;i++) {
	
	
		prevInd=i;
		if (prevInd>0) {
			prevInd--;
		}
		
		prevSym=$("#roomTile"+prevInd).html();
		butSym=$("#roomTile"+i).html();
		
		
		
		if (i>roomMaxLength && (prevSym=="│" || ((prevSym=="+" || prevSym=="@" || prevSym=="┐" || prevSym=="└" || prevSym=="┘" || prevSym=="┌") && ((i%16)<13))) && hasOther!=true && (i%16!=0)) {
		//if ((prevSym=="│" || prevSym=="+" || prevSym=="@" || prevSym=="┐" || prevSym=="└" || prevSym=="┘" || prevSym=="┌")  && hasOther!=true) {
			inRoom=true;
			inRow=true;

		}
	
		
		if ((prevSym=="┐" || prevSym=="└" || prevSym=="┘" || prevSym=="┌") && (butSym=="─" || butSym=="│") &&  (i%16!=15)) {
		
			inRoom=false;
			inRow=false;
			hasOther=true;

		}
		
		if ((prevSym=="┐" ||  prevSym=="┌") && (allRooms[currRoomIndex].floorSymbol!="╔" && allRooms[currRoomIndex].floorSymbol!="╠")) {
		
		
			if(oppPieceDown==true) {
			
				inRoom=false;
				inRow=false;
			}
		
			oppPieceDown=true;
			
			if (oppPieceUp==true && oppPair!=true) {
			
				inRoom=true;
				inRow=true;
				oppPair=true;
			}
		}
		
		if (prevSym=="└" || prevSym=="┘" && (allRooms[currRoomIndex].floorSymbol!="╔" && allRooms[currRoomIndex].floorSymbol!="╠")) {
		
		
			if(oppPieceUp==true) {
			
				inRoom=false;
				inRow=false;
			}
		
			oppPieceUp=true;
			
			if (oppPieceDown==true && oppPair!=true) {
			
				inRoom=true;
				inRow=true;
				oppPair=true;
			}
		}
		
		if (prevSym=="@" && (i%16>5)) {
		
			inRoom=false;
		}
		
		if (prevSym=="│" && inRoom==true && inRow==false) {
		
			inRoom=false;
		}
		
		if ((prevSym=="│" || prevSym=="+") && inRow==true && rowCount>0 ) {
		
			//inRow=false;
			inRoom=false;
		}
		
		if (i%16==0) {
		
			inRoom=false;
			inRow=false;
			rowCount=0;
			hasOther=false;
			oppPieceUp=false;
			oppPieceDown=false;
			oppPair=false;
		}
		
		
		if (i%16==15) {
		
			inRoom=false;
			inRow=false;
			rowCount=0;
			hasOther=false;
			oppPieceUp=false;
			oppPieceDown=false;
			oppPair=false;
		}
		
		
		if (inRoom==true && butSym=="") {
		
			$("#roomTile"+i).css("background", tileDefColor);
			spawnArray.push(i);
			rowCount++;
			
		}
		
		butSym=$("#roomTile"+i).html();
		

		
	} //for 
	
	allRooms[currRoomIndex].spawnArray=spawnArray;
	spawnArray=[];

	
}

function makeHallDoor(width) {

	var doorRoll=0;
	var doorInd=0;
	
	if (width==3) { 
	
		doorInd=2;
	}
	
	if (width==4) {
	
		doorRoll=rollDie(2,1);
		
		if (doorRoll==1) {
		
			doorInd=2;
		}
		
		if (doorRoll==2) {
		
			doorInd=3;
		}
	
	
	}
	
	if (width==5) {
	
		doorRoll=rollDie(3,1);
		
		if (doorRoll==1) {
		
			doorInd=2;
		}
		
		if (doorRoll==2) {
		
			doorInd=3;
		}
		
		if (doorRoll==3) {
		
			doorInd=4;
		}
	
	}
	
	

	/*if (startInd==undefined) {
	
		startInd=1;
	}
	
	if (direction==undefined) {
	
		direction="right";
	}
	
	
	
	if (width==3) {
	
		if (direction=="right") {
	
			if (wall=="north" || wall=="south" ) {
				startInd+=1;
			}
		
		}
		
		if (direction=="left") {
	
			if (wall=="north" || wall=="south" ) {
				startInd-=1;
			}
		
		}
		
		if (direction=="up") {
		
			if (wall=="east" || wall=="west") {
				
				startInd-=16;
			}
		
		}
		
		if (direction=="down") {
		
			if (wall=="east" || wall=="west") {
				
				startInd+=16;
			}
		
		}
	
	}
	
	else if (width==4) {
	
		doorRoll=rollDie(2,1);
		
		if (doorRoll==1) {
		
			if (direction=="right") {
	
				if (wall=="north" || wall=="south" ) {
					startInd+=1;
				}
			
			}
			
			if (direction=="left") {
		
				if (wall=="north" || wall=="south" ) {
					startInd-=1;
				}
			
			}
			
			if (direction=="up") {
			
				if (wall=="east" || wall=="west") {
					
					startInd-=16;
				}
			
			}
			
			if (direction=="down") {
			
				if (wall=="east" || wall=="west") {
					
					startInd+=16;
				}
			
			}
		
		}
		
		if (doorRoll==2) {
		
			if (direction=="right") {
	
				if (wall=="north" || wall=="south" ) {
					startInd+=2;
				}
			
			}
			
			if (direction=="left") {
		
				if (wall=="north" || wall=="south" ) {
					startInd-=2;
				}
			
			}
			
			if (direction=="up") {
			
				if (wall=="east" || wall=="west") {
					
					startInd-=32;
				}
			
			}
			
			if (direction=="down") {
			
				if (wall=="east" || wall=="west") {
					
					startInd+=32;
				}
			
			}
		
		}
	
	}
	
	else if (width==5) {
	
		doorRoll=rollDie(3,1);
		
		if (doorRoll==1) {
		
			if (direction=="right") {
	
				if (wall=="north" || wall=="south" ) {
					startInd+=1;
				}
			
			}
			
			if (direction=="left") {
		
				if (wall=="north" || wall=="south" ) {
					startInd-=1;
				}
			
			}
			
			if (direction=="up") {
			
				if (wall=="east" || wall=="west") {
					
					startInd-=16;
				}
			
			}
			
			if (direction=="down") {
			
				if (wall=="east" || wall=="west") {
					
					startInd+=16;
				}
			
			}
		
		}
		
		if (doorRoll==2) {
		
			if (direction=="right") {
	
				if (wall=="north" || wall=="south" ) {
					startInd+=2;
				}
			
			}
			
			if (direction=="left") {
		
				if (wall=="north" || wall=="south" ) {
					startInd-=2;
				}
			
			}
			
			if (direction=="up") {
			
				if (wall=="east" || wall=="west") {
					
					startInd-=32;
				}
			
			}
			
			if (direction=="down") {
			
				if (wall=="east" || wall=="west") {
					
					startInd+=32;
				}
			
			}
		
		}
	
		if (doorRoll==3) {
		
			if (direction=="right") {
	
				if (wall=="north" || wall=="south" ) {
					startInd+=3;
				}
			
			}
			
			if (direction=="left") {
		
				if (wall=="north" || wall=="south" ) {
					startInd-=3;
				}
			
			}
			
			if (direction=="up") {
			
				if (wall=="east" || wall=="west") {
					
					startInd-=48;
				}
			
			}
			
			if (direction=="down") {
			
				if (wall=="east" || wall=="west") {
					
					startInd+=48;
				}
			
			}
		
		}
		
	}
	
	
	
	
	$("#roomTile" + startInd).html("+");*/
	
	return doorInd;
	

}

$("#createFloorBut").click(function() {

	console.log("NEW----------------------------------------");

	//to do...?
	//to scale to any dimension floor,
	//keep track of all grid cells on perimeter
	//SE corner = ((length-of-columns * length-of-rows) - 1)
	//SW corner = ((length-of-colums * length-of-rows) - 1) - length-of-rows
	//NE corner = (length-of-rows) - 1
	//NW corner = 0
	//top row = 0 through length-of-rows
	//bottom row = (length-of-colums * length-of-rows - 1) through length-of-rows
	//right column = all equal to (SE corner - (length-of-rows * n)) where n = number of rows
	//left column = all equal to (SW corner - (length-of-rows * n)) where n = number of rows
	//right column = (indicies-1) equal to (length-of-rows) when (length-of-rows % length-of-columns)?
	//left column = (indicies-1) equal to 0 when (length-of-rows % length-of-columns))
	//zero base

	/*var index=1;

	var floorLabel;
	floorLabel=floorGridArr[index].label;
	
	
	$("#" + floorLabel).html("room");*/
	
	//initialize floor button colors and allRooms array
	
	var tempRoomIndex=currFloor*20;
	for (i=0;i<floorSize;i++)
	{
		$("div.floorContainer").find("button").css("background", butDefColor);
		
		allRooms[tempRoomIndex].roomExists=false;
		currRoomIndex=tempRoomIndex;
		wipeRoom();
		tempRoomIndex++;
	}
	floorTileIndex=-1;
	
	let tempInd=buildRoom.length;
	tempInd--;
	
	for (i=0;i<tempInd;i++) {
	
			buildRoom.pop();
		
	
	}

	buildRoom[0].hasMultipiece=false;
	
	//newBuildRoom();


	var desCheckA=0; //check if descend=arrival (is duplicate)
	var desCheckB=0; //check if duplicate
	var aArrLoc=0; //a coordinate of arrival room
	//var bArrLoc=0; //b coordinate of arrival room
	//var aDesLoc=0; //a coordinate of descending room
	var bDesLoc=0; //b coordinate of descending room
	
	var roomRoll=0; //for rolling die
	
	var tempRoomIndex=0; //index of temporary room, for checking feature
	var prevRoomIndex=0; //index of previous room, if needed
	
	var floorArrIndex=0;
	var floorLabel=""; //for building floor feature
	
	var tempLabel=""; //for creating directional labels
	
	var deadEndIndex=0; //for when moving one-way into dead end
	var compareLabel=""; //for comparing button for dead end
		
	//allFloors[currFloor].floorExists=true;
	
	
	for (i=0;i<floorSize;i++) //initialize floor
	{
	
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html("█");
		
		floorArrIndex++; //left to right...
		
		
	}
	
	buildRoom[0].northPossible=false;
	buildRoom[0].eastPossible=false;
	buildRoom[0].southPossible=false;
	buildRoom[0].westPossible=false;
	
	//set obstacles
	//test
	
	let obstAm=rollDie(2,1);
	let obstProb=rollDie(3,1);
	let obstInd=rollDie0(19,1);
	
	for (i=0;i<obstAm;i++) {
		
		if (obstProb==1) {
		
			floorLabel=floorGridArr[obstInd].label;
			$("#" + floorLabel).html(".");
		}
		
		obstProb=rollDie(3,1);
		obstInd=rollDie0(19,1);
	}
	
	//test
	
	floorArrIndex=rollDie0(20, 1);
	
	//start in custom position, 0-19
	//floorArrIndex=0; //test
	
	/*let tempRoll=rollDie(4,1);
	
	if (tempRoll==1) {
		floorArrIndex=4;
	}
	
	if (tempRoll==2) {
		floorArrIndex=9;
	}
	
	if (tempRoll==3) {
		floorArrIndex=14;
	}
	
	if (tempRoll==4) {
		floorArrIndex=19;
	}*/
	
	
	buildRoom[0].floorIndex=floorArrIndex;
	
	//set arrival tile
	floorLabel=floorGridArr[floorArrIndex].label;
	aArrLoc=floorArrIndex; //save arrival tile
	$("#" + floorLabel).html("a");
	
	console.log("a is in " + aArrLoc);
	
	
	//set descending tile
	floorArrIndex=rollDie0(20, 1);
	
	//descend in custom position, 1-19
	//floorArrIndex=4; //test
	
	//if descend = arrival, or is horizonal/vertical adjacent
	while (floorArrIndex==aArrLoc || floorArrIndex+1==aArrLoc || floorArrIndex-1==aArrLoc || floorArrIndex+5==aArrLoc || floorArrIndex-5==aArrLoc) {
	
		floorArrIndex=rollDie0(20, 1);
		
	}
	
	
	/*//if descend is vertical adjacent
	while (floorArrIndex+5==aArrLoc || floorArrIndex-5==aArrLoc || floorArrIndex==aArrLoc) {
	
		floorArrIndex=rollDie0(20, 1);
		
	}
	
	
	//if descend is horizontal adjacent
	while (floorArrIndex+1==aArrLoc || floorArrIndex-1==aArrLoc || floorArrIndex==aArrLoc) {
	
		floorArrIndex=rollDie0(20, 1);
		
	}*/
	
	bDesLoc=floorArrIndex; //save descending tile
	floorLabel=floorGridArr[floorArrIndex].label;
	
	console.log("b is at " + bDesLoc);
	$("#" + floorLabel).html("b");
	
	buildRoom[0].northPossible=false;
	buildRoom[0].eastPossible=false;
	buildRoom[0].southPossible=false;
	buildRoom[0].westPossible=false;
	
	//set index back to arrival
	floorArrIndex=aArrLoc;
	
	//check north of arrival
	tempRoomIndex=floorArrIndex-5;
	
	if (tempRoomIndex<0)
	buildRoom[0].northPossible=false;
	else
	buildRoom[0].northPossible=true;
	
	//check east of arrival
	tempRoomIndex=floorArrIndex;
	
	
	if (tempRoomIndex==4 || tempRoomIndex==9 || tempRoomIndex==14 || tempRoomIndex==19)
	buildRoom[0].eastPossible=false;
	else if  (tempRoomIndex>=0 && tempRoomIndex<=19)
	buildRoom[0].eastPossible=true;

	//check south of arrival
	tempRoomIndex=floorArrIndex+5;
	
	if (tempRoomIndex>19)
	buildRoom[0].southPossible=false;
	else if  (tempRoomIndex>=0 && tempRoomIndex<=19)
	buildRoom[0].southPossible=true;

	//check west of arrival
	tempRoomIndex=floorArrIndex;
	
	if (tempRoomIndex==0 || tempRoomIndex==5 || tempRoomIndex==10 || tempRoomIndex==15)
	buildRoom[0].westPossible=false;
	else if  (tempRoomIndex>=0 && tempRoomIndex<=19)
	buildRoom[0].westPossible=true;
	
	
	buildRoom[0].exitAmount=0;
	buildRoom[0].hasNorthExit=false;
	buildRoom[0].hasSouthExit=false;
	buildRoom[0].hasWestExit=false;
	buildRoom[0].hasEastExit=false;
	
	//one pass to get exits, 50% chance of each
	//with allRooms, update hasExits here
	while (buildRoom[0].exitAmount==0) {
		
		if (buildRoom[0].northPossible==true) {
		
			roomRoll=rollDie(2, 1);
			
			if (roomRoll==1) {
			
				buildRoom[0].hasNorthExit=true;
				buildRoom[0].exitAmount++;
			}
			
		}
		
		if (buildRoom[0].eastPossible==true) {
		
			roomRoll=rollDie(2, 1);
			
			if (roomRoll==1) {
			
				buildRoom[0].hasEastExit=true;
				buildRoom[0].exitAmount++;
			}
		
		}
		
		if (buildRoom[0].southPossible==true) {
		
			roomRoll=rollDie(2, 1);
			
			if (roomRoll==1) {
			
				buildRoom[0].hasSouthExit=true;
				buildRoom[0].exitAmount++;
			}
		
		}
		
		if (buildRoom[0].westPossible==true) {
		
			roomRoll=rollDie(2, 1);
			
			if (roomRoll==1) {
			
				buildRoom[0].hasWestExit=true;
				buildRoom[0].exitAmount++;
			}
		
		}
	}
	
	
	//push onto stack if multiple exits
	if (buildRoom[0].exitAmount>1) {
	
		//console.log(buildRoom[0].exitAmount);
		newBuildRoom(aArrLoc, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
	}
	
	
	//change arrival label
	
	//N
	if (buildRoom[0].hasNorthExit==true && buildRoom[0].hasEastExit==false && buildRoom[0].hasSouthExit==false && buildRoom[0].hasWestExit==false) {
	
		tempLabel="↑<br>a"; //hehe, bra
		floorLabel=floorGridArr[aArrLoc].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//E
	if (buildRoom[0].hasNorthExit==false && buildRoom[0].hasEastExit==true && buildRoom[0].hasSouthExit==false && buildRoom[0].hasWestExit==false) {
	
		tempLabel="a→";
		floorLabel=floorGridArr[aArrLoc].label;
		$("#" + floorLabel).html(tempLabel);
		
	}

	//S
	if (buildRoom[0].hasNorthExit==false && buildRoom[0].hasEastExit==false && buildRoom[0].hasSouthExit==true && buildRoom[0].hasWestExit==false) {
	
		tempLabel="a<br>↓";
		floorLabel=floorGridArr[aArrLoc].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//W
	if (buildRoom[0].hasNorthExit==false && buildRoom[0].hasEastExit==false && buildRoom[0].hasSouthExit==false && buildRoom[0].hasWestExit==true) {
	
		tempLabel="←a";
		floorLabel=floorGridArr[aArrLoc].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	

	// N/E
	if (buildRoom[0].hasNorthExit==true && buildRoom[0].hasEastExit==true && buildRoom[0].hasSouthExit==false && buildRoom[0].hasWestExit==false) {
	
		tempLabel="↑<br>a→";
		floorLabel=floorGridArr[aArrLoc].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//N/S
	if (buildRoom[0].hasNorthExit==true && buildRoom[0].hasEastExit==false && buildRoom[0].hasSouthExit==true && buildRoom[0].hasWestExit==false) {
	
		tempLabel="↑<br>a<br>↓";
		floorLabel=floorGridArr[aArrLoc].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//N/W
	if (buildRoom[0].hasNorthExit==true && buildRoom[0].hasEastExit==false && buildRoom[0].hasSouthExit==false && buildRoom[0].hasWestExit==true) {
	
		tempLabel="↑<br>←a";
		floorLabel=floorGridArr[aArrLoc].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//E/S
	if (buildRoom[0].hasNorthExit==false && buildRoom[0].hasEastExit==true && buildRoom[0].hasSouthExit==true && buildRoom[0].hasWestExit==false) {
	
		tempLabel="a→<br>↓";
		floorLabel=floorGridArr[aArrLoc].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//E/W
	if (buildRoom[0].hasNorthExit==false && buildRoom[0].hasEastExit==true && buildRoom[0].hasSouthExit==false && buildRoom[0].hasWestExit==true) {
	
		tempLabel="←a→";
		floorLabel=floorGridArr[aArrLoc].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//S/W
	if (buildRoom[0].hasNorthExit==false && buildRoom[0].hasEastExit==false && buildRoom[0].hasSouthExit==true && buildRoom[0].hasWestExit==true) {
	
		tempLabel="←a<br>↓";
		floorLabel=floorGridArr[aArrLoc].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//N/E/S
	if (buildRoom[0].hasNorthExit==true && buildRoom[0].hasEastExit==true && buildRoom[0].hasSouthExit==true && buildRoom[0].hasWestExit==false) {
	
		tempLabel="↑<br>a→<br>↓";
		floorLabel=floorGridArr[aArrLoc].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//N/E/W
	if (buildRoom[0].hasNorthExit==true && buildRoom[0].hasEastExit==true && buildRoom[0].hasSouthExit==false && buildRoom[0].hasWestExit==true) {
	
		tempLabel="↑<br>←a→";
		floorLabel=floorGridArr[aArrLoc].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//N/W/S
	if (buildRoom[0].hasNorthExit==true && buildRoom[0].hasEastExit==false && buildRoom[0].hasSouthExit==true && buildRoom[0].hasWestExit==true) {
	
		tempLabel="↑<br>←a<br>↓";
		floorLabel=floorGridArr[aArrLoc].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//W/S/E
	if (buildRoom[0].hasNorthExit==false && buildRoom[0].hasEastExit==true && buildRoom[0].hasSouthExit==true && buildRoom[0].hasWestExit==true) {
	
		tempLabel="←a→<br>↓";
		floorLabel=floorGridArr[aArrLoc].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//N/E/S/W
	if (buildRoom[0].hasNorthExit==true && buildRoom[0].hasEastExit==true && buildRoom[0].hasSouthExit==true && buildRoom[0].hasWestExit==true) {
	
		tempLabel="↑<br>←a→<br>↓";
		floorLabel=floorGridArr[aArrLoc].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//console.log(tempLabel);
	
	
	//to do: if exitAmount > 1 pop onto stack...
	
	deadEnd=false;
	
	//set temp index & current index back to arrival
	tempRoomIndex=aArrLoc;
	floorArrIndex=aArrLoc;
	
	
	
	//build path to destination
	
	//determine which exit to use first if multiple
	//if multiple, should be popped on stack
	//while not at destination or not at a dead end, and in bounds
	
	while (floorArrIndex!=bDesLoc && buildRoom.length>0 && (floorArrIndex>=0 && floorArrIndex<=19)) {
	
		console.log(floorArrIndex);
		floorArrIndex=buildFloorToDes(floorArrIndex, prevRoomIndex, floorLabel, roomRoll, bDesLoc, aArrLoc);

	} // create feature while loop 
	
	for (i=0;i<floorSize;i++) {
		
			floorGridArr[i].symbol=$("#floor"+i).html();
			
		
	}
})

function buildFloorToDes(floorArrIndex, prevRoomIndex, floorLabel,roomRoll, bDesLoc, aArrLoc) {

	let testVal=floorArrIndex;

	//console.log(floorArrIndex);

	var compareLabel=""; //for comparing in case of bump
	
	isMulti=false;
	buildRoom[0].hasMultipiece=false;
	
	stackPopped=false;
	buildRoom[0].reroute=false;
		
	
	
	if (buildRoom[0].hasNorthExit==false && buildRoom[0].hasSouthExit==false && buildRoom[0].hasWestExit==false && buildRoom[0].hasEastExit==false && buildRoom.length==1) {
	
		floorArrIndex=777;
		console.log("all directions false");
	}
	
	if (buildRoom[0].northPossible==false && buildRoom[0].eastPossible==false && buildRoom[0].southPossible==false && buildRoom.westPossible==false) {
	
		console.log("dead end!");
	}
	
	
	if (floorArrIndex>=0 && floorArrIndex<=19) {
		//---
		
		//to do
		//all of the below should really go into the inbounds if...

		//check if hit destination, don't change current, should be okay here

		
		checkConnect (compareLabel, floorLabel, floorArrIndex, floorArrIndex);
		
		if (buildRoom[0].northPossible!=true)
		{

			buildRoom[0].hasNorthExit=false;
			
		}
		
		if (buildRoom[0].eastPossible!=true)
		{

			buildRoom[0].hasEastExit=false;
			
		}
		
		if (buildRoom[0].southPossible!=true)
		{

			buildRoom[0].hasSouthExit=false;
			
		}
		
		if (buildRoom[0].westPossible!=true)
		{

			buildRoom[0].hasWestExit=false;
			
		}
		
		

		
		//move up one if has north exit
		if (buildRoom[0].hasNorthExit==true) {
		
			prevRoomIndex=floorArrIndex;
			floorArrIndex-=5;
			

		}
		
		//move right one if has east exit
		else if (buildRoom[0].hasEastExit==true) {
		
			prevRoomIndex=floorArrIndex;
			floorArrIndex+=1;
			

		}
		
		//move down one if has south exit
		else if (buildRoom[0].hasSouthExit==true) {
		
			prevRoomIndex=floorArrIndex;
			floorArrIndex+=5;
			

		}
		
		//move left one if has west exit
		else if (buildRoom[0].hasWestExit==true) {
		
			prevRoomIndex=floorArrIndex;
			floorArrIndex-=1;
			

		}
		
		console.log("now in " + floorArrIndex);
		
		/*//test west + north
		if (buildRoom[0].hasWestExit==true || buildRoom[0].hasEastExit==true) {
		
			prevRoomIndex=floorArrIndex;
			floorArrIndex-=1;
		}
		
		else if (buildRoom[0].hasNorthExit==true || buildRoom[0].hasSouthExit==true) {
		
			prevRoomIndex=floorArrIndex;
			floorArrIndex-=5;
			
			//test
			//floorArrIndex=777;
		}*/
		
		//test east
		//prevRoomIndex=floorArrIndex;
		//floorArrIndex+=1;
		
		
		//test west
		//prevRoomIndex=floorArrIndex;
		//floorArrIndex-=1;
		
		
		//test south
		//prevRoomIndex=floorArrIndex;
		//floorArrIndex+=5;

		
		//test north
		//prevRoomIndex=floorArrIndex;
		//floorArrIndex-=5;
		
		
		
		//check if bumping into feature that's not descending room
								
		floorLabel=floorGridArr[floorArrIndex].label;
		compareLabel=$("#" + floorLabel).html();
		
		if (prevRoomIndex==floorArrIndex-1 && (floorArrIndex!=4 && floorArrIndex!=9 && floorArrIndex!=14 && floorArrIndex!=19) && compareLabel!="█" && compareLabel!="b" && floorArrIndex!=aArrLoc)
		{

			//if different, then bump
			
			
			//move back east one square
			floorArrIndex--;
			prevRoomIndex=floorArrIndex;
			
			//reroute
			console.log("bump in east");
			floorArrIndex=bumpFloor(floorArrIndex, "east", aArrLoc, bDesLoc);
			
		}
		
		floorLabel=floorGridArr[floorArrIndex].label;
		compareLabel=$("#" + floorLabel).html();
		
		if (prevRoomIndex==floorArrIndex+1 && floorArrIndex!=0 && floorArrIndex!=5 && floorArrIndex!=10 && floorArrIndex!=15 && compareLabel!="█" && compareLabel!="b")
		{

			//if different, then bump
			
			
			//move back west one square
			floorArrIndex++;
			prevRoomIndex=floorArrIndex;
			
			//reroute
			console.log("bump in west");
			floorArrIndex=bumpFloor(floorArrIndex, "west", aArrLoc, bDesLoc);
			
		}
		
		floorLabel=floorGridArr[floorArrIndex].label;
		compareLabel=$("#" + floorLabel).html();
		
		if (prevRoomIndex==floorArrIndex-5 && floorArrIndex<15 && compareLabel!="█" && compareLabel!="b")
		{

			//if different, then bump
			
			
			//move back north one square
			
			floorArrIndex+=5;
			prevRoomIndex=floorArrIndex;
			
			//reroute
			
			console.log("bump in north");
			floorArrIndex=bumpFloor(floorArrIndex, "north", aArrLoc, bDesLoc);
			
		}
		
		floorLabel=floorGridArr[floorArrIndex].label;
		compareLabel=$("#" + floorLabel).html();
		
		if (prevRoomIndex==floorArrIndex+5 && floorArrIndex>4 && compareLabel!="█" && compareLabel!="b")
		{

			//if different, then bump
			
			
			//move back south one square
			floorArrIndex-=5;
			prevRoomIndex=floorArrIndex;
			
			//reroute
			console.log("bump in south");
			floorArrIndex=bumpFloor(floorArrIndex, "south", aArrLoc, bDesLoc);
			
		}
		
		
		/*if (buildRoom[0].reroute==true) {
		
			//redo exits if bump
			
			//move up one if has north exit
			if (buildRoom[0].hasNorthExit==true) {
			
				prevRoomIndex=floorArrIndex;
				floorArrIndex-=5;
				
				//test
				//floorArrIndex=777;
			}
			
			//move right one if has east exit
			else if (buildRoom[0].hasEastExit==true) {
			
				prevRoomIndex=floorArrIndex;
				floorArrIndex+=1;
				
				//test
				//floorArrIndex=777;
			}
			
			//move down one if has south exit
			else if (buildRoom[0].hasSouthExit==true) {
			
				prevRoomIndex=floorArrIndex;
				floorArrIndex+=5;
				
				//test
				//floorArrIndex=777;
			}
			
			//move left one if has west exit
			else if (buildRoom[0].hasWestExit==true) {
			
				prevRoomIndex=floorArrIndex;
				floorArrIndex-=1;
				
				//test
				//floorArrIndex=777;
			}
		
		}*/
		
		
		
		if (floorArrIndex==bDesLoc) {
		
			let tempRoomIndex=0; //lazy
			hitDes=true;
		
			console.log("hit descend!");
			if (buildRoom.length==1) {
			
				console.log("popped all in stack and all were dead ends");
				floorArrIndex=777;
			}
			
			if (buildRoom.length>1) {
			
				buildRoom.shift();
				stackPopped=true;
				//floorArrIndex=buildRoom[0].floorIndex; //popped stack*/
				
				//console.log(buildRoom[0].floorIndex);
				floorArrIndex=buildRoom[0].floorIndex;
				buildRoom[0].hasMultiPiece=false;
				console.log("new index is: " + floorArrIndex);
				
				console.log("checking surroundings of new popped room");
				checkConnect (compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
				//floorArrIndex=floorCheckSurround(compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
				
				while (buildRoom.length>1 && buildRoom[0].northPossible==false && buildRoom[0].eastPossible==false && buildRoom[0].southPossible==false && buildRoom[0].westPossible==false) {
					
					console.log("last popped room was dead end");
					//buildRoom[1]=buildRoom[0];
					buildRoom.shift();
					stackPopped=true;
					
					//console.log(buildRoom[0].floorIndex);
					floorArrIndex=buildRoom[0].floorIndex; //not needed since return buildRoom's anyway?
					buildRoom[0].hasMultiPiece=false;
					console.log("new index is: " + floorArrIndex);
					
					console.log("checking surroundings of new popped room");
					checkConnect (compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
					//floorArrIndex=floorCheckSurround(compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
					
				} //while
				
				//check if exits of popped room are now occupied
				
				//move to appropriate position from popped room
				
				let dirChosen=false;
				prevRoomIndex=777;
				
				//move up one if has north exit
				if (buildRoom[0].hasNorthExit==true) {
				
					//not occupied
					if (buildRoom[0].northPossible==true) {
				
						prevRoomIndex=floorArrIndex;
						floorArrIndex-=5;
						
						//check if destination
						floorLabel=floorGridArr[floorArrIndex].label;
						compareLabel=$("#" + floorLabel).html();
						
						if (compareLabel!="b" && compareLabel=="█") {
							dirChosen=true;
						}
						
						//move back and exit is false
						else {
						
							buildRoom[0].hasNorthExit=false;
							floorArrIndex+=5;
							prevRoomIndex=777;
						}
					}
					
					//occupied
					else {
					
						buildRoom[0].hasNorthExit=false;
					}
		
				}
				
				//move right one if has east exit
				else if (buildRoom[0].hasEastExit==true && dirChosen==false) {
				
					if (buildRoom[0].eastPossible==true) {
					
						prevRoomIndex=floorArrIndex;
						floorArrIndex+=1;
						
						//check if destination
						floorLabel=floorGridArr[floorArrIndex].label;
						compareLabel=$("#" + floorLabel).html();
						
						if (compareLabel!="b" && compareLabel=="█") {
							dirChosen=true;
						}
						
						//move back and exit is false
						else {
						
							buildRoom[0].hasEastExit=false;
							floorArrIndex-=1;
							prevRoomIndex=777;
						}			
					}
					
					//occupied
					else {
					
						buildRoom[0].hasEastExit=false;
					}
				}
				
				//move down one if has south exit
				else if (buildRoom[0].hasSouthExit==true && dirChosen==false) {
				
					if (buildRoom[0].southPossible==true) {
						prevRoomIndex=floorArrIndex;
						floorArrIndex+=5;
						
						//check if destination
						floorLabel=floorGridArr[floorArrIndex].label;
						compareLabel=$("#" + floorLabel).html();
						
						if (compareLabel!="b" && compareLabel=="█") {
							dirChosen=true;
						}
						
						//move back and exit is false
						else {
						
							buildRoom[0].hasSouthExit=false;
							floorArrIndex-=5;
							prevRoomIndex=777;
						}
						
					}
		
					//occupied
					else {
					
						buildRoom[0].hasSouthExit=false;
					}
				}
				
				//move left one if has west exit
				else if (buildRoom[0].hasWestExit==true && dirChosen==false) {
				
					if (buildRoom[0].westPossible==true) {
						prevRoomIndex=floorArrIndex;
						floorArrIndex-=1;
						//check if destination
						floorLabel=floorGridArr[floorArrIndex].label;
						compareLabel=$("#" + floorLabel).html();
						
						if (compareLabel!="b" && compareLabel=="█") {
							dirChosen=true;
						}
						
						//move back and exit is false
						else {
							
							buildRoom[0].hasWestExit=false;
							floorArrIndex+=1;
							prevRoomIndex=777;
						}
					}
					
					//occupied
					else {
					
						buildRoom[0].hasWestExit=false;
					}

				}
			
			} //if stack length >1
			
			console.log("hit des, now in index " + floorArrIndex);
			
		} //ran into des
		
		console.log("prevRoomIndex is " + prevRoomIndex);
		
		checkConnect (compareLabel, floorLabel, floorArrIndex, floorArrIndex);
		//floorArrIndex=floorCheckSurround(compareLabel, floorLabel, floorArrIndex, floorArrIndex);
		
		buildRoom[0].floorIndex=floorArrIndex;
		
		//---
		
		
		//create random valid feature in new current room
		//check current position (having just moved), then make feature


		if (floorArrIndex!=aArrLoc && floorArrIndex!=bDesLoc) {
		
		//moving east
		//if (floorArrIndex==prevRoomIndex+1 || (stackPopped==true && buildRoom[0].hasEastExit==true)) {
		if (floorArrIndex==prevRoomIndex+1) {
			console.log("east");
			
		
			//set previous room hasEast to false if multipiece
			//necessarily is at top of stack
			/*if (isMulti==true) {
			
				let tempInd=buildRoom.length;
				tempInd--;
				
				if (tempInd>0) {
				
					buildRoom[tempInd].hasEastExit=false;
				
				}
			
			}*/
			
			//check if on descend tile
			//if (floorArrIndex!=bDesLoc) {
		
				
				
				//if not bump
				//else {
			
					//moving east in top row
					if (floorArrIndex<5) {
					
						//moving east in top row, not in corner (top right)
						if (floorArrIndex<4) {
						
							//floorArrIndex=777;
							
							//four options: ╦, ═, ╗, or room
							// 28% chance of non room, 14% chance of room
							
							roomRoll=rollDie(7,1);
							
							//roomRoll=rollDie(3,1);
							
							//console.log("roll is " + roomRoll);
							
							//═
							if (((roomRoll==1 || roomRoll==2))  && (buildRoom[0].eastPossible==true || buildRoom[0].eastMand==true) && (buildRoom[0].southMand!=true)) {
							
								$("#" + floorLabel).html("═");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false; //coming from west
								
								buildRoom[0].exitAmount=1;
								
								
								console.log("═, moving east in top row");
								
								//floorArrIndex=777;
							
							} //═
							
							//╗
							else if ((roomRoll==3 || roomRoll==4) && buildRoom[0].hasMultipiece==true && (buildRoom[0].southConnect==true || buildRoom[0].southMand==true) && buildRoom[0].eastMand!=true) {

								$("#" + floorLabel).html("╗");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false; //coming from west
								
								buildRoom[0].exitAmount=1;
							
								console.log("╗, moving east in top row");
								
								//floorArrIndex=777;
							
							} //╗
							
							//╦
							else if ((roomRoll==5 || roomRoll==6) && buildRoom[0].hasMultipiece==false && (buildRoom[0].eastPossible==true || buildRoom[0].eastMand==true) && (buildRoom[0].southPossible==true || buildRoom[0].southMand==true)) {
						
								$("#" + floorLabel).html("╦");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false; //coming from west
								
								buildRoom[0].hasMultipiece=true;
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
								
								console.log("╦, moving east in top row");
							
								//floorArrIndex=777;
								
							} //╦
							
							
							//room
							else {

								console.log("room, moving east in top row");
								setFloorAsRoom(floorArrIndex, "east");
							
								//floorArrIndex=777; //test
							
							} //room
						
						
						} //moving east in top row and not in corner
						
						//moving east, in top right corner
						if (floorArrIndex==4) {
						
						
							roomRoll=rollDie(3,1);
							
							//roomRoll=1;
							
							//╗
							if ((roomRoll==1 || roomRoll==2) && (buildRoom[0].southPossible==true || buildRoom[0].southMand==true)) {
							

								$("#" + floorLabel).html("╗");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false; //coming from west
								
								buildRoom[0].exitAmount=1;
								
								console.log("╗, moving east in top left corner");
								
							
							} //╗
							
							//room
							else {
							
								console.log("room, moving east in top left corner");
								setFloorAsRoom(floorArrIndex, "east");
								
							
							} //room
						
							//floorArrIndex=777; //test
						
						}//moving east, in top right corner
					
					} //moving east in top row
					
					//moving east in bottom row
					if (floorArrIndex>14) {
					
						//moving east in bottom row, not in corner
						if (floorArrIndex<19) {
						
							//four options: ╩, ═, ╝, or room
							
							roomRoll=rollDie(7,1);
							
							//roomRoll=rollDie(3,1); //test
							
							
							
							//═
							if ((roomRoll==1 || roomRoll==2) && ((buildRoom[0].eastPossible==true || buildRoom[0].eastMand==true) && buildRoom[0].northMand!=true)) {
							
								
								$("#" + floorLabel).html("═");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false; //coming from west
								
								buildRoom[0].exitAmount=1;
								
								console.log("═, moving east in bottom row");
								
								//floorArrIndex=777;
							
							} //═
							
							
							//╝
							else if ((roomRoll==3 || roomRoll==4) && buildRoom[0].hasMultipiece==true && (buildRoom[0].northPossible==true || buildRoom[0].northMand==true)) {

								$("#" + floorLabel).html("╝");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false; //coming from west
								
								buildRoom[0].exitAmount=1;
								
								console.log("╝, moving east in bottom row");
								
							
							} //╝
							
							//╩
							else if ((roomRoll==5 || roomRoll==6) && buildRoom[0].hasMultipiece==false && (buildRoom[0].eastPossible==true || buildRoom[0].eastMand==true) && (buildRoom[0].northPossible==true || buildRoom[0].northMand==true)) {
								
								$("#" + floorLabel).html("╩");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false; //coming from west
								
								buildRoom[0].hasMultipiece=true;
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
								
							
								console.log("╩, moving east in bottom row");
							
							} //╩
							
							
							//room
							else{
							
								setFloorAsRoom(floorArrIndex, "east");
							
							} //room
						
							//floorArrIndex=777;
						
						
						} // moving east in bottom row and not in corner
						
						//moving east, in bottom right corner 
						if (floorArrIndex==19) {
						
							//two choices: ╝, room
						
							roomRoll=rollDie(3,1);
							
							//roomRoll=1;
							
							
							//╝
							if ((roomRoll==1 || roomRoll==2) && buildRoom[0].northConnect==true) {
							
								$("#" + floorLabel).html("╝");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false; //coming from west
								
								buildRoom[0].exitAmount=1;
								
								console.log("╝, moving east in bottom right corner");
								
							} //╝
							
							//room
							else {
								
								setFloorAsRoom(floorArrIndex, "east");
								
							
							} //room
						
							//floorArrIndex=777;
						
						} //moving east, in bottom corner
					
					} //moving east in bottom row
					
					//moving east, somewhere in middle (not in top or bottom row)
					if (floorArrIndex>4 && floorArrIndex<15) {
					
						//console.log("somewhere in middle");
					
						//moving east, somewhere in middle, not in rightmost column
						if (floorArrIndex%5 != 4) {
						
							//seven choices: ═,  ╝, ╗, ╩, ╦, ╬, room
							
							roomRoll=rollDie(13, 1);
							
							
							//roomRoll=rollDie(6,1); //test
							
							//roomRoll=6;//test
							
							//═
							if ((roomRoll==1 || roomRoll==2) && (buildRoom[0].eastPossible==true || buildRoom[0].eastMand==true) && buildRoom[0].southMand!=true && buildRoom[0].northMand!=true) {
							
								$("#" + floorLabel).html("═");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false; //coming from west
								
								buildRoom[0].exitAmount=1;
								
								
								//floorArrIndex=777;
							
							
							} //═
							
							
							//╝
							else if ((roomRoll==3 || roomRoll==4) && (buildRoom[0].northPossible==true || buildRoom[0].northMand==true) && buildRoom[0].eastMand!=true && buildRoom[0].southMand!=true) {

								$("#" + floorLabel).html("╝");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false; //coming from west
								
								buildRoom[0].exitAmount=1;
							
							} //╝
							
							
							//╗
							else if ((roomRoll==5 || roomRoll==6) && (buildRoom[0].southPossible==true|| buildRoom[0].southMand==true) && buildRoom[0].eastMand!=true && buildRoom[0].northMand!=true) {

								$("#" + floorLabel).html("╗");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false; //coming from west
								
								buildRoom[0].exitAmount=1;
							
							} //╗
							
							
							//╩
							else if ((roomRoll==7 || roomRoll==8)  && (buildRoom[0].northPossible==true || buildRoom[0].northMand==true)&& (buildRoom[0].eastPossible==true || buildRoom[0].eastMand==true)) {

								$("#" + floorLabel).html("╩");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false; //coming from west
								
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
							
							
							} //╩
							
							
							//╦
							else if (roomRoll==9 ||roomRoll==10 && (buildRoom[0].southPossible==true && buildRoom[0].southMand==true) && (buildRoom[0].eastPossible==true && buildRoom[0].eastMand==true) && buildRoom[0].northMand!=true) {

								$("#" + floorLabel).html("╦");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false; //coming from west
								
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
								
							
								//floorArrIndex=777;
							
							
							} //╦
							
							//╬
							else if (roomRoll<=5 && buildRoom[0].northPossible==true && buildRoom[0].southPossible==true && buildRoom[0].eastPossible==true && buildRoom[0].westPossible==true) {

								$("#" + floorLabel).html("╬");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false; //coming from west
								
								isMulti=true;
								
								//to do: change to multiple exits	
								buildRoom[0].exitAmount=3;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
					
								//floorArrIndex=777;
							
							
							} //╬
							
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "east");

							
							} //room
							
						
							//floorArrIndex=777;
						
						}
						
						//moving east, somewhere in middle, in rightmost column
						if (floorArrIndex%5==4) {
						
							//four choices: ╣, ╝ , ╗, room
							
							roomRoll=rollDie(6,1);
							
							
							//roomRoll=rollDie(3,1); //test
							
							
							//╝
							if ((roomRoll==1 || roomRoll==2) && buildRoom[0].hasMultipiece==true && buildRoom[0].northPossible==true && buildRoom[0].southMand!=true) {

								$("#" + floorLabel).html("╝");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false; //coming from west
								
								buildRoom[0].exitAmount=1;
								
							
							} //╝
							
							
							//╗
							else if ((roomRoll==3 || roomRoll==4) && buildRoom[0].hasMultipiece==true && (buildRoom[0].southPossible==true || buildRoom[0].southMand==true) && buildRoom[0].northMand!=true) {

								$("#" + floorLabel).html("╗");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false; //coming from west
								
								buildRoom[0].exitAmount=1;
								
							
							} //╗
							
							
							
							//╣
							else if (roomRoll<=3 && buildRoom[0].hasMultipiece==false && buildRoom[0].northPossible==true && buildRoom[0].southPossible==true) {

								$("#" + floorLabel).html("╣");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false; //coming from west
								
								buildRoom[0].hasMultipiece=true;
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
								
							
							} //╣
							
							//room
							else {

								setFloorAsRoom(floorArrIndex, "east");
								
							
							} //room
						
							//floorArrIndex=777;
						
						} //moving east, somewhere in middle, rightmost column
					
					} //moving east, somewhere in middle
					
				//} //bump
			
			//}//not on descend tile
		
		} //moving east
		
		//moving west
		//if (floorArrIndex==prevRoomIndex-1 || (stackPopped==true && buildRoom[0].hasWestExit==true)) {
		if (floorArrIndex==prevRoomIndex-1) {
			console.log("west");
		
			//set previous room hasEast to false if multipiece
			//necessarily is at top of stack
			/*if (isMulti==true) {
			
				let tempInd=buildRoom.length;
				tempInd--;
				
				if (tempInd>0) {
				
					buildRoom[tempInd].hasWestExit=false;
				}
			
			}*/
			
			//check if on descend tile
			//if (floorArrIndex!=bDesLoc) {
		
				/*//check if bumping into feature
							
				floorLabel=floorGridArr[floorArrIndex].label;
				compareLabel=$("#" + floorLabel).html();
				
				
				if (compareLabel!="█")
				{
					//if different, then bump

					//move back (east) one square
					floorArrIndex++;
					
					//reroute
					floorArrIndex=bumpFloor(floorArrIndex, "west");
					
					//floorArrIndex=777;
					
				}
				
				//if not bump
				else {*/
			
					//moving west, in top row
					if (floorArrIndex<5) {
					
						//moving west, in top row, not in corner
						if (floorArrIndex>0) {
						
							//four choices: ═, ╦, ╔, room
							
							roomRoll=rollDie(6,1);
							
							//═
							if ((roomRoll==1 || roomRoll==2) && ((buildRoom[0].westPossible==true || buildRoom[0].westMand==true) && buildRoom[0].southMand!=true)) {
							
								$("#" + floorLabel).html("═");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false; //coming from east
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=true; 
								
								buildRoom[0].exitAmount=1;
								
								
								//floorArrIndex=777;
							
							} //═
							
							//╔
							else if ((roomRoll==3 || roomRoll==4) && buildRoom[0].hasMultipiece==true && (buildRoom[0].southPossible==true && buildRoom[0].southMand==true) && buildRoom[0].westMand!=true) {
							
								$("#" + floorLabel).html("╔");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false; //coming from east
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false; 
								
								buildRoom[0].exitAmount=1;
							
							} //╔
							
							
							//╦
							else if (roomRoll<=3 && buildRoom[0].hasMultipiece==false && (buildRoom[0].southPossible==true || buildRoom[0].southMand==true) && (buildRoom[0].westPossible==true || buildRoom.westMand==true)) {
							
								$("#" + floorLabel).html("╦");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false; //coming from east
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=true; 
								
								buildRoom[0].hasMultipiece=true;
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
								
								
							
								//floorArrIndex=777;
							
							} //╦
							
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "west");
							
							} //room
						
							//floorArrIndex=777;
						
						} //moving west, in top row, not in corner
						
						//moving west, in top corner
						if (floorArrIndex==0) {
						
							//two choices: ╔, room
							
							roomRoll=rollDie(3,1);
							
							//╔
							if ((roomRoll==1 || roomRoll==2) && (buildRoom[0].southPossible==true || buildRoom[0].southMand==true)) {
							
								$("#" + floorLabel).html("╔");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false; //coming from east
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false; 
								
								buildRoom[0].exitAmount=1;
							
							} //╔
							
							
							//room
							else  {
							
								setFloorAsRoom(floorArrIndex, "west");
							
							} //room
						
							//floorArrIndex=777;
						
						} //moving west, in top corner (top left)
					
					} //moving west, in top row
					
					
					
					
					//moving west, in bottom row
					if (floorArrIndex>14) {
					
						//moving west, in bottom row, not in corner (bottom left)
						if (floorArrIndex<19) {
						
							//four choices: ═, ╩, ╚, room
							
							roomRoll=rollDie(6,1);
							
							//═
							if ((roomRoll==1 || roomRoll==2) && ((buildRoom[0].westPossible==true || buildRoom[0].westMand==true) && buildRoom[0].northMand!=true)) {
							
								$("#" + floorLabel).html("═");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false; //coming from east
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=true; 
								
								buildRoom[0].exitAmount=1;
								
								
								//floorArrIndex=777;
							
							} //═
					
							
							
							//╚
							else if ((roomRoll==3 || roomRoll==4) && buildRoom[0].hasMultipiece==true && buildRoom[0].northPossible==true && buildRoom[0].westMand!=true) {
							
								$("#" + floorLabel).html("╚");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false; //coming from east
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false; 
								
								buildRoom[0].exitAmount=1;
							
							} //╚
							
							//╩
							else if (roomRoll<=3 && buildRoom[0].hasMultipiece==false && buildRoom[0].northPossible==true && buildRoom[0].westPossible==true) {
							
								$("#" + floorLabel).html("╩");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false; //coming from east
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=true; 
								
								buildRoom[0].hasMultipiece=true;
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
								
								
							
								//floorArrIndex=777;
							
							} //╩
							
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "west");
							
							} //room
						
							//floorArrIndex=777;
						
						} //moving west, in bottom row, not in corner
						
						//moving west, in bottom left corner
						if (floorArrIndex==15) {
						
							//two choices: ╚, room
							
							roomRoll=rollDie(3,1);
							
							//╚
							if ((roomRoll==1 || roomRoll==2) && buildRoom[0].northPossible==true) {
							
								$("#" + floorLabel).html("╚");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false; //coming from east
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false; 
								
								buildRoom[0].exitAmount=1;
							
							} //╚
							
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "west");
							
							} //room
						
							//floorArrIndex=777;
						
						}//moving west, in bottom row, not in corner
						
					
					} //moving west, in bottom row
					
					
					//moving west, not in top/bottom row, somewhere in middle
					if (floorArrIndex>4 && floorArrIndex<15) {
					
						//moving west, somewhere in middle, not in leftmost column
						if (floorArrIndex%5!=0) {
						
							//seven choices: ═,  ╚, ╔, ╩, ╦, ╬, room
							
							roomRoll=rollDie(13, 1);
							
							//roomRoll=6;//test
							
							//═
							if ((roomRoll==1 || roomRoll==2) && (buildRoom[0].westPossible==true || buildRoom[0].westMand==true) && buildRoom[0].northMand!=true && buildRoom[0].southMand!=true) {
							
								$("#" + floorLabel).html("═");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false; //coming from east
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=true; 
								
								buildRoom[0].exitAmount=1;
								
								
								//floorArrIndex=777;
							
							
							} //═
							
							
							//╚
							else if ((roomRoll==3 || roomRoll==4) && buildRoom[0].northPossible==true && buildRoom[0].westMand!=true && buildRoom[0].southMand!=true) {

								$("#" + floorLabel).html("╚");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false; //coming from east
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false;
								
								buildRoom[0].exitAmount=1;
							
							} //╚
							
							
							//╔
							else if ((roomRoll==5 || roomRoll==6) && (buildRoom[0].southPossible==true && buildRoom[0].southMand==true) && buildRoom[0].northMand!=true && buildRoom[0].westMand!=true) {

								$("#" + floorLabel).html("╔");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false; //coming from east
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false;
								
								buildRoom[0].exitAmount=1;
							
							} //╔
							
							
							//╩
							else if ((roomRoll==7 || roomRoll==8) && (buildRoom[0].northPossible==true || buildRoom[0].northMand==true)  && (buildRoom[0].westPossible==true || buildRoom[0].westMand==true) && buildRoom[0].southMand!=true) {

								$("#" + floorLabel).html("╩");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false; //coming from east
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=true;
								
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
							
							
							} //╩
							
							
							//╦
							else if ((roomRoll==9 || roomRoll==10) && buildRoom[0].southPossible==true && buildRoom[0].westPossible==true && buildRoom[0].northMand!=true) {

								$("#" + floorLabel).html("╦");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false; //coming from east
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=true;
								
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
								
							
								//floorArrIndex=777;
							
							
							} //╦
							
							
							//╬
							else if (roomRoll<=5 && buildRoom[0].northPossible==true && buildRoom[0].southPossible==true && buildRoom[0].westPossible==true) {

								$("#" + floorLabel).html("╬");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false; //coming from east
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=true;
								
								isMulti=true;
								
								//to do: change to multiple exits	
								buildRoom[0].exitAmount=3;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
					
								//floorArrIndex=777;
							
							
							} //╬
							
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "west");

							
							
							} //room
						
							//floorArrIndex=777;
						
						} //moving west, somewhere in middle, not in leftmost column
						
						
						
						//moving west, somewhere in middle, in leftmost column
						if (floorArrIndex%5==0) {
						
							//four choices: ╠, ╔, ╚, room
							
							roomRoll=rollDie(4,1);
							
							
							//╚
							if (roomRoll==1 && buildRoom[0].hasMultipiece==true && buildRoom[0].northPossible==true && buildRoom[0].southMand!=true) {

								$("#" + floorLabel).html("╚");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false; //coming from east
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false;
								
								buildRoom[0].exitAmount=1;
								
							
							} //╚
							
							
							//╔
							else if (roomRoll==2 && buildRoom[0].hasMultipiece==true && buildRoom[0].southPossible==true && buildRoom[0].northMand!=true) {

								$("#" + floorLabel).html("╔");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false; //coming from east
								
								buildRoom[0].exitAmount=1;
								
							
							} //╔
							

							
							//╠
							else if (roomRoll==3 && buildRoom[0].hasMultipiece==false) {

								$("#" + floorLabel).html("╠");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false; //coming from east
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false;
								
								buildRoom[0].hasMultipiece=true;
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
								
							
							} //╠
							
							
							//room
							else  {

								setFloorAsRoom(floorArrIndex, "west");
								
							
							} //room
							
							
						
							//floorArrIndex=777;
							
							
						
						} //moving west, somewhere in middle, in leftmost column
					
					} //moving west, not in top/bottom row, somewhere in middle
			
				//} //bump
			
			//} //not on descend
		
		} //moving west
		
		
		//moving south
		//if (floorArrIndex==prevRoomIndex+5 || (stackPopped==true && buildRoom[0].hasSouthExit==true)) {
		if (floorArrIndex==prevRoomIndex+5) {
			console.log("south");
		
			//set previous room hasEast to false if multipiece
			//necessarily is at top of stack
			/*if (isMulti==true) {
			
				let tempInd=buildRoom.length;
				tempInd--;
				
				if (tempInd>0) {
				
					buildRoom[tempInd].hasSouthExit=false;
				}
			
			}*/
			
			//check if on descend
			//if (floorArrIndex!=bDesLoc) {
			
				/*//check if bumping into feature
							
				floorLabel=floorGridArr[floorArrIndex].label;
				compareLabel=$("#" + floorLabel).html();

				if (compareLabel!="█")
				{
					
					//if different, then bump
					
					//move back up (north) one square
					floorArrIndex-=5;
					
					//reroute
					floorArrIndex=bumpFloor(floorArrIndex, "south");
					
					//floorArrIndex=777;
					
				}
				
				
				
				//if not bump
				else {*/
			

					//---
					//moving south, in leftmost column
					if (floorArrIndex%5==0) {
					
						//moving south in leftmost column, not in corner
						if (floorArrIndex != 15) {
						
							//four choices: ╠, ╚, ║, room
							
							roomRoll=rollDie(4,1);
							
							//╚
							if (roomRoll==1 && buildRoom[0].hasMultipiece==true && buildRoom[0].eastPossible==true && buildRoom[0].southMand!=true) {
							
								$("#" + floorLabel).html("╚");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=false;
							
							} //╚
							
							
							//╠
							else if (roomRoll==2 || roomRoll==1 && buildRoom[0].hasMultipiece==false && buildRoom[0].eastPossible==true && buildRoom[0].southPossible==true) {
							
								$("#" + floorLabel).html("╠");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=false;
								
								buildRoom[0].hasMultipiece=true;
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
							
							} //╠
							
							
							//║
							else if (roomRoll==3 && buildRoom[0].eastMand!=true && buildRoom[0].southPossible==true) {
							
								$("#" + floorLabel).html("║");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=false;
							
							} //║
							
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "south");
							
							} //room
			
						
							//floorArrIndex=777;
							
						
						}//moving south in leftmost column, not in corner (bottom left)
						
						
						//moving south in leftmost column, in bottom left corner
						if (floorArrIndex == 15) {
						
							//two choices: ╚, room
							
							roomRoll=rollDie(2,1);
							
							roomRoll=1;
							
							//╚
							if (roomRoll==1 && buildRoom[0].eastPossible==true) {
							
								
								$("#" + floorLabel).html("╚");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=false;
							
							
							} //╚
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "south");
							
							} //room
						
							//floorArrIndex=777;
						
						} //moving south in leftmost column, in bottom left corner
					
					} //moving south, in leftmost column
					
					
					//---
					//moving south, in rightmost column
					if (floorArrIndex %5 == 4 ) {
					
						//moving south, in rightmost column, not in corner (bottom right)
						if (floorArrIndex != 19) {
						
							//four choices: ╣, ╝, ║, room
							
							roomRoll=rollDie(4,1);
							
							//╝
							if (roomRoll==1 && buildRoom[0].hasMultipiece==true && buildRoom[0].westPossible==true && buildRoom[0].southMand!=true) {
							
								$("#" + floorLabel).html("╝");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=true;
							
							} //╝
							
							
							//╣
							else if (roomRoll==2 && buildRoom[0].hasMultipiece==false && buildRoom[0].westPossible==true && buildRoom[0].southPossible==true) {
							
								$("#" + floorLabel).html("╣");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=true;
								
								buildRoom[0].hasMultipiece=true;
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
							
							} //╣
							
							
							//║
							else if (roomRoll==3 && buildRoom[0].southPossible==true && buildRoom[0].westMand!=true) {
							
								$("#" + floorLabel).html("║");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=false;
							
							} //║
							
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "south");
							
							} //room
						
							
						
						} //moving south, in rightmost column, not in corner (bottom right)
						
						//moving south, in rightmost column, in bottom right corner
						if (floorArrIndex == 19) {
						
							//two choices: ╝, room
							
							roomRoll=rollDie(3,1);
							
							roomRoll=1;
							
							
							//╝
							if ((roomRoll==1 || roomRoll==2) && buildRoom[0].westPossible==true) {
							
								
								$("#" + floorLabel).html("╝");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=true;
							
							
							} //╝
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "south");
							
							} //room
						
							//floorArrIndex=777;
						
						} //moving south, in rightmost column, in bottom right corner
					
					
					} //moving south, in rightmost column
					
					//moving south, somewhere in the middle
					if (floorArrIndex%5 != 0 && floorArrIndex%5 != 4 && floorArrIndex<19){
					
						//console.log("no");
					
						//moving south, somewhere in middle, not in bottom row
						if (floorArrIndex<15) {
						
							//eight choices: ╩, ║, ╝, ╚, ╣, ╠, ╬, room
							
							roomRoll=rollDie(8,1);
							
							//╩
							if (roomRoll==1 && buildRoom[0].eastPossible==true && buildRoom[0].westPossible==true && buildRoom[0].southMand!=true) {
							
								$("#" + floorLabel).html("╩");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=true;

								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
							
							} //╩
							
							
							//║
							else if (roomRoll==2 && buildRoom[0].southPossible==true && buildRoom[0].eastMand!=true && buildRoom[0].westMand!=true) {
							
								$("#" + floorLabel).html("║");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=false;
							
							} //║
							
							
							//╝
							else if (roomRoll==3 && buildRoom[0].westPossible==true && buildRoom[0].eastPossible!=true && buildRoom[0].southMand!=true) {
							
								$("#" + floorLabel).html("╝");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=true;
							
							} //╝
							
							
							//╚
							else if (roomRoll==4 && buildRoom[0].eastPossible==true && buildRoom[0].westMand!=true && buildRoom[0].southMand!=true) {
							
								$("#" + floorLabel).html("╚");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=false;
							
							} //╚
							
							
							//╣
							else if (roomRoll==5 && buildRoom[0].southPossible==true && buildRoom[0].westPossible==true && buildRoom[0].eastMand!=true) {
							
								$("#" + floorLabel).html("╣");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=true;
								
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
							
							
							} //╣
							
							
							//╠
							else if (roomRoll==6 && buildRoom[0].eastPossible==true && buildRoom[0].southPossible==true && buildRoom[0].westMand!=true) {
							
								$("#" + floorLabel).html("╠");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=false;
								
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
							
							
								
							
							} //╠
							
							//╬
							else if (roomRoll==7 && buildRoom[0].eastPossible==true && buildRoom[0].southPossible==true && buildRoom[0].westPossible==true) {
							
								$("#" + floorLabel).html("╬");
								buildRoom[0].hasSouthExit=true;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=true; 
								
								isMulti=true;
								
								//to do: change to multiple exits	
								buildRoom[0].exitAmount=3;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
					
							
							} //╬
							
							
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "south");
							
							} //room
						
							//floorArrIndex=777;
						
						} //moving south, somewhere in middle, not in bottom row
						
						//moving south, somewhere in middle, in bottom row
						if (floorArrIndex>15) {
						
							//four choices: ╩, ╚, ╝, room
							
							roomRoll=rollDie(4,1);
							
							
							//╝
							if (roomRoll==1 && buildRoom[0].hasMultipiece==true && buildRoom[0].westPossible==true && buildRoom[0].eastMand!=true) {
							
								$("#" + floorLabel).html("╝");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=true;
							
							} //╝
							
							
							//╚
							else if (roomRoll==2 && buildRoom[0].hasMultipiece==true && buildRoom[0].eastPossible==true && buildRoom[0].westMand!=true) {
							
								$("#" + floorLabel).html("╚");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=false;
							
							} //╚
							
							//╩
							else if (roomRoll==3 && buildRoom[0].hasMultipiece==false && buildRoom[0].eastPossible==true && buildRoom[0].westPossible==true) {
							
								$("#" + floorLabel).html("╩");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=true;

								buildRoom[0].hasMultipiece=true;
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
							
							} //╩
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "south");
							
							} //room
						
							//floorArrIndex=777;
						
						} //moving south, somewhere in middle, in bottom row
					
					} //moving south, somewhere in the middle
					
				//} //bump
			
			//} //not on descend
		
		} //moving south
		
		//moving north
		//if (floorArrIndex==prevRoomIndex-5 || (stackPopped==true && buildRoom[0].hasNorthExit==true)) {
		if (floorArrIndex==prevRoomIndex-5) {
			console.log("north");
		
			//set previous room hasNorth to false if multipiece
			//necessarily is at top of stack
			/*if (isMulti==true) {
			
				let tempInd=buildRoom.length;
				tempInd--;
				
				if (tempInd>0) {
				
					buildRoom[tempInd].hasNorthExit=false;
				}
			
			}*/
			
			//check if not on descend tile
			//if (floorArrIndex!=bDesLoc) {
			
				/*//check if bumping into feature

				//console.log(floorArrIndex);
				
				floorLabel=floorGridArr[floorArrIndex].label;
				compareLabel=$("#" + floorLabel).html();
			
				if (compareLabel!="█")
				{
					
				
					//if different, then bump
					
					//move back (south) one square
					floorArrIndex+=5;
					
					//reroute
					floorArrIndex=bumpFloor(floorArrIndex, "north");
					
				}
				
				//if not bump
				else {*/
			
					//floorArrIndex=777;
					
					//moving north, in leftmost column
					if (floorArrIndex%5==0) {
					
						//moving north, in leftmost column, not in corner (top left)
						if (floorArrIndex != 0) {
						
							//four choices: ╠, ╔, ║, room
							
							roomRoll=rollDie(4,1);
							
							//╔
							if (roomRoll==1 && buildRoom[0].hasMultipiece==true && buildRoom[0].eastPossible==true && buildRoom[0].northMand!=true && buildRoom[0].westMand!=true) {
							
								$("#" + floorLabel).html("╔");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false;
							
							} //╔
							
							
							//╠
							else if ((roomRoll==2 || roomRoll==1) && buildRoom[0].hasMultipiece==false && buildRoom[0].northPossible==true && buildRoom[0].eastPossible==true && buildRoom[0].westMand!=true) {
							
								$("#" + floorLabel).html("╠");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false;
								
								buildRoom[0].hasMultipiece=true;
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
							
							} //╠
							
							
							//║
							else if (roomRoll==3 && buildRoom[0].northPossible==true && buildRoom[0].westMand!=true && buildRoom[0].eastMand!=true) {
							
								$("#" + floorLabel).html("║");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false;
							
							} //║
							
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "north");
							
							} //room
			
						
							//floorArrIndex=777;
						
						} //moving north, in leftmost column, not in corner (top left)
						
						//moving north, in top left corner
						if (floorArrIndex == 0) {
						
							//two choices: ╔, room
							
							roomRoll=rollDie(2,1);
							
							roomRoll=1;
							
							
							//╔
							if (roomRoll==1 && (buildRoom[0].eastPossible==true || buildRoom[0].eastMand==true)) {
							
								$("#" + floorLabel).html("╔");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false;
							
							} //╔
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "north");
							
							} //room
						
							//floorArrIndex=777;
						
						} //moving north, in top left corner
						
						
					
					} //moving north, in leftmost column
					
					//moving north, in rightmost column
					if (floorArrIndex%5==4) {
					
						//moving north, in rightmost column, not in corner (top right)
						if (floorArrIndex != 4) {
						
							//four choices: ╣, ╗, ║, room
							
							roomRoll=rollDie(4,1);
							
							//╗
							if (roomRoll==1 && buildRoom[0].hasMultipiece==true && (buildRoom[0].westPossible==true || buildRoom[0].westMand==true) && buildRoom[0].northMand!=true) {
							
								$("#" + floorLabel).html("╗");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=true;
							
							} //╗
							
							
							//╣
							else if (roomRoll==2 || roomRoll==1 && buildRoom[0].hasMultipiece==false && buildRoom[0].northPossible==true && buildRoom[0].westPossible==true) {
							
								$("#" + floorLabel).html("╣");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=true;
								
								buildRoom[0].hasMultipiece=true;
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
							
							} //╣
							
							
							//║
							else if (roomRoll==3 && buildRoom[0].northPossible==true && buildRoom[0].westPossible!=true) {
							
								$("#" + floorLabel).html("║");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false;
							
							} //║
							
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "north");
							
							} //room
						
							//floorArrIndex=777;
						
						} //moving north, in rightmost column, not in corner (top right)
						
						//moving north, in top right corner
						if (floorArrIndex == 4) {
						
							//two choices: ╗, room
							
							roomRoll=rollDie(2,1);
							
							roomRoll=1;
							
							
							//╗
							if (roomRoll==1 && (buildRoom[0].westPossible==true || buildRoom[0].westMand==true)) {
							
								$("#" + floorLabel).html("╗");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=true;
							
							} //╗
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "north");
							
							} //room
						
							//floorArrIndex=-1;
						
						} //moving north, in top right corner
					
					
					} //moving north, in rightmost column
					
					
					//moving north, somewhere in middle
					if (floorArrIndex%5 != 0 && floorArrIndex%5 != 4 && floorArrIndex>0) {
					
						//console.log(floorArrIndex%5);
					
						//console.log("asdf");
					
						//moving north, somewhere in middle, not in top row
						if (floorArrIndex>5) {
						
							//eight choices: ╦, ║, ╔, ╗, ╣, ╠, ╬, room
							
							roomRoll=rollDie(8,1);
							
							//║
							if (roomRoll==1 && buildRoom[0].northPossible==true && buildRoom[0].eastMand!=true && buildRoom[0].westMand!=true) {
							
								$("#" + floorLabel).html("║");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false;
							
							} //║
							
							
							//╗
							else if (roomRoll==2 && (buildRoom[0].westPossible==true || buildRoom[0].westMand==true) && buildRoom[0].northMand!=true && buildRoom[0].eastMand!=true) {
							
								$("#" + floorLabel).html("╗");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=true;
							
							} //╗
							
							
							//╔
							else if (roomRoll==3 && buildRoom[0].eastPossible==true && buildRoom[0].northMand!=true && buildRoom[0].westMand!=true) {
							
								$("#" + floorLabel).html("╔");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false;
							
							} //╔
							
							//╦
							else if (roomRoll==4 && buildRoom[0].eastPossible==true && buildRoom[0].westPossible==true && buildRoom[0].northMand!=true) {
							
								$("#" + floorLabel).html("╦");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=true;

								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
							
							} //╦
							
							
							
							//╣
							else if (roomRoll==5 && buildRoom[0].northPossible==true && buildRoom[0].westPossible==true && buildRoom[0].eastMand!=true) {
							
								$("#" + floorLabel).html("╣");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=true;

								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
							
							
							} //╣
							
							
							//╠
							else if (roomRoll==6 && buildRoom[0].northPossible==true && buildRoom[0].eastPossible==true && buildRoom[0].westMand!=true) {
							
								$("#" + floorLabel).html("╠");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=false;
								
								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
							
							
								
							
							} //╠
							
							//╬
							else if (roomRoll==7 && buildRoom[0].northPossible==true && buildRoom[0].eastPossible==true && buildRoom[0].westPossible==true) {
							
								$("#" + floorLabel).html("╬");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=true;
								buildRoom[0].hasWestExit=true; 
								
								isMulti=true;
								
								//to do: change to multiple exits	
								buildRoom[0].exitAmount=3;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
					
							
							} //╬
							
							
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "north");
							
							} //room
						
							//floorArrIndex=777;
						
						} //moving north, somewhere in middle, not in top row
						
						//moving north, somewhere in middle, in top row
						if (floorArrIndex<5) {
						
							//four choices: ╩, ╚, ╝, room
							
							roomRoll=rollDie(4,1);
							
							
							//╔
							if (roomRoll==1 && buildRoom[0].hasMultipiece==true && buildRoom[0].eastPossible==true && buildRoom[0].westMand!=true) {
							
								$("#" + floorLabel).html("╔");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=false;
							
							} //╔
							
							
							//╗
							else if (roomRoll==2 && buildRoom[0].hasMultipiece==true && (buildRoom[0].westPossible==true || buildRoom[0].westMand==true) && buildRoom[0].eastMand!=true) {
							
								$("#" + floorLabel).html("╗");
								buildRoom[0].hasSouthExit=false;
								buildRoom[0].hasEastExit=false;
								buildRoom[0].hasNorthExit=false; //coming from north
								buildRoom[0].hasWestExit=true;
							
							} //╗
							
							//╦
							else if (roomRoll==3 || roomRoll==2 && buildRoom[0].hasMultipiece==false && buildRoom[0].eastPossible==true && buildRoom[0].westPossible==true) {
							
								$("#" + floorLabel).html("╦");
								buildRoom[0].hasSouthExit=false; //coming from south
								buildRoom[0].hasEastExit=true;
								buildRoom[0].hasNorthExit=false;
								buildRoom[0].hasWestExit=true;

								isMulti=true;
								
								//to do: change to multiple exits
								buildRoom[0].exitAmount=2;
								newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
							
							} //╦
							
							//room
							else {
							
								setFloorAsRoom(floorArrIndex, "north");
							
							} //room
						
							
							
						} //moving north, somewhere in middle, in top row
					
					}//moving north, somewhere in middle
					
				//} //bump
				
			//} //not on descend tile
		
		} //moving north
		
		} //not on arrival tile
		
	} //in bounds
	
	if (testVal==floorArrIndex) {
	
		console.log("nothing updated");
		
		if (buildRoom.length>1) {
		
			buildRoom.shift();
			stackPopped=true;
			//floorArrIndex=buildRoom[0].floorIndex; //popped stack*/
			
			//console.log(buildRoom[0].floorIndex);
			floorArrIndex=buildRoom[0].floorIndex;
			buildRoom[0].hasMultiPiece=false;
			console.log("new index is: " + floorArrIndex);
			
			console.log("checking surroundings of new popped room");
			checkConnect (compareLabel, floorLabel, floorArrIndex, floorArrIndex);
			//floorArrIndex=floorCheckSurround(compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
			
			while (buildRoom.length>1 && buildRoom[0].northPossible==false && buildRoom[0].eastPossible==false && buildRoom[0].southPossible==false && buildRoom[0].westPossible==false) {
				
				console.log("last popped room was dead end");
				//buildRoom[1]=buildRoom[0];
				buildRoom.shift();
				stackPopped=true;
				
				//console.log(buildRoom[0].floorIndex);
				floorArrIndex=buildRoom[0].floorIndex; //not needed since return buildRoom's anyway?
				buildRoom[0].hasMultiPiece=false;
				console.log("new index is: " + floorArrIndex);
				
				console.log("checking surroundings of new popped room");
				checkConnect (compareLabel, floorLabel, floorArrIndex, floorArrIndex);
				//floorArrIndex=floorCheckSurround(compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
				
			} //while
			
			//check if exits of popped room are now occupied
			
			//move to appropriate position from popped room
			
			let dirChosen=false;
			prevRoomIndex=777;
			
			//move up one if has north exit
			if (buildRoom[0].hasNorthExit==true) {
			
				//not occupied
				if (buildRoom[0].northPossible==true) {
			
					prevRoomIndex=floorArrIndex;
					floorArrIndex-=5;
					
					//check if destination
					floorLabel=floorGridArr[floorArrIndex].label;
					compareLabel=$("#" + floorLabel).html();
					
					if (compareLabel!="b" && compareLabel=="█") {
						dirChosen=true;
					}
					
					//move back and exit is false
					else {
					
						buildRoom[0].hasNorthExit=false;
						floorArrIndex+=5;
						prevRoomIndex=777;
					}
				}
				
				//occupied
				else {
				
					buildRoom[0].hasNorthExit=false;
				}
	
			}
			
			//move right one if has east exit
			else if (buildRoom[0].hasEastExit==true && dirChosen==false) {
			
				if (buildRoom[0].eastPossible==true) {
				
					prevRoomIndex=floorArrIndex;
					floorArrIndex+=1;
					
					//check if destination
					floorLabel=floorGridArr[floorArrIndex].label;
					compareLabel=$("#" + floorLabel).html();
					
					if (compareLabel!="b" && compareLabel=="█") {
						dirChosen=true;
					}
					
					//move back and exit is false
					else {
					
						buildRoom[0].hasEastExit=false;
						floorArrIndex-=1;
						prevRoomIndex=777;
					}			
				}
				
				//occupied
				else {
				
					buildRoom[0].hasEastExit=false;
				}
			}
			
			//move down one if has south exit
			else if (buildRoom[0].hasSouthExit==true && dirChosen==false) {
			
				if (buildRoom[0].southPossible==true) {
					prevRoomIndex=floorArrIndex;
					floorArrIndex+=5;
					
					//check if destination
					floorLabel=floorGridArr[floorArrIndex].label;
					compareLabel=$("#" + floorLabel).html();
					
					if (compareLabel!="b" && compareLabel=="█") {
						dirChosen=true;
					}
					
					//move back and exit is false
					else {
					
						buildRoom[0].hasSouthExit=false;
						floorArrIndex-=5;
						prevRoomIndex=777;
					}
					
				}
	
				//occupied
				else {
				
					buildRoom[0].hasSouthExit=false;
				}
			}
			
			//move left one if has west exit
			else if (buildRoom[0].hasWestExit==true && dirChosen==false) {
			
				if (buildRoom[0].westPossible==true) {
					prevRoomIndex=floorArrIndex;
					floorArrIndex-=1;
					//check if destination
					floorLabel=floorGridArr[floorArrIndex].label;
					compareLabel=$("#" + floorLabel).html();
					
					if (compareLabel!="b" && compareLabel=="█") {
						dirChosen=true;
					}
					
					//move back and exit is false
					else {
						
						buildRoom[0].hasWestExit=false;
						floorArrIndex+=1;
						prevRoomIndex=777;
					}
				}
				
				//occupied
				else {
				
					buildRoom[0].hasWestExit=false;
				}

			}
		
		} //if stack length >1
		
		else if (buildRoom.length==1 && buildRoom[0].eastPossible==false && buildRoom[0].westPossible==false && buildRoom[0].northPossible==false && buildRoom[0].southPossible==false){
			console.log("nothing updated and stack empty");
			floorArrIndex=777;
		}
		
		else if (stackPopped==true){
		
			console.log("stack was popped");
		}
		
		else {
		
			console.log("nothing updated, a case is not considered");
			floorArrIndex=777;
		}
	}
	
	stackPopped=false;
	return floorArrIndex;
}


//there's gotta be a better way to do this

/*$("#roomTile0").click(function() {


	roomTileA=0;
	roomTileB=0;
	
	//var but = document.getElementById("roomTile0");
	
	//but.setFont(new Font("Arial", Font.PLAIN, 40));
	//$("#roomTile0").text("a");
	//var asdf= $("#roomTile0").text();
	//if (asdf!= " ") {
		//but.style.width = "25px";
		//but.style.height = "25px";
	//}


});*/

/*function getRoomTile () {


	if ($("#roomTile0").button().click) {

		alert("asdf");

	}	
}*/


</script>

<!---
<div class="floorGrid">
  <fieldset>
    <legend>Floor</legend>
    <div class="controlgroup">
		<div class="menu-container">
			<div class="floorContainer">
				<button id="floor0">a</button>
				<button id="floor1">a</button>
				<button id="floor2">a</button>
				<button id="floor3">a</button>
				<button id="floor4">a</button>
				<button id="floor5">a</button>
				<button id="floor6">a</button>
				<button id="floor7">a</button>
				<button id="floor8">a</button>
				<button id="floor9">a</button>
				<button id="floor10">a</button>
				<button id="floor11">a</button>
				<button id="floor12">a</button>
				<button id="floor13">a</button>
				<button id="floor14">a</button>
				<button id="floor15">a</button>
				<button id="floor16">a</button>
				<button id="floor17">a</button>
				<button id="floor18">a</button>
				<button id="floor19">a</button>
			</div>
		</div>
    </div>
</div> -->


<!-- Accordion -->
<h2 class="demoHeaders">Accordion</h2>
<div id="accordion">
	<h3>First</h3>
	<div>Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.</div>
	<h3>Second</h3>
	<div>Phasellus mattis tincidunt nibh.</div>
	<h3>Third</h3>
	<div>Nam dui erat, auctor a, dignissim quis.</div>
</div>



<!-- Autocomplete -->
<h2 class="demoHeaders">Autocomplete</h2>
<div>
	<input id="autocomplete" title="type &quot;a&quot;">
</div>



<!-- Button -->
<h2 class="demoHeaders">Button</h2>
<button id="button">A button element</button>
<button id="button-icon">An icon-only button</button>



<!-- Checkboxradio -->
<h2 class="demoHeaders">Checkboxradio</h2>
<form style="margin-top: 1em;">
	<div id="radioset">
		<input type="radio" id="radio1" name="radio"><label for="radio1">Choice 1</label>
		<input type="radio" id="radio2" name="radio" checked="checked"><label for="radio2">Choice 2</label>
		<input type="radio" id="radio3" name="radio"><label for="radio3">Choice 3</label>
	</div>
</form>



<!-- Controlgroup -->
<h2 class="demoHeaders">Controlgroup</h2>
<fieldset>
	<legend>Rental Car</legend>
	<div id="controlgroup">
		<select id="car-type">
			<option>Compact car</option>
			<option>Midsize car</option>
			<option>Full size car</option>
			<option>SUV</option>
			<option>Luxury</option>
			<option>Truck</option>
			<option>Van</option>
		</select>
		<label for="transmission-standard">Standard</label>
		<input type="radio" name="transmission" id="transmission-standard">
		<label for="transmission-automatic">Automatic</label>
		<input type="radio" name="transmission" id="transmission-automatic">
		<label for="insurance">Insurance</label>
		<input type="checkbox" name="insurance" id="insurance">
		<label for="horizontal-spinner" class="ui-controlgroup-label"># of cars</label>
		<input id="horizontal-spinner" class="ui-spinner-input">
		<button>Book Now!</button>
	</div>
</fieldset>




<h2 class="demoHeaders">Dialog</h2>
<p>
	<button id="dialog-link" class="ui-button ui-corner-all ui-widget">
		<span class="ui-icon ui-icon-newwin"></span>Open Dialog
	</button>
</p>

<h2 class="demoHeaders">Overlay and Shadow Classes</h2>
<div style="position: relative; width: 96%; height: 500px; padding:1% 2%; overflow:hidden;" class="fakewindowcontain">
	<p>Lorem ipsum dolor sit amet,  Nulla nec tortor. Donec id elit quis purus consectetur consequat. </p><p>Nam congue semper tellus. Sed erat dolor, dapibus sit amet, venenatis ornare, ultrices ut, nisi. Aliquam ante. Suspendisse scelerisque dui nec velit. Duis augue augue, gravida euismod, vulputate ac, facilisis id, sem. Morbi in orci. </p><p>Nulla purus lacus, pulvinar vel, malesuada ac, mattis nec, quam. Nam molestie scelerisque quam. Nullam feugiat cursus lacus.orem ipsum dolor sit amet, consectetur adipiscing elit. Donec libero risus, commodo vitae, pharetra mollis, posuere eu, pede. Nulla nec tortor. Donec id elit quis purus consectetur consequat. </p><p>Nam congue semper tellus. Sed erat dolor, dapibus sit amet, venenatis ornare, ultrices ut, nisi. Aliquam ante. Suspendisse scelerisque dui nec velit. Duis augue augue, gravida euismod, vulputate ac, facilisis id, sem. Morbi in orci. Nulla purus lacus, pulvinar vel, malesuada ac, mattis nec, quam. Nam molestie scelerisque quam. </p><p>Nullam feugiat cursus lacus.orem ipsum dolor sit amet, consectetur adipiscing elit. Donec libero risus, commodo vitae, pharetra mollis, posuere eu, pede. Nulla nec tortor. Donec id elit quis purus consectetur consequat. Nam congue semper tellus. Sed erat dolor, dapibus sit amet, venenatis ornare, ultrices ut, nisi. Aliquam ante. </p><p>Suspendisse scelerisque dui nec velit. Duis augue augue, gravida euismod, vulputate ac, facilisis id, sem. Morbi in orci. Nulla purus lacus, pulvinar vel, malesuada ac, mattis nec, quam. Nam molestie scelerisque quam. Nullam feugiat cursus lacus.orem ipsum dolor sit amet, consectetur adipiscing elit. Donec libero risus, commodo vitae, pharetra mollis, posuere eu, pede. Nulla nec tortor. Donec id elit quis purus consectetur consequat. Nam congue semper tellus. Sed erat dolor, dapibus sit amet, venenatis ornare, ultrices ut, nisi. </p>
	<input type="button" onclick="demoVisibility()" value="Hide text with visibility property">

	<!-- ui-dialog -->
	<div class="ui-widget-overlay ui-front initHide"></div>
	<div id="overlayTest" style="position: absolute; width: 320px; left: 50px; top: 30px; visibility:hidden; padding: 1.2em " class="ui-widget ui-front ui-widget-content ui-corner-all ui-widget-shadow">
		Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
	<button type="button" id="myBtn" onclick="myFunction()">Try it</button>
	</div>

</div>
<div><input type="button" onclick="demoVisibility()" value="Hide text with visibility property"></div>
<script>
function demoVisibility() {
    document.getElementById("overlayTest").style.visibility = "visible";
}
</script>

<!-- choose class dialog -->
<div id="classDialog" title="Choose Class">
	<p>
	<button id="chooseHighBut" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Highlander
	</button>
	<br>
	<br>
	<button id="chooseWizBut" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Istari
	</button>
	<br>
	<br>
	<button id="chooseHealBut" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Asclepian
	</button>
	<br>
	<br>
	<button id="chooseRapBut" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Rapscallion
	</button>
	<br>
	<br>
	<button id="chooseMonkBut" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Monk
	</button>
	<br>
	<br>
	<button id="chooseSnipBut" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Sniper
	</button>
	<br>
	<br>
	<button id="chooseMyrmBut" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Myrmidon
	</button>
	<br>
	<br>
	<button id="chooseSabBut" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Saboteur
	</button>
	<br>
	<br>
	<button id="chooseOccBut" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Occultist
	</button>
	<br>
	<br>
	<button id="chooseBasBut" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Basilica
	</button>
	<br>
	<br>
	<button id="chooseTriBut" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Triarius
	</button>
	<br>
	<br>
	<button id="chooseSymBut" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Symposiarch
	</button>
	</p>
</div>


<style>

</style>


<!-- ui-dialog -->
<div id="raceDialog" title="Choose Race">
	<div id="classInvalid"><h3> </h3></div>
	<p>
	<button id="chooseHumanBut" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Human
	</button>
	<br>
	<br>
	<button id="chooseDwarfBut" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Khuzdulan
	</button>
	<br>
	<br>
	<button id="chooseOrcBut" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Uruk
	</button>
	<br>
	<br>
	<button id="chooseElfBut" class="ui-button ui-corner-all ui-widget">
			<span class="ui-icon ui-icon-newwin"></span>Teleri
	</button>
	</p>
</div>

<!-- copy stats dialog -->
<div id="copyDialog">

	<div type="text" id="copyStuff">
	</div>

</div>

<h2 class="demoHeaders">Framework Icons (content color preview)</h2>
<ul id="icons" class="ui-widget ui-helper-clearfix">
	<li class="ui-state-default ui-corner-all" title=".ui-icon-caret-1-n"><span class="ui-icon ui-icon-caret-1-n"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-caret-1-ne"><span class="ui-icon ui-icon-caret-1-ne"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-caret-1-e"><span class="ui-icon ui-icon-caret-1-e"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-caret-1-se"><span class="ui-icon ui-icon-caret-1-se"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-caret-1-s"><span class="ui-icon ui-icon-caret-1-s"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-caret-1-sw"><span class="ui-icon ui-icon-caret-1-sw"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-caret-1-w"><span class="ui-icon ui-icon-caret-1-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-caret-1-nw"><span class="ui-icon ui-icon-caret-1-nw"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-caret-2-n-s"><span class="ui-icon ui-icon-caret-2-n-s"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-caret-2-e-w"><span class="ui-icon ui-icon-caret-2-e-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-1-n"><span class="ui-icon ui-icon-triangle-1-n"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-1-ne"><span class="ui-icon ui-icon-triangle-1-ne"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-1-e"><span class="ui-icon ui-icon-triangle-1-e"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-1-se"><span class="ui-icon ui-icon-triangle-1-se"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-1-s"><span class="ui-icon ui-icon-triangle-1-s"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-1-sw"><span class="ui-icon ui-icon-triangle-1-sw"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-1-w"><span class="ui-icon ui-icon-triangle-1-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-1-nw"><span class="ui-icon ui-icon-triangle-1-nw"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-2-n-s"><span class="ui-icon ui-icon-triangle-2-n-s"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-triangle-2-e-w"><span class="ui-icon ui-icon-triangle-2-e-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-1-n"><span class="ui-icon ui-icon-arrow-1-n"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-1-ne"><span class="ui-icon ui-icon-arrow-1-ne"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-1-e"><span class="ui-icon ui-icon-arrow-1-e"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-1-se"><span class="ui-icon ui-icon-arrow-1-se"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-1-s"><span class="ui-icon ui-icon-arrow-1-s"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-1-sw"><span class="ui-icon ui-icon-arrow-1-sw"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-1-w"><span class="ui-icon ui-icon-arrow-1-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-1-nw"><span class="ui-icon ui-icon-arrow-1-nw"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-2-n-s"><span class="ui-icon ui-icon-arrow-2-n-s"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-2-ne-sw"><span class="ui-icon ui-icon-arrow-2-ne-sw"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-2-e-w"><span class="ui-icon ui-icon-arrow-2-e-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-2-se-nw"><span class="ui-icon ui-icon-arrow-2-se-nw"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowstop-1-n"><span class="ui-icon ui-icon-arrowstop-1-n"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowstop-1-e"><span class="ui-icon ui-icon-arrowstop-1-e"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowstop-1-s"><span class="ui-icon ui-icon-arrowstop-1-s"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowstop-1-w"><span class="ui-icon ui-icon-arrowstop-1-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-1-n"><span class="ui-icon ui-icon-arrowthick-1-n"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-1-ne"><span class="ui-icon ui-icon-arrowthick-1-ne"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-1-e"><span class="ui-icon ui-icon-arrowthick-1-e"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-1-se"><span class="ui-icon ui-icon-arrowthick-1-se"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-1-s"><span class="ui-icon ui-icon-arrowthick-1-s"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-1-sw"><span class="ui-icon ui-icon-arrowthick-1-sw"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-1-w"><span class="ui-icon ui-icon-arrowthick-1-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-1-nw"><span class="ui-icon ui-icon-arrowthick-1-nw"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-2-n-s"><span class="ui-icon ui-icon-arrowthick-2-n-s"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-2-ne-sw"><span class="ui-icon ui-icon-arrowthick-2-ne-sw"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-2-e-w"><span class="ui-icon ui-icon-arrowthick-2-e-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthick-2-se-nw"><span class="ui-icon ui-icon-arrowthick-2-se-nw"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthickstop-1-n"><span class="ui-icon ui-icon-arrowthickstop-1-n"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthickstop-1-e"><span class="ui-icon ui-icon-arrowthickstop-1-e"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthickstop-1-s"><span class="ui-icon ui-icon-arrowthickstop-1-s"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowthickstop-1-w"><span class="ui-icon ui-icon-arrowthickstop-1-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowreturnthick-1-w"><span class="ui-icon ui-icon-arrowreturnthick-1-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowreturnthick-1-n"><span class="ui-icon ui-icon-arrowreturnthick-1-n"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowreturnthick-1-e"><span class="ui-icon ui-icon-arrowreturnthick-1-e"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowreturnthick-1-s"><span class="ui-icon ui-icon-arrowreturnthick-1-s"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowreturn-1-w"><span class="ui-icon ui-icon-arrowreturn-1-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowreturn-1-n"><span class="ui-icon ui-icon-arrowreturn-1-n"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowreturn-1-e"><span class="ui-icon ui-icon-arrowreturn-1-e"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowreturn-1-s"><span class="ui-icon ui-icon-arrowreturn-1-s"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowrefresh-1-w"><span class="ui-icon ui-icon-arrowrefresh-1-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowrefresh-1-n"><span class="ui-icon ui-icon-arrowrefresh-1-n"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowrefresh-1-e"><span class="ui-icon ui-icon-arrowrefresh-1-e"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrowrefresh-1-s"><span class="ui-icon ui-icon-arrowrefresh-1-s"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-4"><span class="ui-icon ui-icon-arrow-4"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-arrow-4-diag"><span class="ui-icon ui-icon-arrow-4-diag"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-extlink"><span class="ui-icon ui-icon-extlink"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-newwin"><span class="ui-icon ui-icon-newwin"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-refresh"><span class="ui-icon ui-icon-refresh"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-shuffle"><span class="ui-icon ui-icon-shuffle"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-transfer-e-w"><span class="ui-icon ui-icon-transfer-e-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-transferthick-e-w"><span class="ui-icon ui-icon-transferthick-e-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-folder-collapsed"><span class="ui-icon ui-icon-folder-collapsed"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-folder-open"><span class="ui-icon ui-icon-folder-open"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-document"><span class="ui-icon ui-icon-document"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-document-b"><span class="ui-icon ui-icon-document-b"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-note"><span class="ui-icon ui-icon-note"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-mail-closed"><span class="ui-icon ui-icon-mail-closed"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-mail-open"><span class="ui-icon ui-icon-mail-open"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-suitcase"><span class="ui-icon ui-icon-suitcase"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-comment"><span class="ui-icon ui-icon-comment"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-person"><span class="ui-icon ui-icon-person"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-print"><span class="ui-icon ui-icon-print"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-trash"><span class="ui-icon ui-icon-trash"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-locked"><span class="ui-icon ui-icon-locked"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-unlocked"><span class="ui-icon ui-icon-unlocked"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-bookmark"><span class="ui-icon ui-icon-bookmark"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-tag"><span class="ui-icon ui-icon-tag"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-home"><span class="ui-icon ui-icon-home"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-flag"><span class="ui-icon ui-icon-flag"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-calculator"><span class="ui-icon ui-icon-calculator"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-cart"><span class="ui-icon ui-icon-cart"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-pencil"><span class="ui-icon ui-icon-pencil"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-clock"><span class="ui-icon ui-icon-clock"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-disk"><span class="ui-icon ui-icon-disk"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-calendar"><span class="ui-icon ui-icon-calendar"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-zoomin"><span class="ui-icon ui-icon-zoomin"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-zoomout"><span class="ui-icon ui-icon-zoomout"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-search"><span class="ui-icon ui-icon-search"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-wrench"><span class="ui-icon ui-icon-wrench"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-gear"><span class="ui-icon ui-icon-gear"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-heart"><span class="ui-icon ui-icon-heart"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-star"><span class="ui-icon ui-icon-star"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-link"><span class="ui-icon ui-icon-link"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-cancel"><span class="ui-icon ui-icon-cancel"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-plus"><span class="ui-icon ui-icon-plus"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-plusthick"><span class="ui-icon ui-icon-plusthick"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-minus"><span class="ui-icon ui-icon-minus"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-minusthick"><span class="ui-icon ui-icon-minusthick"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-close"><span class="ui-icon ui-icon-close"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-closethick"><span class="ui-icon ui-icon-closethick"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-key"><span class="ui-icon ui-icon-key"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-lightbulb"><span class="ui-icon ui-icon-lightbulb"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-scissors"><span class="ui-icon ui-icon-scissors"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-clipboard"><span class="ui-icon ui-icon-clipboard"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-copy"><span class="ui-icon ui-icon-copy"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-contact"><span class="ui-icon ui-icon-contact"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-image"><span class="ui-icon ui-icon-image"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-video"><span class="ui-icon ui-icon-video"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-script"><span class="ui-icon ui-icon-script"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-alert"><span class="ui-icon ui-icon-alert"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-info"><span class="ui-icon ui-icon-info"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-notice"><span class="ui-icon ui-icon-notice"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-help"><span class="ui-icon ui-icon-help"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-check"><span class="ui-icon ui-icon-check"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-bullet"><span class="ui-icon ui-icon-bullet"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-radio-off"><span class="ui-icon ui-icon-radio-off"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-radio-on"><span class="ui-icon ui-icon-radio-on"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-pin-w"><span class="ui-icon ui-icon-pin-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-pin-s"><span class="ui-icon ui-icon-pin-s"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-play"><span class="ui-icon ui-icon-play"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-pause"><span class="ui-icon ui-icon-pause"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-seek-next"><span class="ui-icon ui-icon-seek-next"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-seek-prev"><span class="ui-icon ui-icon-seek-prev"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-seek-end"><span class="ui-icon ui-icon-seek-end"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-seek-first"><span class="ui-icon ui-icon-seek-first"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-stop"><span class="ui-icon ui-icon-stop"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-eject"><span class="ui-icon ui-icon-eject"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-volume-off"><span class="ui-icon ui-icon-volume-off"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-volume-on"><span class="ui-icon ui-icon-volume-on"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-power"><span class="ui-icon ui-icon-power"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-signal-diag"><span class="ui-icon ui-icon-signal-diag"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-signal"><span class="ui-icon ui-icon-signal"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-battery-0"><span class="ui-icon ui-icon-battery-0"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-battery-1"><span class="ui-icon ui-icon-battery-1"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-battery-2"><span class="ui-icon ui-icon-battery-2"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-battery-3"><span class="ui-icon ui-icon-battery-3"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-plus"><span class="ui-icon ui-icon-circle-plus"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-minus"><span class="ui-icon ui-icon-circle-minus"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-close"><span class="ui-icon ui-icon-circle-close"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-triangle-e"><span class="ui-icon ui-icon-circle-triangle-e"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-triangle-s"><span class="ui-icon ui-icon-circle-triangle-s"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-triangle-w"><span class="ui-icon ui-icon-circle-triangle-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-triangle-n"><span class="ui-icon ui-icon-circle-triangle-n"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-arrow-e"><span class="ui-icon ui-icon-circle-arrow-e"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-arrow-s"><span class="ui-icon ui-icon-circle-arrow-s"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-arrow-w"><span class="ui-icon ui-icon-circle-arrow-w"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-arrow-n"><span class="ui-icon ui-icon-circle-arrow-n"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-zoomin"><span class="ui-icon ui-icon-circle-zoomin"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-zoomout"><span class="ui-icon ui-icon-circle-zoomout"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circle-check"><span class="ui-icon ui-icon-circle-check"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circlesmall-plus"><span class="ui-icon ui-icon-circlesmall-plus"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circlesmall-minus"><span class="ui-icon ui-icon-circlesmall-minus"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-circlesmall-close"><span class="ui-icon ui-icon-circlesmall-close"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-squaresmall-plus"><span class="ui-icon ui-icon-squaresmall-plus"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-squaresmall-minus"><span class="ui-icon ui-icon-squaresmall-minus"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-squaresmall-close"><span class="ui-icon ui-icon-squaresmall-close"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-grip-dotted-vertical"><span class="ui-icon ui-icon-grip-dotted-vertical"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-grip-dotted-horizontal"><span class="ui-icon ui-icon-grip-dotted-horizontal"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-grip-solid-vertical"><span class="ui-icon ui-icon-grip-solid-vertical"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-grip-solid-horizontal"><span class="ui-icon ui-icon-grip-solid-horizontal"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-gripsmall-diagonal-se"><span class="ui-icon ui-icon-gripsmall-diagonal-se"></span></li>
	<li class="ui-state-default ui-corner-all" title=".ui-icon-grip-diagonal-se"><span class="ui-icon ui-icon-grip-diagonal-se"></span></li>
</ul>


<!-- Slider -->
<h2 class="demoHeaders">Slider</h2>
<div id="slider"></div>



<!-- Datepicker -->
<h2 class="demoHeaders">Datepicker</h2>
<div id="datepicker"></div>



<!-- Progressbar -->
<h2 class="demoHeaders">Progressbar</h2>
<div id="progressbar"></div>



<!-- Progressbar -->
<h2 class="demoHeaders">Selectmenu</h2>
<select id="selectmenu">
	<option>Slower</option>
	<option>Slow</option>
	<option selected="selected">Medium</option>
	<option>Fast</option>
	<option>Faster</option>
</select>



<!-- Spinner -->
<h2 class="demoHeaders">Spinner</h2>
<input id="spinner">





<!-- Highlight / Error -->
<h2 class="demoHeaders">Highlight / Error</h2>
<div class="ui-widget">
	<div class="ui-state-highlight ui-corner-all" style="margin-top: 20px; padding: 0 .7em;">
		<p><span class="ui-icon ui-icon-info" style="float: left; margin-right: .3em;"></span>
		<strong>Hey!</strong> Sample ui-state-highlight style.</p>
	</div>
</div>
<br>
<div class="ui-widget">
	<div class="ui-state-error ui-corner-all" style="padding: 0 .7em;">
		<p><span class="ui-icon ui-icon-alert" style="float: left; margin-right: .3em;"></span>
		<strong>Alert:</strong> Sample ui-state-error style.</p>
	</div>
</div>

<!--<script src="external/jquery/jquery.js"></script>
<script src="jquery-ui.js"></script>-->
<script>


var turn=0;
var whoIsActive=0;
var lockActive=0;
var monstActive=0;
var itemActive=0;
var trapActive=0;
var playersMax=9;
var profCount=17; //18
var currProf=-1; //0-17
var passiveCount=40;
var currMonPassives=0;
var radioCurrMax=0; //0 if curr, 1 if max; edit player hp/energy
var currFloor=0;
var currRoomIndex=0; //for accessing allRooms array
var floorSize=20; //1-20, amount of squares in floors
var floorMax=10; //total amount of floors, also edit floorExistsArr
//var visited=0;
var deadEnd=false; //boolean, determines dead ends in floor creation
//var floorTileA=0;
//var floorTileB=0;
var floorTileIndex=-1;
//var roomTileA=0;
//var roomTileB=0;
var roomTileIndex=-1;
var roomTileMove=1; //amount to move tiles, 1 by default
var roomTilePrev; //string; save char if moving being onto tile with items or something
var roomSize=256; //16x16
var roomMaxLength=16; // _total_ number of buttons going across
var roomMaxHeight=16; //number of buttons vertically
var roomMax=200; //10 floors, 20 rooms each
var tileDir=1; // move tile direciton, 1 for up, 2 for right, 3 for down, 4 for left, 1 by default; 5 NE, 6 NW, 7 SE, 8 SW
var createTile; //string
//var floorExistsArr= [false, false, false, false, false, false, false, false, false, false]; //bool, array of whether or not a floor exists
var currRoomIs=0; //shape of room, 0 for room, 1-9 for hall, 10/11 for straight hall, 12 for secret
var currRoomSizeA=0;
var currRoomSizeB=0;
var currHallWidth=0;
var currHallLength1=0;
var currHallLength2=0;
var currHallLength3=0;
var currHallLength4=0;
//gdouble partyLevel=0.0; //for determining monster difficulty
//gdouble partyAverage=0.0;
var partyCount=0;

var partyLevel=0;

var formArr = ["", "", "", "", "", "", "", "", ""];
var currFormA=0;
var currFormB=0; //grid coordinates
var formIndex=0; //for setting array

var monstAilSet=0;
var monstAilTurn=1;
var monstMax=7;

var playerAilSet=0;
var playerAilTurn=0;

var currItem=0;
var itemsMax=7;

var profBarColor = "#6ad18c";

var isMulti=false; //previously created was multi piece, used for removing an exit when stack popped


var stackPopped=false;

var hitDes=false;

var currFloorSym="█";
var butDefColor="lightgray";
var butSelColor='#6ad18c';
var tileDefColor="#8ac8ff";
var visionColor="#fcf95f";
var infraColor="orange";
var trapDefColor="red";

var monMax=12; //max mons per room?
var itemMax=7; //max items per room?

var offset=0; //offset for rooms on higher floors, access allRooms array indicies

var currMax=-1; //0 for curr, 1 for max
var monstCurrMax=-1;

//hunger ranges
var satiatedHigh=500;
var satiatedLow=300;
var nonHungryHigh=299;
var nonHungryLow=100;
var hungryHigh=99;
var hungryLow=25;
var weakHigh=24;
var weakLow=1;


//weight ranges
var burdenedMod=1.25;
var stressedMod=1.5;
var strainedMod=1.75;
var overtaxedMod=2.25;
var overloadedMod=2.5;





//format = (a,b) / (horizontal, vertical)

/*var roomGridArr =[];
initRooms();*/

//monster stuff

var currMonsters=[];
//initMonster();

function initMonster() {

	currMonsters.push ({
			
				monstName: "",
				
				monsterExists:false,
				
				size: -1, //0 for tiny, 1 for small, 2 for medium, 3 for large, 4 for huge, 5 for gigantic

				tier: 0, //+1 per difficulty
				
				monsterSymbol: "M!", //placeholder symbol
				
				monRoomIndex:-1, //where it is in a room
				
				moved: false, //for determining if monster has already moved (implied to have taken all actions)
			
				monsterPassives: //passives
				{
						fireResist :false,//0,0
						coldResist :false,//0,1
						shockResist :false,//0,2
						disinResist :false,//0,3
						sleepResist :false,//0,4
						poisonResist :false,//0,5
						paralysisResist :false,//0,6
						blindResist :false,//0,7
						petrifyResist :false,//0,8
						sicknessResist :false,//0,9
						drainResist :false,//0,10
						woundResist :false,//1,0
						breathless :false,//1,1
						searching :false,//1,2
						seeInvis :false,//1,3
						invis :false,//1,4
						levitate :false,//1,5
						flying :false,//1,6
						adornment :false,//1,7
						warning :false,//1,8
						telepathy :false,//1,9
						foodApp :false,//1,10
						reflection :false,//2,0
						magicResist :false,//2,1
						waterWalking :false,//2,2
						displacement :false,//2,3
						sustainAbility :false,//2,4
						slowDigest :false,//2,5
						lifeSaving :false,//2,6
						stealth :false,//2,7
						confuseResist :false,//2,8


						brisk :0,//2,9
						haste :0,//2,10
						dash :0,//3,0 //int
						agileDash :0,//3,1 //int
						infravision :false,//3,2 //int
						regen :false,//3,3
						protection:0, //int
						energyRegen :false,//3,4
						noHungCast :false,//3,5

						permSlow:false,
						permBrisk:false,
						permHaste:false,


						fumbling :false,
						isHungry :false,
						tempBrisk:0,//int
						tempHaste:0, //int
						tempRegen:0, //int
						tempConfluence:0, //int
						tempInvis:0, //int

						slow:0, //int
						blind:0, //int 
						sleep:0, //int
						poisoned:0, //int
						confused:0, //int
						taunted:0, //int
						aggravated:0, //int
						paralyzed:0, //int

						hallucin:0, //int
						enfeebled:0, //int
						vulnerable:0, //int
						slippery:0, //int
						petrify:0, //int
						vomit:0, //int
						strangle:0, //int 
						engulfed:0, //int

						woundedArmLeft:0, //int
						woundedArmRight:0, //int
						woundedLegLeft:0, //int
						woundedLegRight:0 //int
				},
				speed:0,
				actions:0,

				energyClock:0,
				hpClock:0,
				newEnergyClock:true, //bool
				newHpClock:true, //bool

				tempACVal:0,
				tempACDur:0,
				
				hpCurr:0,
				hpMax:0,
				energyCurr:0,
				energyMax:0,
				armorAC:0,
				otherAC:0,
				totalAC:0,
				toHit:0,
				
				index: -1, //index in current room
		});

	

}


var allRooms=[];
initAllRooms();

function initAllRooms() {


	//var tempSymArray=[];
	
	var	tempTile=[];
	
	var tempTileItemArr=[];
	
	for (i=0;i<roomSize;i++) {
		
		tempTile.push({
		
			hasItem:false,
			hasMonster:false,
			hasTrap:false,
			symbol:"█",
			//tileItemArr:tempTileItemArr,
			itemSymbol:"",
			trapSymbol:"",
			trapName:"",
			trapSeen:false,
			hasBeing:false,
		
		});
	}
	
	
	var tempMonArray=[];
	
	
	var tempItemArray=[];
	
	var tempSpawnArray=[];
	
	var tempTrapArray=[];
	
	/*for (j=0;j<monMax;j++) {
	
		tempMonArray[j]="";
	}
	
	for (j=0;j<itemMax;j++) {
	
		tempItemArray[j]="";
	}*/

	for (i=0;i<roomMax;i++) {
	
		allRooms.push({
		
			roomTile: tempTile,
			
			roomMonsters: tempMonArray,
			
			roomItems: tempItemArray,
			
			//monsters and items go here too (and players?)
			
			roomExists: false,
			
			spawnArray:tempSpawnArray,
			
			floorSymbol: "█",
			
			roomTraps:tempTrapArray,
			
			roomWidth:0,
			roomHeight:0,
			
			hallWidth:0,
			hallLength1:0, //vertical 1
			hallLength2:0, //horizontal 1
			hallLength3:0, //vertical 2
			hallLength4:0, //horizontal 2
			
			northExit:-1,
			eastExit:-1,
			southExit:-1,
			westExit:-1,
			
			arrExit:-1, //exit index of arrival
		
		});
		
		
		tempTile=[];
		tempTileItemArr=[];
	
		for (j=0;j<roomSize;j++) {
			
			tempTile.push({
			
				hasItem:false,
				hasMonster:false,
				hasTrap:false,
				symbol:"",
				//tileItemArr:tempTileItemArr,
				itemSymbol:"",
				trapSymbol:"",
				trapSeen:false,
				hasBeing:false,
			
			});
		}
	
		tempSpawnArray=[];
		
		tempMonArray=[];
		
		tempItemArray=[];
		
		tempTrapArray=[];
		
		/*for (j=0;j<monMax;j++) {
		
			tempMonArray[j]="";
		}
		
		
		for (j=0;j<itemMax;j++) {
		
			tempItemArray[j]="";
		}*/
			
	}
}

//allRooms[0].roomMonsters.push({asdf:0});



var floorGridArr = [];
initFloor();

function initFloor() {
	
	//var tileCoorA=0;
	//var tileCoorB=0;
	var tempArrIndex=0;
	
	var tempStr="floor0";
	
	
	for (i=0;i<floorSize;i++){
	
		floorGridArr.push({

		
			symbol:" ",
			
			label:tempStr
		});
	
		tempArrIndex++;
		
		tempStr="floor" + tempArrIndex;
		
	
		
		
	}

}

var allFloors=[];
initAllFloors();

function initAllFloors() {

	var tempArray=[];
	for (i=0;i<floorSize;i++) {
		
		tempArray[i]="";
	}

	for (i=0;i<floorMax;i++) {
	
		allFloors.push({
				
				floorExists: false,
				
				floorTileIndex: 0,
				
				gridSymbols: tempArray,
				
			
		});
		
		tempArray=[];
	
	}
	
}	

/*initAllFloors();

function initAllFloors() {
	
	var tileCoorA=0;
	var tileCoorB=0;
	var tempArrIndex=0;
	
	var tempStr="floor0";
	
	
	for (i=0;i<floorMax;i++){
	
		allFloors.push({
			
			floorTileIndex: i,
		
			symbol:" ",
			
		
		});
	
		tileCoorA++;
		tempArrIndex++;
		
		tempStr="floor" + tempArrIndex;
		
	
		
		
	}

}*/

var buildRoom = [];
newBuildRoom();

function newBuildRoom(flrInd, hasNthExt, hasEstExt, hasSthExt, hasWstExt, extAm, hasMulti, nthPos, estPos, sthPos, wstPos, nMand, eMand, sMand, wMand, rert) {

	console.log("push");

	if (extAm==undefined) {
		extAm=0;
	}

	if (flrInd==undefined) {
		flrInd=99;
	}

	
	if (nthPos==undefined) {
		nthPos=false;
	}
	
	if (estPos==undefined) {
		estPos=false;
	}

	
	if (sthPos==undefined) {
		sthPos=false;
	}
	
	if (wstPos==undefined) {
		wstPos=false;
	}
	
	if (hasNthExt==undefined) {
		hasNthExt=false;
	}
	
	if (hasEstExt==undefined) {
		hasEstExt=false;
	}
	
	if (hasSthExt==undefined) {
		hasSthExt=false;
	}
	
	if (hasWstExt==undefined) {
		hasWstExt=false;
	}
	
	if (hasMulti==undefined) {
		hasMulti=false;
	}
	
	if (nMand==undefined) {
		nMand=false;
	}
	
	if (eMand==undefined) {
		eMand=false;
	}
	
	if (sMand==undefined) {
		sMand=false;
	}
	
	if (wMand==undefined) {
		wMand=false;
	}
	
	if (rert==undefined) {
		rert=false;
	}

	//builder and stack builder
	//push new build room (call this function) when exitAmount>1
	//pop when reaching a dead end
	
	

	buildRoom.push(
		{
			
			floorIndex : flrInd, //index of room, set to 99 by default
			hasNorthExit : hasNthExt, // used to determine if /actually has/ an exit in direction
			hasEastExit : hasEstExt,
			hasSouthExit : hasSthExt,
			hasWestExit : hasWstExt,
			exitAmount : extAm,
			northPossible : false, // can have north exit, floor index >4 
			eastPossible : false,
			southPossible : false,
			westPossible : false,
			hasMultipiece : false, //when building dungeon, used with deadEnd, check when making hook pieces and rooms with only 2 exits on perimeter
			northMand : false, // if a direction is barred by an impossible exit
			eastMand : false,
			southMand : false,
			westMand : false,
			reroute : false
			/*visited:  vis,
			hasEntrance : false, //floor feature (des room?) has an entrance to it
			isRoom : false,
			isHall : false,
			exit1 : "", //used to randomly choose direction... should check if tile in direction is empty?
			exit2 : "",
			exit3 : "",
			exit4 : "",
			
			stackIndex : 0, //store index for when push/pop, not needed?*/
		});
	
	
}


var roomGridArr = [];
initRoom();

function initRoom() {
	
	
	
	for (i=0;i<roomMax;i++){
	
		roomGridArr.push({

		
			symbol:" "
		});
	
		
		
	}

}

var allPlayers = [];
initPlayers();

function initPlayers() {

	var tempInv=[];
	var tempSpells=[];
		
	for (i=0;i<playersMax;i++){
		
		let tempPlayInd=i;
		tempPlayInd++;
			
		allPlayers.push({
		
		playerName:"Player "+tempPlayInd,
		playerNameRace:" ",
		playerNameClass:" ",
		alignment:0, //1 for lawful, 2 for chaotic
		inventory:tempInv,
		spells:tempSpells,
		obj1:"",
		obj2:"",
		obj3:"",
		obj4:"",
		hasTitle: false,
		hasName:false, //bool
		hasClass:false, //bool
		playerExists:false, //bool
		isLeader:false,
		playerProfs: //proficiency
		{
			daggerProf : 0,
			axeProf : 0,
			swordProf : 0,
			bludgeonProf : 0,
			staffProf : 0,
			spearProf : 0,
			polearmProf : 0,
			bowProf : 0,
			martialProf : 0,
			barehandProf : 0,
			augmentProf : 0,
			mobilityProf : 0,

			attackSpellProf : 0,
			matterSpellProf : 0,
			divinationSpellProf : 0,
			clericalSpellProf : 0,
			enchantmentSpellProf : 0,
			healingSpellProf : 0,

			//bar progress
			daggerBar : 0,
			axeBar : 0,
			swordBar : 0,
			bludgeonBar : 0,
			staffBar : 0,
			spearBar : 0,
			polearmBar : 0,
			bowBar : 0,
			martialBar : 0,
			barehandBar : 0,
			augmentBar : 0,
			mobilityBar : 0,

			attackSpellBar : 0,
			matterSpellBar : 0,
			divinationSpellBar : 0,
			clericalSpellBar : 0,
			enchantmentSpellBar : 0,
			healingSpellBar : 0,

			//prof level, 0=novice, 1=apprentice, 2=adept, 3=master, 4=grand master
			daggerLev : 0,
			axeLev : 0,
			swordLev : 0,
			bludgeonLev : 0,
			staffLev : 0,
			spearLev : 0,
			polearmLev : 0,
			bowLev : 0,
			martialLev : 0,
			barehandLev : 0,
			augmentLev : 0,
			mobilityLev : 0,

			attackSpellLev : 0,
			matterSpellLev : 0,
			divinationSpellLev : 0,
			clericalSpellLev : 0,
			enchantmentSpellLev : 0,
			healingSpellLev : 0,

			//proficiency max
			daggerProfMax : 0,
			axeProfMax : 0,
			swordProfMax : 0,
			bludgeonProfMax : 0,
			staffProfMax : 0,
			spearProfMax : 0,
			polearmProfMax : 0,
			bowProfMax : 0,
			martialProfMax : 0,
			barehandProfMax : 0,
			augmentProfMax : 0,
			mobilityProfMax : 0,

			attackSpellProfMax : 0,
			matterSpellProfMax : 0,
			divinationSpellProfMax : 0,
			clericalSpellProfMax : 0,
			enchantmentSpellProfMax : 0,
			healingSpellProfMax : 0
		},
		playerPassives: //passives
		{
			fireResist :0, //1 for resistant, 2 for immune, 3 for absorb
			coldResist :0,
			shockResist :0,
			disinResist :0,
			slowResist :0,
			sleepResist :0,
			poisonResist :0,
			paralysisResist :0,
			blindResist :0,
			petrifyResist :0,
			sicknessResist :0,
			drainResist :0,
			woundResist :0,
			breathless :false,
			searching :false,
			seeInvis :false,
			invis :false,
			levitate :false,
			flying :false,
			adornment :false,
			warning :false,
			telepathy :false,
			foodApp :false,
			reflection :false,
			magicResist :false,
			waterWalking :false,
			displacement :false,
			sustainAbility :false,
			slowDigest :false,
			lifeSaving :false,
			stealth :false,
			confuseResist :false,


			brisk :0,
			haste :0,
			dash :0,
			agileDash :0,
			infravision :false,
			regen :false,
			protection:0, 
			energyRegen :false,
			noHungCast :false,

			permSlow:false,
			permBrisk:false,
			permHaste:false,


			fumbling :false,
			isHungry :false,
			tempBrisk:0,//int
			tempHaste:0, //int
			tempRegen:0, //int
			tempConfluence:0, //int
			tempInvis:0, //int

			slow:0, //int
			blind:0, //int 
			sleep:0, //int
			poisoned:0, //int
			confused:0, //int
			taunted:0, //int
			aggravated:0, //int
			paralyzed:0, //int

			hallucin:0, //int
			enfeebled:0, //int
			vulnerable:0, //int
			slippery:0, //int
			petrify:0, //int
			vomit:0, //int
			strangle:0, //int 
			engulfed:0, //int

			woundedArmLeft:0, //int
			woundedArmRight:0, //int
			woundedLegLeft:0, //int
			woundedLegRight:0 //int
		},
		hunger:0,
		prevHunger:0, //for hunger state change alert
		nutrition:3, //1 for oversatiated, 2 for satiated, 3 for normal, 4 for hungry, 5 for weak, 6 for faing, 7 for starved
		luck:0,
		prayTime:0,
		weightCurr:0,
		weightMax:0,
		encumbrance:0, //0 for normal, 1 for Burdened, 2 for Stressed, 3 for Strained, 4 for Overtaxed, 5 for Overloaded
		strength:0,
		dexterity:0,
		intelligence:0,
		wisdom:0,
		constitution:0,
		speed:0,
		affinAC:0,
		affTH:0,
		alignAC:0,
		alignTH:0,
		obj1Prog:0,
		obj2Prog:0,
		wearRing:0, //0 if not, 1 if yes, 2 if wearing 2
		wearAmul:0, //0 if not, 1 if yes
		vision:0,

		energyClock:0,
		hpClock:0,
		newEnergyClock:true, //bool
		newHpClock:true, //bool

		overloadTempDex:0, //save for when 0
		maxDex:0,

		tempACVal:0,
		tempACDur:0,
		tempStrVal:0,
		tempStrDur:0,
		tempDexVal:0,
		tempDexDur:0,
		tempVal:0,
		tempDur:0,
		tempWisVal:0,
		tempWisDur:0,
		tempConVal:0,
		tempConDur:0,
		
		playerLevel:0,
		//class playerClass,
		playClass:0, //0=highlander, 1=wizard, 2=healer, 3=rapscallion, 4=monk, 5=sniper, 6=myrmidon, 7=saboteur, 8=occultist, 9=basilica, 10=triarius, 11=symposiarch
		race:0, //0 for human, 1 for dwarf, 2 for orc, 3 for elf
		hpCurr:0,
		hpMax:0,
		energyCurr:0,
		energyMax:0,
		armorAC:0,
		otherAC:0,
		totalAC:0,
		toHit:0,
		
		index:-1,
		});
	} //for	
	
	tempInv=[];
	tempSpells=[];
	
}

var lawfulObjectives = [];
initLawObj();

function initLawObj() {
	
	lawfulObjectives.push ({
	
		goal:"Do not kill an enemy before",
		id:1,
		progress:0,
	
	});
	
	
	lawfulObjectives.push ({
	
		goal:"Remove a curse from an item before",
		id:2,
		progress:0,
	});
	
	lawfulObjectives.push ({
	
		goal:"Bless an item before",
		id:3,
		progress:0,
	});
	
	lawfulObjectives.push ({
	
		goal:"Do not eat a corpse before",
		id:4,
		progress:0,
	});
	
	lawfulObjectives.push ({
	
		goal:"Rescue a player stuck in a trap before",
		id:5,
		progress:0,
	});
	
	lawfulObjectives.push ({
	
		goal:"Disarm a trap before",
		id:6,
		progress:0,
	});
	
	lawfulObjectives.push ({
	
		goal:"Give food to a hungry player before",
		id:7,
		progress:0,
	});
	
	
	lawfulObjectives.push ({
	
		goal:"Have a problem on yourself cured by prayer before",
		id:9,
		progress:0,
	});
	
	lawfulObjectives.push ({
	
		goal:"Do not equip a cursed item before",
		id:27,
		progress:0,
	});
	

}

var chaoticObjectives = [];
initChaosObj();

function initChaosObj() {

	chaoticObjectives.push ({
	
		goal:"Shove every other party member at least once before",
		id:10,
		progress:0,
	});
	
	chaoticObjectives.push ({
	
		goal:"Party successfully kills a shopkeeper before",
		id:11,
		progress:0,
	});
	
	chaoticObjectives.push ({
	
		goal:"No vote must be unanimous until",
		id:12,
		progress:0,
	});
	
	chaoticObjectives.push ({
	
		goal:"Successfully vote to leave room/hall while another player is less than 1/2 HP (rounded down) before",
		id:13,
		progress:0,
	});
	
	chaoticObjectives.push ({
	
		goal:"Successfully vote to leave room/hall while you have less than 1/2 HP (rounded down) before",
		id:14,
		progress:0,
	});
	
	chaoticObjectives.push ({
	
		goal:"Successfully guess another's objective/alignment before",
		id:15,
		progress:0,
	});
	
	chaoticObjectives.push ({
	
		goal:"Do not pray before",
		id:16,
		progress:0,
	});
	
	chaoticObjectives.push ({
	
		goal:"Eat only corpses until",
		id:17,
		progress:0,
	});
	
	chaoticObjectives.push ({
	
		goal:"Do not share food with another player until",
		id:18,
		progress:0,
	});
	
	chaoticObjectives.push ({
	
		goal:"Do not become burdened (or worse) before",
		id:19,
		progress:0,
	});
	
	chaoticObjectives.push ({
	
		goal:"Do not become burdened (or worse) before",
		id:20,
		progress:0,
	});
	
	chaoticObjectives.push ({
	
		goal:"Be burdened for a total of 21_AMOUNT turns (cumulative) before",
		id:21,
		progress:0,
	});
	
	chaoticObjectives.push ({
	
		goal:"Do not remove a curse from an item before",
		id:22,
		progress:0,
	});
	
	chaoticObjectives.push ({
	
		goal:"Have a cursed piece of equipment equipped for a total of 23_AMOUNT turns (cumulative) before",
		id:23,
		progress:0,
	});
	
	
	chaoticObjectives.push ({
	
		goal:"Kill an enemy with your bare hands before",
		id:25,
		progress:0,
	});
	
	chaoticObjectives.push ({
	
		goal:"Equip a cursed item before",
		id:26,
		progress:0,
	});

}

var neutralObjectives = [];
initNeutObj();

function initNeutObj() {

	neutralObjectives.push ({
	
		goal:"Have another player correctly guess your alignment before",
		id:8,
		progress:0,
	});
	
	neutralObjectives.push ({
	
		goal:"Have another player incorrectly guess your alignment before",
		id:24,
		progress:0,
	});

	neutralObjectives.push ({
	
		goal:"Do not quaff a potion until",
		id:28,
		progress:0,
	});

	neutralObjectives.push ({
	
		goal:"Quaff 29_AMOUNT potions before",
		id:29,
		progress:0,
	});
	
	neutralObjectives.push ({
	
		goal:"Do not read a scroll before",
		id:30,
		progress:0,
	});
	
	neutralObjectives.push ({
	
		goal:"Read 31_AMOUNT scrolls before",
		id:31,
		progress:0,
	});
	
	neutralObjectives.push ({
	
		goal:"Do not use any tools before",
		id:32,
		progress:0,
	});
	
	neutralObjectives.push ({
	
		goal:"Do not equip any jewelry before",
		id:33,
		progress:0,
	});
	
	neutralObjectives.push ({
	
		goal:"No swearing (real life) until",
		id:34,
		progress:0,
	});
	
	neutralObjectives.push ({
	
		goal:"For a total of 35_AMOUNT turns (cumulative), other players must not be within radius 1 of self until",
		id:35,
		progress:0,
	});
	
	neutralObjectives.push ({
	
		goal:"For a total of 36_AMOUNT turns (cumulative), you must be within radius 1 of at least one other player until",
		id:36,
		progress:0,
	});
	
	neutralObjectives.push ({
	
		goal:"Do not kill more than 37_AMOUNT enemies until",
		//5 per level
		id:37,
		progress:0,
	});
	
	neutralObjectives.push ({
	
		goal:"Shove 38_AMOUNT enemies before",
		//7 per level
		id:38,
		progress:0,
	});
	
	neutralObjectives.push ({
	
		goal:"Catch 140_AMOUNT items before",
		//3 per level
		id:140,
		progress:0,
	});
	
}

var leaderObjectives = [];
initLeadObj();

function initLeadObj() {

	leaderObjectives.push ({
	
		goal:"Don't use tiebreak vote until",
		id:39,
		progress:0,
	});
	
	leaderObjectives.push ({
	
		goal:"Use tiebreak vote before",
		id:40,
		progress:0,
	});
	
	leaderObjectives.push ({
	
		goal:"Don’t use veto power until",
		id:41,
		progress:0,
	});
	
	leaderObjectives.push ({
	
		goal:"Use veto power before",
		id:42,
		progress:0,
	});
	
	leaderObjectives.push ({
	
		goal:"Be the only one to pick up gold before",
		id:43,
		progress:0,
	});
	
	leaderObjectives.push ({
	
		goal:"Do not pick up any gold before",
		id:44,
		progress:0,
	});
	
	leaderObjectives.push ({
	
		goal:"Do not eat before",
		id:45,
		progress:0,
	});
	
	leaderObjectives.push ({
	
		goal:"Do not equip any piece of equipment other than those from your starting inventory until",
		id:46,
		progress:0,
	});
	
	leaderObjectives.push ({
	
		goal:"If descending stairs are seen, they must be taken immediately (cannot explore/revisit any room/hall) until",
		id:47,
		progress:0,
	});
	
	leaderObjectives.push ({
	
		goal:"The first door seen in all rooms (other than the entrance door) must be the one taken until",
		id:48,
		progress:0,
	});
	
	leaderObjectives.push ({
	
		goal:"Do not spend gold at a shop until",
		id:49,
		progress:0,
	});
	
	leaderObjectives.push ({
	
		goal:"Do not be on the losing side of any vote before",
		id:50,
		progress:0,
	});
	
	leaderObjectives.push ({
	
		goal:"No vote must last more than 10 seconds until",
		id:51,
		progress:0,
	});

}

var highObjectives = [];
initHighObj();

function initHighObj() {

	highObjectives.push ({
	
		goal:"Take 52_AMOUNT damage before",
		//25 per level
		id:52,
		progress:0,
	});
	
	highObjectives.push ({
	
		goal:"Become Apprentice with Axes before",
		id:53,
		progress:0,
	});
	
	highObjectives.push ({
	
		goal:"Become Apprentice with Swords before",
		id:54,
		progress:0,
	});
	
	highObjectives.push ({
	
		goal:"Become Apprentice with Bludgeons before",
		id:55,
		progress:0,
	});
	
	highObjectives.push ({
	
		goal:"Kill 56_AMOUNT monsters with 56_SKILL before",
		//4 per level
		id:56,
		progress:0,
	});
	
	highObjectives.push ({
	
		goal:"Don't use Transpose to cast a skill/spell before",
		id:57,
		progress:0,
	});
	
	
}

var wizObjectives = [];
initWizObj();

function initWizObj() {

	wizObjectives.push ({
	
		goal:"Deal 58_AMOUNT damage with spells before",
		//25 per level
		id:58,
		progress:0,
	});
	
	wizObjectives.push ({
	
		goal:"Do not zap a wand until",
		id:59,
		progress:0,
	});
	
	wizObjectives.push ({
	
		goal:"Become Apprentice with Attack Spells before",
		id:60,
		progress:0,
	});
	
	wizObjectives.push ({
	
		goal:"Become Apprentice in Matter before",
		id:61,
		progress:0,
	});
	
	wizObjectives.push ({
	
		goal:"Retain more than half of max MP until",
		id:62,
		progress:0,
	});
	
}

var rapObjectives = [];
initRapObj();

function initRapObj() {

	rapObjectives.push ({
	
		goal:"Reveal 63_AMOUNT hidden objects/beings before",
		//2 per level
		id:63,
		progress:0,
	});
	
	rapObjectives.push ({
	
		goal:"Pick up 64_AMOUNT items before",
		//5 per level
		id:64,
		progress:0,
	});
	
	rapObjectives.push ({
	
		goal:"Become Apprentice in Enchantment before",
		id:65,
		progress:0,
	});
	
	rapObjectives.push ({
	
		goal:"Become Apprentice with Daggers before",
		id:66,
		progress:0,
	});
	
	rapObjectives.push ({
	
		goal:"Become Apprentice in Mobility before",
		id:67,
		progress:0,
	});

	rapObjectives.push ({
	
		goal:"Throw 68_AMOUNT projectiles before",
		id:68,
		progress:0,
	});
	
	rapObjectives.push ({
	
		goal:"Do not throw a projectile until",
		id:69,
		progress:0,
	});
	
	rapObjectives.push ({
	
		goal:"Nullify damage with Nimble before",
		id:70,
		progress:0,
	});
	
}

var healObjectives = [];
initHealObj();

function initHealObj() {

	healObjectives.push ({
	
		goal:"Heal a player with 1 HP before",
		id:71,
		progress:0,
	});
	
	healObjectives.push ({
	
		goal:"Heal 72_AMOUNT total HP before",
		//20 per level
		id:72,
		progress:0,
	});
	
	healObjectives.push ({
	
		goal:"Do not get hit with magic (including friendly spells, but can still cast spells on self) until",
		id:73,
		progress:0,
	});
	
	healObjectives.push ({
	
		goal:"Do not take damage until",
		id:74,
		progress:0,
	});
	
	healObjectives.push ({
	
		goal:"Do not deal damage until",
		id:75,
		progress:0,
	});
	
	healObjectives.push ({
	
		goal:"Kill an enemy before",
		id:76,
		progress:0,
	});
	
	healObjectives.push ({
	
		goal:"Prevent any player from falling below 1/4 HP (rounded down) before",
		id:77,
		progress:0,
	});
	
}

var monkObjectives = [];
initMonkObj();

function initMonkObj() {

	monkObjectives.push ({
	
		goal:"Do not become Hungry before",
		id:78,
		progress:0,
	});
	
	monkObjectives.push ({
	
		goal:"Do not become Satiated before",
		id:79,
		progress:0,
	});
	
	monkObjectives.push ({
	
		goal:"Become Apprentice in Clerical before",
		id:80,
		progress:0,
	});
	
	monkObjectives.push ({
	
		goal:"Become Apprentice in Matter before",
		id:81,
		progress:0,
	});
	
	monkObjectives.push ({
	
		goal:"Become Apprentice in Martial Arts before",
		id:82,
		progress:0,
	});
	
	monkObjectives.push ({
	
		goal:"Remove an ailment from self with Moksha Delve before",
		id:83,
		progress:0,
	});
	
	monkObjectives.push ({
	
		goal:"Paralyze 84_AMOUNT enemies with melee attacks before",
		//3 per level
		id:84,
		progress:0,
	});
	
	monkObjectives.push ({
	
		goal:"Nullify 85_AMOUNT attacks from enemies before",
		//3 per level
		id:85,
		progress:0,
	});
	

}


var snipObjectives = [];
initSnipObj();

function initSnipObj() {

	snipObjectives.push ({
	
		goal:"Reveal 86_AMOUNT hidden objects/beings before",
		//2 per level
		id:86,
		progress:0,
	});
	
	snipObjectives.push ({
	
		goal:"Inflict Blind on 87_AMOUNT enemies before",
		//5 per level
		id:87,
		progress:0,
	});
	
	snipObjectives.push ({
	
		goal:"Become Apprentice in Matter before",
		id:88,
		progress:0,
	});
	
	snipObjectives.push ({
	
		goal:"Become Apprentice in Enchantment before",
		id:89,
		progress:0,
	});
	
	snipObjectives.push ({
	
		goal:"Become Apprentice in Augments before",
		id:90,
		progress:0,
	});
	
	snipObjectives.push ({
	
		goal:"Become Apprentice with Bows before",
		id:91,
		progress:0,
	});
	
	snipObjectives.push ({
	
		goal:"Identify 92_AMOUNT rotten food items before",
		//2 per level
		id:92,
		progress:0,
	});
	
}

var myrmObjectives = [];
initMyrmObj();

function initMyrmObj() {

	myrmObjectives.push ({
	
		goal:"Avoid 93_AMOUNT attacks before",
		//5 per level
		id:93,
		progress:0,
	});

	myrmObjectives.push ({
	
		goal:"Deal 94_AMOUNT damage before",
		//25 per level
		id:94,
		progress:0,
	});
	
	myrmObjectives.push ({
	
		goal:"Identify a cursed weapon before",
		id:95,
		progress:0,
	});
	
	myrmObjectives.push ({
	
		goal:"Get hit with an arrow before",
		id:96,
		progress:0,
	});
	
	myrmObjectives.push ({
	
		goal:"Become Apprentice with Swords before",
		id:97,
		progress:0,
	});
	
	myrmObjectives.push ({
	
		goal:"Become Apprentice with Spears before",
		id:98,
		progress:0,
	});
	
	myrmObjectives.push ({
	
		goal:"Become Apprentice in Augments before",
		id:99,
		progress:0,
	});
	
}

var sabObjectives = [];
initSabObj();

function initSabObj() {

	sabObjectives.push ({
	
		goal:"Inflict ailments on 100_AMOUNT enemies before",
		//5 per level
		id:100,
		progress:0,
	});
	
	sabObjectives.push ({
	
		goal:"Kill 101_AMOUNT enemies inflicted with ailments before",
		//4 per level
		id:101,
		progress:0,
	});
	
	
	sabObjectives.push ({
	
		goal:"Become Apprentice in Enchantment before",
		id:102,
		progress:0,
	});
	
	sabObjectives.push ({
	
		goal:"Become Apprentice in Divination before",
		id:103,
		progress:0,
	});
	
	sabObjectives.push ({
	
		goal:"Become Apprentice in Matter before",
		id:104,
		progress:0,
	});
	
	sabObjectives.push ({
	
		goal:"Become Apprentice with Polearms before",
		id:105,
		progress:0,
	});

}

var occObjectives = [];
initOccObj();

function initOccObj() {

	occObjectives.push ({
	
		goal:"Reanimate 106_AMOUNT beings before",
		//4 per level
		id:106,
		progress:0,
	});
	
	occObjectives.push ({
	
		goal:"Drain 107_AMOUNT HP from beings before",
		//20 per level
		id:107,
		progress:0,
	});
	
	occObjectives.push ({
	
		goal:"Kill 108_AMOUNT enemies while morphed before",
		//5 per level
		id:108,
		progress:0,
	});
	
	occObjectives.push ({
	
		goal:"Eat 109_AMOUNT corpses while morphed before",
		//3 per level
		id:109,
		progress:0,
	});
	
	occObjectives.push ({
	
		goal:"Retain more than 1/4 max energy until",
		id:110,
		progress:0,
	});
	
	occObjectives.push ({
	
		goal:"Don't use Transpose to cast a skill/spell before",
		id:111,
		progress:0,
	});
	
	occObjectives.push ({
	
		goal:"Become Apprentice with Attack spells before",
		id:125,
		progress:0,
	});
	
	occObjectives.push ({
	
		goal:"Become Apprentice in Matter before",
		id:126,
		progress:0,
	});
	
	occObjectives.push ({
	
		goal:"Become Apprentice in Augments before",
		id:127,
		progress:0,
	});
	
	occObjectives.push ({
	
		goal:"Kill 128_AMOUNT enemies with Nosferatu before",
		//4 per level
		id:128,
		progress:0,
	});
	
	occObjectives.push ({
	
		goal:"Kill 129_AMOUNT enemies with a reanimated corpse before",
		//4 per level
		id:129,
		progress:0,
	});

}

var basObjectives = [];
initBasObj();

function initBasObj() {

	basObjectives.push ({
	
		goal:"Heal 112_AMOUNT HP before",
		//25 per level
		id:112,
		progress:0,
	});
	
	basObjectives.push ({
	
		goal:"Recover 113_AMOUNT energy on other players before",
		//25 per level
		id:113,
		progress:0,
	});
	
	basObjectives.push ({
	
		goal:"Paralyze 114_AMOUNT beings before",
		//5 per level
		id:114,
		progress:0,
	});
	
	basObjectives.push ({
	
		goal:"Deal 115_AMOUNT damage before",
		//20 per level
		id:115,
		progress:0,
	});
	
	basObjectives.push ({
	
		goal:"Do not attack a being before",
		id:116,
		progress:0,
	});
	
	basObjectives.push ({
	
		goal:"Kill an enemy before",
		id:117,
		progress:0,
	});
	
	basObjectives.push ({
	
		goal:"Become Apprentice in Healing before",
		id:121,
		progress:0,
	});
	
	basObjectives.push ({
	
		goal:"Become Apprentice in Clerical before",
		id:122,
		progress:0,
	});
	
	basObjectives.push ({
	
		goal:"Become Apprentice in Matter before",
		id:123,
		progress:0,
	});
	
	basObjectives.push ({
	
		goal:"Take 124_AMOUNT damage before",
		id:124,
		progress:0,
	});

}

var triObjectives = [];
initTriObj();

function initTriObj() {

	triObjectives.push ({
	
		goal:"Kill an enemy at least 5 tiles away before",
		id:118,
		progress:0,
	});
	
	triObjectives.push ({
	
		goal:"Kill an enemy with Palisade before",
		id:118,
		progress:0,
	});
	
	triObjectives.push ({
	
		goal:"Take 119_AMOUNT damage before",
		//25 per level
		id:119,
		progress:0,
	});
	
	triObjectives.push ({
	
		goal:"Have +13 total AC (even temporarily) before",
		id:120,
		progress:0,
	});
	
	triObjectives.push ({
	
		goal:"Become Apprentice with Spears before",
		id:130,
		progress:0,
	});
	
	triObjectives.push ({
	
		goal:"Become Apprentice with Matter before",
		id:131,
		progress:0,
	});
	
	triObjectives.push ({
	
		goal:"Become Apprentice with Augments before",
		id:132,
		progress:0,
	});

}

var symObjectives = [];
initSymObj();

function initSymObj() {

	symObjectives.push ({
	
		goal:"Recover 133_AMOUNT energy on self before",
		//30 per level
		id:133,
		progress:0,
	});
	
	symObjectives.push ({
	
		goal:"Identify 134_AMOUNT rotten food items before",
		//2 per level
		id:134,
		progress:0,
	});
	
	symObjectives.push ({
	
		goal:"Recover 135_AMOUNT energy on other players before",
		//2 per level
		id:135,
		progress:0,
	});
	
	symObjectives.push ({
	
		goal:"Kill an enemy at least 5 tiles away before",
		id:135,
		progress:0,
	});
	
	symObjectives.push ({
	
		goal:"Become Apprentice in Augments before",
		id:136,
		progress:0,
	});
	
	symObjectives.push ({
	
		goal:"Become Apprentice in Matter before",
		id:137,
		progress:0,
	});
	
	symObjectives.push ({
	
		goal:"Become Apprentice in Divination before",
		id:138,
		progress:0,
	});
	
	symObjectives.push ({
	
		goal:"Become Apprentice in Mobility before",
		id:139,
		progress:0,
	});
}

//objective count: 140

$("#rerollObj").click(function( event ) {

	rerollObj();

	
	objConflicts();
	
	makeObjective();
	
	updatePlayer();
});

function rerollObj() {

	allPlayers[whoIsActive].obj1="";
	allPlayers[whoIsActive].obj2="";
	allPlayers[whoIsActive].obj3="";
	allPlayers[whoIsActive].obj4="";
	
	var objLength;
	var objRoll;
	
	//Objective #1: alignment objective; strictly lawful/chaotic
	
	if (allPlayers[lockActive].alignment==1) {
		
		objLength=lawfulObjectives.length;
		objLength--;
		
		objRoll=rollDie0(objLength, 1);
		
		allPlayers[lockActive].obj1=Object.assign({}, lawfulObjectives[objRoll]);
		//allPlayers[lockActive].obj1=lawfulObjectives[objRoll];

	
	}
	
	if (allPlayers[lockActive].alignment==2) {
		
		objLength=chaoticObjectives.length;
		objLength--;
		
		objRoll=rollDie0(objLength, 1);
		
		
		allPlayers[lockActive].obj1=Object.assign({}, chaoticObjectives[objRoll]);
		
		//test
		//allPlayers[lockActive].obj1=Object.assign({}, chaoticObjectives[11]);
		
	
	}
	
	//Objective #2: class-based or neutral alignment objectives
	
	let obj2Roll=rollDie(2,1);
	
	//class
	if (obj2Roll==1) {
	
		//highlander
		if (allPlayers[lockActive].playClass==0) {
		
			objLength=highObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj2=Object.assign({}, highObjectives[objRoll]);
			//allPlayers[lockActive].obj2=highObjectives[objRoll];
			
		
		}
		
		//wizard
		if (allPlayers[lockActive].playClass==1) {
		
			objLength=wizObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj2=Object.assign({}, wizObjectives[objRoll]);
			//allPlayers[lockActive].obj2=wizObjectives[objRoll];
			
		
		}
		
		//healer
		if (allPlayers[lockActive].playClass==2) {
		
			objLength=healObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj2=Object.assign({}, healObjectives[objRoll]);
			//allPlayers[lockActive].obj2=healObjectives[objRoll];

		
		}
		
		//rapscallion
		if (allPlayers[lockActive].playClass==3) {
		
			objLength=rapObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj2=Object.assign({}, rapObjectives[objRoll]);
		}
		
		//monk
		if (allPlayers[lockActive].playClass==4) {
		
			objLength=monkObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj2=Object.assign({}, monkObjectives[objRoll]);
			//allPlayers[lockActive].obj2=monkObjectives[objRoll];
		
		}
		
		//sniper
		if (allPlayers[lockActive].playClass==5) {
		
			objLength=snipObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj2=Object.assign({}, snipObjectives[objRoll]);
			//allPlayers[lockActive].obj2=snipObjectives[objRoll];
		
		}
		
		//myrmidon
		if (allPlayers[lockActive].playClass==6) {
		
			objLength=myrmObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj2=Object.assign({}, myrmObjectives[objRoll]);
			//allPlayers[lockActive].obj2=myrmObjectives[objRoll];
		
		}
		
		//saboteur
		if (allPlayers[lockActive].playClass==7) {
		
			objLength=sabObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj2=Object.assign({}, sabObjectives[objRoll]);
			//allPlayers[lockActive].obj2=sabObjectives[objRoll];
		
		}
		
		//occultist
		if (allPlayers[lockActive].playClass==8) {
		
			objLength=occObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj2=Object.assign({}, occObjectives[objRoll]);
			//allPlayers[lockActive].obj2=occObjectives[objRoll];
		
		}
		
		//basilica
		if (allPlayers[lockActive].playClass==9) {
		
			objLength=basObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj2=Object.assign({}, basObjectives[objRoll]);
			//allPlayers[lockActive].obj2=basObjectives[objRoll];
		
		}
		
		//triarius
		if (allPlayers[lockActive].playClass==10) {
		
			objLength=triObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj2=Object.assign({}, triObjectives[objRoll]);
			//allPlayers[lockActive].obj2=triObjectives[objRoll];
		
		}
		
		//symposiarch
		if (allPlayers[lockActive].playClass==11) {
		
			objLength=symObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj2=Object.assign({}, symObjectives[objRoll]);
			//allPlayers[lockActive].obj2=symObjectives[objRoll];
		
		}
	
	}
	
	//neutral
	if (obj2Roll==2) {
	
		objLength=neutralObjectives.length;
		objLength--;
		
		objRoll=rollDie0(objLength, 1);
		
		allPlayers[lockActive].obj2=Object.assign({}, neutralObjectives[objRoll]);
		//allPlayers[lockActive].obj2=neutralObjectives[objRoll];
	
	}
	
	//Objective #3: any non-leader objective 
	
	let obj3Roll=rollDie(3,1);
	
	//alignment
	if (obj3Roll==1) {
	
		if (allPlayers[lockActive].alignment==1) {
			
			objLength=lawfulObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj3=Object.assign({}, lawfulObjectives[objRoll]);
			//allPlayers[lockActive].obj3=lawfulObjectives[objRoll];
		
		}
		
		if (allPlayers[lockActive].alignment==2) {
			
			objLength=chaoticObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			
			allPlayers[lockActive].obj3=Object.assign({}, chaoticObjectives[objRoll]);
			//allPlayers[lockActive].obj3=chaoticObjectives[objRoll];
		
		}
	
	}
	
	//neutral
	if (obj3Roll==2) {
	
		objLength=neutralObjectives.length;
		objLength--;
		
		objRoll=rollDie0(objLength, 1);
		
		allPlayers[lockActive].obj3=Object.assign({}, neutralObjectives[objRoll]);
		//allPlayers[lockActive].obj3=neutralObjectives[objRoll];
	
	}
	
	//class
	if (obj3Roll==3) {
	
		//highlander
		if (allPlayers[lockActive].playClass==0) {
		
			objLength=highObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj3=Object.assign({}, highObjectives[objRoll]);
			//allPlayers[lockActive].obj3=highObjectives[objRoll];
		
		}
		
		//wizard
		if (allPlayers[lockActive].playClass==1) {
		
			objLength=wizObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj3=Object.assign({}, wizObjectives[objRoll]);
			//allPlayers[lockActive].obj3=wizObjectives[objRoll];
		
		}
		
		//healer
		if (allPlayers[lockActive].playClass==2) {
		
			objLength=healObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj3=Object.assign({}, healObjectives[objRoll]);
			//allPlayers[lockActive].obj3=healObjectives[objRoll];
		
		}
		
		//rapscallion
		if (allPlayers[lockActive].playClass==3) {
		
			objLength=rapObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj3=Object.assign({}, rapObjectives[objRoll]);
		}
		
		//monk
		if (allPlayers[lockActive].playClass==4) {
		
			objLength=monkObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj3=Object.assign({}, monkObjectives[objRoll]);
			//allPlayers[lockActive].obj3=monkObjectives[objRoll];
		
		}
		
		//sniper
		if (allPlayers[lockActive].playClass==5) {
		
			objLength=snipObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj3=Object.assign({}, snipObjectives[objRoll]);
			//allPlayers[lockActive].obj3=snipObjectives[objRoll];
		
		}
		
		//myrmidon
		if (allPlayers[lockActive].playClass==6) {
		
			objLength=myrmObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj3=Object.assign({}, myrmObjectives[objRoll]);
			//allPlayers[lockActive].obj3=myrmObjectives[objRoll];
		
		}
		
		//saboteur
		if (allPlayers[lockActive].playClass==7) {
		
			objLength=sabObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj3=Object.assign({}, sabObjectives[objRoll]);
			//allPlayers[lockActive].obj3=sabObjectives[objRoll];
		
		}
		
		//occultist
		if (allPlayers[lockActive].playClass==8) {
		
			objLength=occObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj3=Object.assign({}, occObjectives[objRoll]);
			//allPlayers[lockActive].obj3=occObjectives[objRoll];
		
		}
		
		//basilica
		if (allPlayers[lockActive].playClass==9) {
		
			objLength=basObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj3=Object.assign({}, basObjectives[objRoll]);
			//allPlayers[lockActive].obj3=basObjectives[objRoll];
		
		}
		
		//triarius
		if (allPlayers[lockActive].playClass==10) {
		
			objLength=triObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj3=Object.assign({}, triObjectives[objRoll]);
			//allPlayers[lockActive].obj3=triObjectives[objRoll];
		
		}
		
		//symposiarch
		if (allPlayers[lockActive].playClass==11) {
		
			objLength=symObjectives.length;
			objLength--;
			
			objRoll=rollDie0(objLength, 1);
			
			allPlayers[lockActive].obj3=Object.assign({}, symObjectives[objRoll]);
			//allPlayers[lockActive].obj3=symObjectives[objRoll];
		
		}
	
	}
}

function objConflicts(usedObj) {

	var usedObj=[];
	
	usedObj.push(allPlayers[lockActive].obj1.id);
	usedObj.push(allPlayers[lockActive].obj2.id);
	usedObj.push(allPlayers[lockActive].obj3.id);
	
	if(((new Set(usedObj)).size !== usedObj.length)==true) {
	
		console.log("dupe");
	
		rerollObj();
	}
	
	if(usedObj.includes(68) && usedObj.includes(69)) {
	
		console.log("conflict");
	
		rerollObj();
	}
	
	if(usedObj.includes(75) && usedObj.includes(76)) {
	
		console.log("conflict");
	
		rerollObj();
	}
	
	if(usedObj.includes(1) && ((usedObj.includes(56)) ||(usedObj.includes(76)) || (usedObj.includes(117)))) {
	
		console.log("conflict");
	
		rerollObj();
	}
	
	if(usedObj.includes(28) && usedObj.includes(29)) {
	
		console.log("conflict");
	
		rerollObj();
	}
	
	if(usedObj.includes(30) && usedObj.includes(31)) {
	
		console.log("conflict");
	
		rerollObj();
	}
	
	if(usedObj.includes(35) && usedObj.includes(36)) {
	
		console.log("conflict");
	
		rerollObj();
	}
	
	if(usedObj.includes(8) && usedObj.includes(24)) {
	
		console.log("conflict");
	
		rerollObj();
	}

}

$( "#accordion" ).accordion();

var availableTags = [
	"ActionScript",
	"AppleScript",
	"Asp",
	"BASIC",
	"C",
	"C++",
	"Clojure",
	"COBOL",
	"ColdFusion",
	"Erlang",
	"Fortran",
	"Groovy",
	"Haskell",
	"Java",
	"JavaScript",
	"Lisp",
	"Perl",
	"PHP",
	"Python",
	"Ruby",
	"Scala",
	"Scheme"
];
$( "#autocomplete" ).autocomplete({
	source: availableTags
});



$( "#button" ).button();
$( "#button-icon" ).button({
	icon: "ui-icon-gear",
	showLabel: false
});



$( "#radioset" ).buttonset();



$( "#controlgroup" ).controlgroup();



$( "#dungeonTabs" ).tabs({
  collapsible: true
});



$( "#classDialog" ).dialog({
	autoOpen: false,
	width: 400,
	buttons: [
		/*{
			text: "asdf",
			click: function() {
				$( this ).dialog( "close" );
			}
		},*/
		{
			text: "Cancel",
			click: function() {
			
				document.getElementById("chooseHumanBut").style.visibility = "visible";
				document.getElementById("chooseDwarfBut").style.visibility = "visible";
				document.getElementById("chooseOrcBut").style.visibility = "visible";
				document.getElementById("chooseElfBut").style.visibility = "visible";
				$( this ).dialog( "close" );
			}
		}
	]
});

$( "#copyDialog" ).dialog({
	autoOpen: false,
	width: 400,
	buttons: [
		{
			text: "Select",
			click: function() {
				 // $( "#copyStuff" ).select();
				 selectText("copyStuff");
			}
		},
		{
			text: "Cancel",
			click: function() {
				$( this ).dialog( "close" );
			}
		}
	]
}).css("font-size", "12px");;

function selectText(element) {
    var doc = document
        , text = doc.getElementById(element)
        , range, selection
    ;    
    if (doc.body.createTextRange) {
        range = document.body.createTextRange();
        range.moveToElementText(text);
        range.select();
    } else if (window.getSelection) {
        selection = window.getSelection();        
        range = document.createRange();
        range.selectNodeContents(text);
        selection.removeAllRanges();
        selection.addRange(range);
    }
}

$(document).on('click','.ui-dialog-titlebar-close',function(){

    //reinitialize stats when dialog x button clicked
	
	document.getElementById("chooseHumanBut").style.visibility = "visible";
	document.getElementById("chooseDwarfBut").style.visibility = "visible";
	document.getElementById("chooseOrcBut").style.visibility = "visible";
	document.getElementById("chooseElfBut").style.visibility = "visible";
	
	if (allPlayers[lockActive].playerExists==false) {
	
		//initStats();
	
	}
});

$( "#raceDialog" ).dialog({
	autoOpen: false,
	width: 400,
	buttons: [
		{
			text: "Back",
			click: function() {
				$( this ).dialog( "close" );
				$("#classDialog").dialog("open");
				
				//reinitialize stats here
				
				if (allPlayers[lockActive].playerExists==false) {
				
					//initStats();
				
				}
			}
		},
		{
			text: "Cancel",
			click: function() {
				
				document.getElementById("chooseHumanBut").style.visibility = "visible";
				document.getElementById("chooseDwarfBut").style.visibility = "visible";
				document.getElementById("chooseOrcBut").style.visibility = "visible";
				document.getElementById("chooseElfBut").style.visibility = "visible";
				$( this ).dialog( "close" );
				
				//reinitialize stats here
				
				if (allPlayers[lockActive].playerExists==false) {
				
					//initStats();
				
				}
			}
		}
	]
});

$( "#copyPlayerBut" ).click(function( event ) {

	var tempCopy;
	var tempAlign;
	
	if (allPlayers[whoIsActive].playerExists==true) {
	
		if (allPlayers[whoIsActive].alignment==1) {
			
			tempAlign=" Lawful ";
		
		}
			
		if (allPlayers[whoIsActive].alignment==2) {
		
			tempAlign=" Chaotic ";
		
		}
		
		tempCopy=allPlayers[whoIsActive].playerName + ", the " + tempAlign + allPlayers[whoIsActive].playerNameRace + " " + allPlayers[whoIsActive].playerNameClass;

		tempCopy+="<br><br>";
		
		tempCopy+="Level: " + allPlayers[whoIsActive].playerLevel;
		tempCopy+="<br><br>";
		
		tempCopy+="HP: " + allPlayers[whoIsActive].hpCurr + " / " + allPlayers[whoIsActive].hpMax;
		tempCopy+="<br>";
		tempCopy+="Energy: " + allPlayers[whoIsActive].energyCurr + " / " + allPlayers[whoIsActive].energyMax;
		
		tempCopy+="<br><br>";
		
		tempCopy+="Strength: " + allPlayers[whoIsActive].strength;
		
		tempCopy+="<br>";
		
		tempCopy+="Dexterity: " + allPlayers[whoIsActive].dexterity;
		
		tempCopy+="<br>";
		
		tempCopy+="Intelligence: " + allPlayers[whoIsActive].intelligence;
		
		tempCopy+="<br>";
		
		tempCopy+="Wisdom: " + allPlayers[whoIsActive].wisdom;
		
		tempCopy+="<br>";
		
		tempCopy+="Constitution: " + allPlayers[whoIsActive].constitution;
		
		tempCopy+="<br><br>";
		
		tempCopy+="AC: " + allPlayers[whoIsActive].totalAC;
		//armorACInt=allPlayers[whoIsActive].armorAC;
		tempCopy+=" (+" + allPlayers[whoIsActive].armorAC +" from armor, +" + allPlayers[whoIsActive].otherAC + " other)";
		
		tempCopy+="<br><br>";
		
		//inventory
		tempCopy+="<br>--------<br>";
		tempCopy+="Items:";
		tempCopy+="<br>--------<br><br>";
		
		for (i=0;i<allPlayers[whoIsActive].inventory.length;i++) {
		
			tempCopy+=allPlayers[whoIsActive].inventory[i];
			tempCopy+="<br>";
		
		}
		
		tempCopy+="<br>";
		
		//spells
		tempCopy+="<br>--------------<br>";
		tempCopy+="Skills/spells:";
		tempCopy+="<br>--------------<br><br>";
		
		for (i=0;i<allPlayers[whoIsActive].spells.length;i++) {
		
			tempCopy+=allPlayers[whoIsActive].spells[i];
			tempCopy+="<br><br>~<br><br>";
		
		}
		
		$("#copyStuff").html(tempCopy);

		$( "#copyDialog" ).dialog( "open" );
		event.preventDefault();
	
	} //player exists
});

// Link to open the dialog
$( "#initClass" ).click(function( event ) {

	//to do: prevent changing stats when already exists...
	//done?
	
	lockActive=whoIsActive;

	$( "#classDialog" ).dialog( "open" );
	$("#classInvalid").text(" ");
	event.preventDefault();
});

var classChoice;

// Link to open the dialog
$( "#chooseHighBut" ).click(function( event ) {
	$("#classDialog").dialog("close");
	document.getElementById("chooseHumanBut").style.visibility = "visible";
	document.getElementById("chooseDwarfBut").style.visibility = "visible";
	document.getElementById("chooseOrcBut").style.visibility = "visible";
	document.getElementById("chooseElfBut").style.visibility = "hidden";
	$( "#raceDialog" ).dialog( "open" );
	event.preventDefault();

	
	//edit stats for class here
	//initialize first
	
	//initStats();
	

	
	classChoice=0;
	
	/*allPlayers[lockActive].hasClass=true;

	allPlayers[lockActive].totalAC=12;
	allPlayers[lockActive].armorAC=0;
	allPlayers[lockActive].otherAC=0;
	allPlayers[lockActive].speed=12;
	allPlayers[lockActive].luck=0;
	allPlayers[lockActive].hpMax=0;
	allPlayers[lockActive].hpCurr=0;
	allPlayers[lockActive].energyCurr=0;
	allPlayers[lockActive].energyMax=0;
	allPlayers[lockActive].strength=0;
	allPlayers[lockActive].dexterity=0;
	allPlayers[lockActive].intelligence=0;
	allPlayers[lockActive].wisdom=0;
	allPlayers[lockActive].constitution=0;	//initialize
	*/
	
});

// Link to open the dialog
$( "#chooseWizBut" ).click(function( event ) {
	$("#classDialog").dialog("close");
	document.getElementById("chooseHumanBut").style.visibility = "visible";
	document.getElementById("chooseDwarfBut").style.visibility = "hidden";
	document.getElementById("chooseOrcBut").style.visibility = "hidden";
	document.getElementById("chooseElfBut").style.visibility = "visible";
	$( "#raceDialog" ).dialog( "open" );
	
	event.preventDefault();
	
	//edit stats for class here
	
	//initStats();

	
	classChoice=1;
		
	/*allPlayers[lockActive].hasClass=true;

	allPlayers[lockActive].totalAC=12;
	allPlayers[lockActive].armorAC=0;
	allPlayers[lockActive].otherAC=0;
	allPlayers[lockActive].speed=12;
	allPlayers[lockActive].luck=0;
	allPlayers[lockActive].hpMax=0;
	allPlayers[lockActive].hpCurr=0;
	allPlayers[lockActive].energyCurr=0;
	allPlayers[lockActive].energyMax=0;
	allPlayers[lockActive].strength=0;
	allPlayers[lockActive].dexterity=0;
	allPlayers[lockActive].intelligence=0;
	allPlayers[lockActive].wisdom=0;
	allPlayers[lockActive].constitution=0;	//initialize*/
	
	
		
});

// Link to open the dialog
$( "#chooseHealBut" ).click(function( event ) {
	$("#classDialog").dialog("close");
	document.getElementById("chooseHumanBut").style.visibility = "visible";
	document.getElementById("chooseDwarfBut").style.visibility = "visible";
	document.getElementById("chooseOrcBut").style.visibility = "hidden";
	document.getElementById("chooseElfBut").style.visibility = "visible";
	$( "#raceDialog" ).dialog( "open" );
	event.preventDefault();
	
	//edit stats for class here
	
	//initStats();
	
	
		classChoice=2;
		/*allPlayers[lockActive].hasClass=true;

		allPlayers[lockActive].totalAC=12;
		allPlayers[lockActive].armorAC=0;
		allPlayers[lockActive].otherAC=0;
		allPlayers[lockActive].speed=12;
		allPlayers[lockActive].luck=0;
		allPlayers[lockActive].hpMax=0;
		allPlayers[lockActive].hpCurr=0;
		allPlayers[lockActive].energyCurr=0;
		allPlayers[lockActive].energyMax=0;
		allPlayers[lockActive].strength=0;
		allPlayers[lockActive].dexterity=0;
		allPlayers[lockActive].intelligence=0;
		allPlayers[lockActive].wisdom=0;
		allPlayers[lockActive].constitution=0;	//initialize*/
		
		
		
});

// Link to open the dialog
$( "#chooseRapBut" ).click(function( event ) {
	$("#classDialog").dialog("close");
	document.getElementById("chooseHumanBut").style.visibility = "visible";
	document.getElementById("chooseDwarfBut").style.visibility = "hidden";
	document.getElementById("chooseOrcBut").style.visibility = "visible";
	document.getElementById("chooseElfBut").style.visibility = "visible";
	$( "#raceDialog" ).dialog( "open" );
	event.preventDefault();
	
	//edit stats for class here
	
	//initStats();
	
	
		classChoice=3;
		/*allPlayers[lockActive].hasClass=true;

		allPlayers[lockActive].totalAC=12;
		allPlayers[lockActive].armorAC=0;
		allPlayers[lockActive].otherAC=0;
		allPlayers[lockActive].speed=12;
		allPlayers[lockActive].luck=0;
		allPlayers[lockActive].hpMax=0;
		allPlayers[lockActive].hpCurr=0;
		allPlayers[lockActive].energyCurr=0;
		allPlayers[lockActive].energyMax=0;
		allPlayers[lockActive].strength=0;
		allPlayers[lockActive].dexterity=0;
		allPlayers[lockActive].intelligence=0;
		allPlayers[lockActive].wisdom=0;
		allPlayers[lockActive].constitution=0;	//initialize*/
		
		

		
});

// Link to open the dialog
$( "#chooseMonkBut" ).click(function( event ) {
	$("#classDialog").dialog("close");
	document.getElementById("chooseHumanBut").style.visibility = "visible";
	document.getElementById("chooseDwarfBut").style.visibility = "visible";
	document.getElementById("chooseOrcBut").style.visibility = "visible";
	document.getElementById("chooseElfBut").style.visibility = "hidden";
	$( "#raceDialog" ).dialog( "open" );
	event.preventDefault();
	
	//edit stats for class here
	
	//initStats();
	
	
	
		classChoice=4;
		/*allPlayers[lockActive].hasClass=true;

		allPlayers[lockActive].totalAC=12;
		allPlayers[lockActive].armorAC=0;
		allPlayers[lockActive].otherAC=0;
		allPlayers[lockActive].speed=12;
		allPlayers[lockActive].luck=0;
		allPlayers[lockActive].hpMax=0;
		allPlayers[lockActive].hpCurr=0;
		allPlayers[lockActive].energyCurr=0;
		allPlayers[lockActive].energyMax=0;
		allPlayers[lockActive].strength=0;
		allPlayers[lockActive].dexterity=0;
		allPlayers[lockActive].intelligence=0;
		allPlayers[lockActive].wisdom=0;
		allPlayers[lockActive].constitution=0;	//initialize*/
		
});

// Link to open the dialog
$( "#chooseSnipBut" ).click(function( event ) {
	$("#classDialog").dialog("close");
	document.getElementById("chooseHumanBut").style.visibility = "visible";
	document.getElementById("chooseDwarfBut").style.visibility = "visible";
	document.getElementById("chooseOrcBut").style.visibility = "visible";
	document.getElementById("chooseElfBut").style.visibility = "visible";
	$( "#raceDialog" ).dialog( "open" );
	event.preventDefault();
	
	//edit stats for class here
	
	
	
		classChoice=5;
		/*allPlayers[lockActive].hasClass=true;

		allPlayers[lockActive].totalAC=12;
		allPlayers[lockActive].speed=12;
		allPlayers[lockActive].luck=0;
		allPlayers[lockActive].hpMax=0;
		allPlayers[lockActive].hpCurr=0;
		allPlayers[lockActive].energyCurr=0;
		allPlayers[lockActive].energyMax=0;
		allPlayers[lockActive].strength=0;
		allPlayers[lockActive].dexterity=0;
		allPlayers[lockActive].intelligence=0;
		allPlayers[lockActive].wisdom=0;
		allPlayers[lockActive].constitution=0;	//initialize*/
		
		
		
});

// Link to open the dialog
$( "#chooseMyrmBut" ).click(function( event ) {
	$("#classDialog").dialog("close");
	document.getElementById("chooseHumanBut").style.visibility = "visible";
	document.getElementById("chooseDwarfBut").style.visibility = "hidden";
	document.getElementById("chooseOrcBut").style.visibility = "visible";
	document.getElementById("chooseElfBut").style.visibility = "visible";
	$( "#raceDialog" ).dialog( "open" );
	event.preventDefault();
	
	//edit stats for class here
	
	
		classChoice=6;
		/*allPlayers[lockActive].hasClass=true;

		allPlayers[lockActive].totalAC=12;
		allPlayers[lockActive].speed=12;
		allPlayers[lockActive].luck=0;
		allPlayers[lockActive].hpMax=0;
		allPlayers[lockActive].hpCurr=0;
		allPlayers[lockActive].energyCurr=0;
		allPlayers[lockActive].energyMax=0;
		allPlayers[lockActive].strength=0;
		allPlayers[lockActive].dexterity=0;
		allPlayers[lockActive].intelligence=0;
		allPlayers[lockActive].wisdom=0;
		allPlayers[lockActive].constitution=0;	//initialize*/
		
		
});

// Link to open the dialog
$( "#chooseSabBut" ).click(function( event ) {
	$("#classDialog").dialog("close");
	document.getElementById("chooseHumanBut").style.visibility = "visible";
	document.getElementById("chooseDwarfBut").style.visibility = "hidden";
	document.getElementById("chooseOrcBut").style.visibility = "visible";
	document.getElementById("chooseElfBut").style.visibility = "visible";
	$( "#raceDialog" ).dialog( "open" );
	event.preventDefault();
	
	//edit stats for class here
	
	
		classChoice=7;
		/*allPlayers[lockActive].hasClass=true;

		allPlayers[lockActive].totalAC=12;
		allPlayers[lockActive].speed=12;
		allPlayers[lockActive].luck=0;
		allPlayers[lockActive].hpMax=0;
		allPlayers[lockActive].hpCurr=0;
		allPlayers[lockActive].energyCurr=0;
		allPlayers[lockActive].energyMax=0;
		allPlayers[lockActive].strength=0;
		allPlayers[lockActive].dexterity=0;
		allPlayers[lockActive].intelligence=0;
		allPlayers[lockActive].wisdom=0;
		allPlayers[lockActive].constitution=0;	//initialize*/
		
});

// Link to open the dialog
$( "#chooseOccBut" ).click(function( event ) {
	$("#classDialog").dialog("close");
	document.getElementById("chooseHumanBut").style.visibility = "visible";
	document.getElementById("chooseDwarfBut").style.visibility = "hidden";
	document.getElementById("chooseOrcBut").style.visibility = "visible";
	document.getElementById("chooseElfBut").style.visibility = "hidden";
	$( "#raceDialog" ).dialog( "open" );
	event.preventDefault();
	
	//edit stats for class here
	
	
		classChoice=8;
		/*allPlayers[lockActive].hasClass=true;

		allPlayers[lockActive].totalAC=12;
		allPlayers[lockActive].speed=12;
		allPlayers[lockActive].luck=0;
		allPlayers[lockActive].hpMax=0;
		allPlayers[lockActive].hpCurr=0;
		allPlayers[lockActive].energyCurr=0;
		allPlayers[lockActive].energyMax=0;
		allPlayers[lockActive].strength=0;
		allPlayers[lockActive].dexterity=0;
		allPlayers[lockActive].intelligence=0;
		allPlayers[lockActive].wisdom=0;
		allPlayers[lockActive].constitution=0;	//initialize*/
		
			
		
});

// Link to open the dialog
$( "#chooseBasBut" ).click(function( event ) {
	$("#classDialog").dialog("close");
	document.getElementById("chooseHumanBut").style.visibility = "visible";
	document.getElementById("chooseDwarfBut").style.visibility = "visible";
	document.getElementById("chooseOrcBut").style.visibility = "hidden";
	document.getElementById("chooseElfBut").style.visibility = "hidden";
	$( "#raceDialog" ).dialog( "open" );
	event.preventDefault();
	
	//edit stats for class here
	
	
		classChoice=9;
		/*allPlayers[lockActive].hasClass=true;

		allPlayers[lockActive].totalAC=12;
		allPlayers[lockActive].speed=12;
		allPlayers[lockActive].luck=0;
		allPlayers[lockActive].hpMax=0;
		allPlayers[lockActive].hpCurr=0;
		allPlayers[lockActive].energyCurr=0;
		allPlayers[lockActive].energyMax=0;
		allPlayers[lockActive].strength=0;
		allPlayers[lockActive].dexterity=0;
		allPlayers[lockActive].intelligence=0;
		allPlayers[lockActive].wisdom=0;
		allPlayers[lockActive].constitution=0;	//initialize*/
		
		
});

// Link to open the dialog
$( "#chooseTriBut" ).click(function( event ) {
	$("#classDialog").dialog("close");
	document.getElementById("chooseHumanBut").style.visibility = "visible";
	document.getElementById("chooseDwarfBut").style.visibility = "visible";
	document.getElementById("chooseOrcBut").style.visibility = "visible";
	document.getElementById("chooseElfBut").style.visibility = "hidden";
	$( "#raceDialog" ).dialog( "open" );
	event.preventDefault();
	
	//edit stats for class here
	
	
		classChoice=10;
		/*allPlayers[lockActive].hasClass=true;

		allPlayers[lockActive].totalAC=12;
		allPlayers[lockActive].speed=12;
		allPlayers[lockActive].luck=0;
		allPlayers[lockActive].hpMax=0;
		allPlayers[lockActive].hpCurr=0;
		allPlayers[lockActive].energyCurr=0;
		allPlayers[lockActive].energyMax=0;
		allPlayers[lockActive].strength=0;
		allPlayers[lockActive].dexterity=0;
		allPlayers[lockActive].intelligence=0;
		allPlayers[lockActive].wisdom=0;
		allPlayers[lockActive].constitution=0;	//initialize*/
		
		
		
});

// Link to open the dialog
$( "#chooseSymBut" ).click(function( event ) {
	$("#classDialog").dialog("close");
	document.getElementById("chooseHumanBut").style.visibility = "visible";
	document.getElementById("chooseDwarfBut").style.visibility = "hidden";
	document.getElementById("chooseOrcBut").style.visibility = "hidden";
	document.getElementById("chooseElfBut").style.visibility = "visible";
	$( "#raceDialog" ).dialog( "open" );
	event.preventDefault();
	
	//edit stats for class here
	
	
		classChoice=11;
		/*allPlayers[lockActive].hasClass=true;

		allPlayers[lockActive].totalAC=12;
		allPlayers[lockActive].speed=12;
		allPlayers[lockActive].luck=0;
		allPlayers[lockActive].hpMax=0;
		allPlayers[lockActive].hpCurr=0;
		allPlayers[lockActive].energyCurr=0;
		allPlayers[lockActive].energyMax=0;
		allPlayers[lockActive].strength=0;
		allPlayers[lockActive].dexterity=0;
		allPlayers[lockActive].intelligence=0;
		allPlayers[lockActive].wisdom=0;
		allPlayers[lockActive].constitution=0;	//initialize*/
		
		
		
});

$( "#chooseHumanBut" ).click(function( event ) {
	
	$("#raceDialog").dialog("close");
	event.preventDefault();
	
	initStats();
	
	//edit stats for race here
	
	allPlayers[lockActive].race=0;
	
	allPlayers[lockActive].hasTitle=true;
	
	createCharacterStats();	

	
	//update display
	
	if(lockActive==whoIsActive) 
		{
	
			updatePlayer();
		}
		
});

$( "#chooseDwarfBut" ).click(function( event ) {

	//can't be wizard, rogue, sab, myrm, occ, or sym
	if (classChoice==0 
	|| classChoice==2 
	|| classChoice==4 
	|| classChoice==5 
	|| classChoice==9 
	|| classChoice==10)
	{

		$("#raceDialog").dialog("close");
		event.preventDefault();
		
		initStats();

		//edit stats for race here

		allPlayers[lockActive].race=1;
		
		allPlayers[lockActive].hasTitle=true;
		
		createCharacterStats();
		
		
		//update display 
		
		if(lockActive==whoIsActive) 
		{
	
			updatePlayer();
		}
	
	}
	
	else {
		
		$('#classInvalid').text("Invalid");
	}
		
});

$( "#chooseOrcBut" ).click(function( event ) {

	//can't be wiz, heal, bas, sym
	if (classChoice==0 
	|| classChoice==3 
	|| classChoice==4 
	|| classChoice==5 
	|| classChoice==6 
	|| classChoice==7 
	|| classChoice==8 
	|| classChoice==10)
	{

		$("#raceDialog").dialog("close");
		event.preventDefault();
		
		initStats();

		//edit stats for race here

		allPlayers[lockActive].race=2;
		
		allPlayers[lockActive].hasTitle=true;
		
		createCharacterStats();
		
		
		//update display
	
		if(lockActive==whoIsActive) 
		{
	
			updatePlayer();
		}
	
	}
	
	else {
		
		$('#classInvalid').text("Invalid");
	}
		
});

$( "#chooseElfBut" ).click(function( event ) {

	//can't be high, monk, occ, bas, or tri
	if (classChoice==1 
	|| classChoice==2 
	|| classChoice==3 
	|| classChoice==5 
	|| classChoice==6
	|| classChoice==7	
	|| classChoice==11)
	{

		$("#raceDialog").dialog("close");
		event.preventDefault();
		
		initStats();

		//edit stats for race here

		allPlayers[lockActive].race=3;
		
		allPlayers[lockActive].hasTitle=true;
		
		createCharacterStats();

		
		//update display
	
		if(lockActive==whoIsActive) 
		{
	
			updatePlayer();
		}
	
	}
	
	else {
		
		$('#classInvalid').text("Invalid");
	}
		
});

$( "#datepicker" ).datepicker({
	inline: true
});



$( "#slider" ).slider({
	range: true,
	values: [ 17, 67 ]
});



$( "#progressbar" ).progressbar({
	value: 20
});



$( "#spinner" ).spinner();


$( "#playerEquip" ).menu();
$( "#playerInventory" ).menu();



$( "#tooltip" ).tooltip();



$( "#selectmenu" ).selectmenu();


// Hover states on the static widgets
$( "#dialog-link, #icons li" ).hover(
	function() {
		$( this ).addClass( "ui-state-hover" );
	},
	function() {
		$( this ).removeClass( "ui-state-hover" );
	}
);

window.onkeyup = function(e) {
   var key = e.keyCode;

   if (key == 90) {

		
   
		//dont increment unless there are players, assuming at least 1
		if (allPlayers[0].playerExists==true) {
		
			var tempStyle="Turn: ";
			var notifs="";
		
			turn++;
			
			notifs=turnInc(notifs);
			
			tempStyle+=turn;
			
			$("#turnCount").html(tempStyle);
			
			//calculate hunger, speed, ailments, passives, hp/energy gain here
			
			//set up notifications
			for (i=0;i<playersMax;i++) {
			
				if (allPlayers[i].playerExists==true) {
			
				
					//alert if more/less actions this turn
					if (allPlayers[i].actions!=1) {
					
						notifs+=allPlayers[i].playerName + " has " + allPlayers[i].actions + " actions this turn\n";
					}
					
					//alert if hunger changes this turn
					if (allPlayers[i].hunger<=99 && allPlayers[i].prevHunger>99) {
					
						notifs+=allPlayers[i].playerName + " is Hungry\n";
					}
					
					if (allPlayers[i].hunger<=24 && allPlayers[i].prevHunger>24) {
					
						notifs+=allPlayers[i].playerName + " is Weak from hunger\n";
					}
					
					if (allPlayers[i].hunger<=0 && allPlayers[i].playClass==0 && allPlayers[i].prevHunger>0) {
					
						notifs+=allPlayers[i].playerName + " is below minimum hunger\n";
						//make enfeebled here
						//allPlayers[i].playerPassives
					}
					
					if (allPlayers[i].hunger<=0 && allPlayers[i].playClass!=0 && allPlayers[i].prevHunger>0) {
					
						notifs+=allPlayers[i].playerName + " has died from starvation\n";
					}
					
				
				}//if player exists
			
				
			
			} //for # of players
			
			
			//notifs for monsters
			for (i=0;i<allRooms[currRoomIndex].roomMonsters.length;i++) {
			
				if (allRooms[currRoomIndex].roomMonsters[i].monsterExists==true) {
			
				
					//alert if more/less actions this turn
					if (allRooms[currRoomIndex].roomMonsters[i].actions!=1) {
					
						notifs+=allRooms[currRoomIndex].roomMonsters[i].monstName + " has " + allRooms[currRoomIndex].roomMonsters[i].actions + " actions this turn\n";
					}
				
				}
			
			}
			
			//test
			//notifs="asdf\nasdf\nasdf";
			
			if (notifs!="") {
				
				
				alert(notifs);
				notifs="";
				
			}
			
			updatePlayer();
			updateMonst();
			
	    } //at least one player (aka playing game)
	   
	   
   
   } //key iz z
}

function turnInc(notifs) {

	var tempStyle;

	for (i=0;i<playersMax;i++) {
	
		if (allPlayers[i].playerExists==true) {
		
			//ailments

			if (allPlayers[i].playerPassives.slow>0) {
			
				allPlayers[i].playerPassives.slow--;
				
				if (allPlayers[i].playerPassives.slow==0) {
				
					notifs+=allPlayers[i].playerName + " is no longer slowed\n";
				}
			
			}
			
			if (allPlayers[i].playerPassives.blind>0) {
			
				allPlayers[i].playerPassives.blind--;
				
				if (allPlayers[i].playerPassives.blind==0) {
				
					notifs+=allPlayers[i].playerName + " is no longer blind\n";
				}
			
			}
			
			if (allPlayers[i].playerPassives.sleep>0) {
			
				allPlayers[i].playerPassives.sleep--;
				
				if (allPlayers[i].playerPassives.sleep==0) {
				
					notifs+=allPlayers[i].playerName + " is no longer asleep\n";
				}
			
			}
			
			if (allPlayers[i].playerPassives.poisoned>0) {
			
				allPlayers[i].playerPassives.poisoned--;
				
				if (allPlayers[i].playerPassives.poisoned>0) {
				
					let poisonRoll=rollDie(2,1);
					
					allPlayers[i].hpCurr-=poisonRoll;
					
					notifs+=allPlayers[i].playerName + " takes " + poisonRoll + " damage from poison\n";
				
				}
				
				if (allPlayers[i].playerPassives.poisoned==0) {
				
					notifs+=allPlayers[i].playerName + " is no longer poisoned\n";
				}
			
			}
			
			if (allPlayers[i].playerPassives.confused>0) {
			
				allPlayers[i].playerPassives.confused--;
				
				if (allPlayers[i].playerPassives.confused==0) {
				
					notifs+=allPlayers[i].playerName + " is no longer confused\n";
				}
			
			}
			
			if (allPlayers[i].playerPassives.taunted>0) {
			
				allPlayers[i].playerPassives.taunted--;
				
				if (allPlayers[i].playerPassives.taunted==0) {
				
					notifs+=allPlayers[i].playerName + " is no longer taunted\n";
				}
			
			}
			
			if (allPlayers[i].playerPassives.paralyzed>0) {
			
				allPlayers[i].playerPassives.paralyzed--;
				
				if (allPlayers[i].playerPassives.paralyzed==0) {
				
					notifs+=allPlayers[i].playerName + " is no longer paralyzed\n";
				}
			
			}
			
			if (allPlayers[i].playerPassives.hallucin>0) {
			
				allPlayers[i].playerPassives.hallucin--;
				
				if (allPlayers[i].playerPassives.hallucin==0) {
				
					notifs+=allPlayers[i].playerName + " is no longer hallucinating\n";
				}
			
			}

			
			//hunger
		
			allPlayers[i].prevHunger=allPlayers[i].hunger;
		
			//conditionals here
		
			//allPlayers[i].hunger--;
				
			if (allPlayers[i].wearRing==1)
			allPlayers[i].hunger--;

			if (allPlayers[i].wearAmul==1)
			allPlayers[i].hunger--;

			if (allPlayers[i].playerPassives.isHungry==true && (turn%2)==1)
			allPlayers[i].hunger--;

			if (allPlayers[i].playerPassives.regen==true && (turn%2)==1)
			allPlayers[i].hunger--;

			if (allPlayers[i].playClass==0)
			allPlayers[i].hunger--;

			if (allPlayers[i].playClass==11 && (turn%2)==1)
			allPlayers[i].hunger--;

			if (allPlayers[i].playerPassives.energyRegen==true && (turn%2)==1)
			allPlayers[i].hunger--;

			if (allPlayers[i].encumbrance>1 && (turn%2)==1)
			allPlayers[i].hunger--;

			if (allPlayers[i].playerPassives.slowDigest==false)
			allPlayers[i].hunger--;

			if (allPlayers[i].playerPassives.slowDigest==true && (turn%3)==0)
			allPlayers[i].hunger--;
			
			tempStyle = "Hunger: " + allPlayers[whoIsActive].hunger;
			$('#playerHunger').html(tempStyle);
			
			
			//prayer
			
			if (allPlayers[i].prayTime>0) {
			
				allPlayers[i].prayTime--;
				
			}
			
			
			//speed
			
			var temp=i;
			temp++;
			//console.log("Player " + temp + " speed = " + allPlayers[i].speed);

			
			let tempRoll=0;
			let tempChance=0;
			
			if (allPlayers[i].speed>=24) {
				allPlayers[i].speed-=24;
			}
			
			else if (allPlayers[i].speed>=12) {
				allPlayers[i].speed-=12;
			}
			
			

			//else
			
		
			if (allPlayers[i].playerPassives.tempBrisk<1 && allPlayers[i].playerPassives.tempHaste<1) //no temp buffs
			{	
		
					if (allPlayers[i].playerPassives.brisk==true && allPlayers[i].playerPassives.haste==false)
					{
						allPlayers[i].speed+=14;

						tempRoll=rollDie(3,1);

						if(tempRoll==1)
						allPlayers[i].speed+=4;

					
					}


					if (allPlayers[i].playerPassives.haste==true)
					{
						allPlayers[i].speed+=18;

						tempRoll=rollDie(3,1);

						if(tempRoll==1)
						allPlayers[i].speed+=6;

					
					}

			} //no temp

			if (allPlayers[i].playerPassives.tempBrisk>0 || allPlayers[i].playerPassives.tempHaste>0) //has temp buffs
			{
				if (allPlayers[i].playerPassives.tempBrisk>0 && allPlayers[i].playerPassives.tempHaste<1)
				{
					allPlayers[i].speed+=14;

					tempRoll=rollDie(3,1);

					if(tempRoll==1)
					allPlayers[i].speed+=4;

				
				}


				if (allPlayers[i].playerPassives.tempHaste>0)
				{
					allPlayers[i].speed+=18;

					tempRoll=rollDie(3,1);

					if(tempRoll==1)
					allPlayers[i].speed+=6;

				
				}
				
			} //temp buffs

			
			//slow
			if (allPlayers[i].playerPassives.slow>0 || allPlayers[i].playerPassives.permSlow==true)
			{
				allPlayers[i].speed+=9;
				tempChance=rollDie(3,1);
				tempRoll=rollDie(2,1);				
				
				if (tempChance==1)
				allPlayers[i].speed+=tempRoll;

				if (tempChance==2)
				allPlayers[i].speed-=tempRoll;
			}



			if (allPlayers[i].playerPassives.slow==0 && allPlayers[i].playerPassives.permSlow==false && allPlayers[i].playerPassives.haste!=true && allPlayers[i].playerPassives.brisk!=true && allPlayers[i].playerPassives.tempBrisk==0 && allPlayers[i].playerPassives.tempHaste==0) //not fast or slow
			{
				allPlayers[i].speed+=12;
			}
			
			
			//determine # of actions
			if (allPlayers[i].speed>=12 && allPlayers[i].speed<24){
				allPlayers[i].actions=1;
			}
			if (allPlayers[i].speed>=24){
				allPlayers[i].actions=2;
			}
			
			if (allPlayers[i].speed<12){
			
				allPlayers[i].actions=0;
			}
			
			
			//hp regen
			
			//console.log(i);
	
				if (allPlayers[i].hpCurr<allPlayers[i].hpMax)
				{
					if (allPlayers[i].playClass>0)
					{
						if (turn==(allPlayers[i].hpClock+10)){
						allPlayers[i].hpCurr+=2;
						notifs+=allPlayers[i].playerName+" has healed 2 HP\n";
						//console.log(notifs);
						if (allPlayers[i].hpCurr>allPlayers[i].hpMax) //if maxed
						{
							allPlayers[i].hpCurr=allPlayers[i].hpMax;
							allPlayers[i].newHpClock=true;
						}
						allPlayers[i].hpClock=turn;
						}
					}

					if (allPlayers[i].playClass==0)
					{
						let gainHpRoll=rollDie(2,1,3);
					
						if (turn==(allPlayers[i].hpClock+10)){
						allPlayers[i].hpCurr+=gainHpRoll;
						notifs+=allPlayers[i].playerName+" has healed " + gainHpRoll + " HP\n";
						//console.log(notifs);
							if (allPlayers[i].hpCurr>allPlayers[i].hpMax) //if maxed
							{
								allPlayers[i].hpCurr=allPlayers[i].hpMax;
								allPlayers[i].newHpClock=true;
							}
						allPlayers[i].hpClock=turn;
						}
					}
					
					if (allPlayers[i].playerPassives.regen==true)
					{
						allPlayers[i].hpCurr++;
						notifs+=allPlayers[i].playerName+" has healed 1 HP from Regeneration\n";
						if (allPlayers[i].hpCurr>allPlayers[i].hpMax) //if maxed
						{
							allPlayers[i].hpCurr=allPlayers[i].hpMax;
							allPlayers[i].newHpClock=true;
						}
					}
					
				}


			
			
			//energy regen


				let energyGain=0;
	
				if (allPlayers[i].energyCurr<allPlayers[i].energyMax)
				{
					if (allPlayers[i].playerPassives.energyRegen==true) //confluence
					{
						allPlayers[i].energyCurr++;
						notifs+=allPlayers[i].playerName+" has recovered 1 Energy from Confluence\n";
						if (allPlayers[i].energyCurr>=allPlayers[i].energyMax) //when maxed
						{
							allPlayers[i].energyCurr=allPlayers[i].energyMax;
							allPlayers[i].newEnergyClock=true;
						}
					}
					
					if (allPlayers[i].playClass!=1 && allPlayers[i].playClass!=10) //non wizard, non triarius, non healer
					{
						if (turn==(allPlayers[i].energyClock+5))
						{
							if (allPlayers[i].wisdom>11 && allPlayers[i].wisdom<16) //12-15
							{
								energyGain+=1;
								if (allPlayers[i].energyCurr>allPlayers[i].energyMax) //when maxed
								{
									allPlayers[i].energyCurr=allPlayers[i].energyMax;
									allPlayers[i].newEnergyClock=true;
								}
								allPlayers[i].energyClock=turn;
							}
			
							if (allPlayers[i].wisdom>15 && allPlayers[i].wisdom<19) //16-18
							{
								energyGain+=2;
								if (allPlayers[i].energyCurr>allPlayers[i].energyMax) //when maxed
								{
									allPlayers[i].energyCurr=allPlayers[i].energyMax;
									allPlayers[i].newEnergyClock=true;
								}
								allPlayers[i].energyClock=turn;
							}
			
							if (allPlayers[i].wisdom>18 && allPlayers[i].wisdom<21) //19-20
							{
								energyGain+=3;
								if (allPlayers[i].energyCurr>allPlayers[i].energyMax) //when maxed
								{
									allPlayers[i].energyCurr=allPlayers[i].energyMax;
									allPlayers[i].newEnergyClock=true;
								}
								allPlayers[i].energyClock=turn;
							}

							if (allPlayers[i].wisdom>20) //21+
							{
								energyGain+=4;
								if (allPlayers[i].energyCurr>allPlayers[i].energyMax) //when maxed
								{
									allPlayers[i].energyCurr=allPlayers[i].energyMax;
									allPlayers[i].newEnergyClock=true;
								}
								allPlayers[i].energyClock=turn;
							}
							
							energyGain+=2;

							if (allPlayers[i].playClass==2) //healer
							energyGain+=2
							
							allPlayers[i].energyCurr+=energyGain;
							
							notifs+=allPlayers[i].playerName+" has recovered " + energyGain + " energy\n";
							if (allPlayers[i].energyCurr>allPlayers[i].energyMax) //when maxed
							{
								allPlayers[i].energyCurr=allPlayers[i].energyMax;
								allPlayers[i].newEnergyClock=true;
							}
							allPlayers[i].energyClock=turn;
						}
					}

					if (allPlayers[i].playClass==1) //wizard
					{
						if (turn==(allPlayers[i].energyClock+3))
						{
							if (allPlayers[i].wisdom>11 && allPlayers[i].wisdom<16) //12-15
							{
								energyGain+=1;
								if (allPlayers[i].energyCurr>allPlayers[i].energyMax) //when maxed
								{
									allPlayers[i].energyCurr=allPlayers[i].energyMax;
									allPlayers[i].newEnergyClock=true;
								}
								allPlayers[i].energyClock=turn;
							}
			
							if (allPlayers[i].wisdom>15 && allPlayers[i].wisdom<19) //16-18
							{
								energyGain+=2;
								if (allPlayers[i].energyCurr>allPlayers[i].energyMax) //when maxed
								{
									allPlayers[i].energyCurr=allPlayers[i].energyMax;
									allPlayers[i].newEnergyClock=true;
								}
								allPlayers[i].energyClock=turn;
							}
			
							if (allPlayers[i].wisdom>18 && allPlayers[i].wisdom<21) //19-20
							{
								energyGain+=3;
								if (allPlayers[i].energyCurr>allPlayers[i].energyMax) //when maxed
								{
									allPlayers[i].energyCurr=allPlayers[i].energyMax;
									allPlayers[i].newEnergyClock=true;
								}
								allPlayers[i].energyClock=turn;
							}

							if (allPlayers[i].wisdom>20) //21+
							{
								energyGain+=4;
								if (allPlayers[i].energyCurr>allPlayers[i].energyMax) //when maxed
								{
									allPlayers[i].energyCurr=allPlayers[i].energyMax;
									allPlayers[i].newEnergyClock=true;
								}
								allPlayers[i].energyClock=turn;
							}

							energyGain+=2;
							allPlayers[i].energyCurr+=energyGain;
							notifs+=allPlayers[i].playerName+" has recovered " + energyGain + " energy\n";
							if (allPlayers[i].energyCurr>allPlayers[i].energyMax) //when maxed
							{
								allPlayers[i].energyCurr=allPlayers[i].energyMax;
								allPlayers[i].newEnergyClock=true;
							}
							allPlayers[i].energyClock=turn;
						}
					}

					if (allPlayers[i].playClass==10) //triarus
					{
						if (turn==(allPlayers[i].energyClock+7))
						{
							if (allPlayers[i].wisdom>11 && allPlayers[i].wisdom<16) //12-15
							{
								energyGain+=1;
								if (allPlayers[i].energyCurr>allPlayers[i].energyMax) //when maxed
								{
									allPlayers[i].energyCurr=allPlayers[i].energyMax;
									allPlayers[i].newEnergyClock=true;
								}
								allPlayers[i].energyClock=turn;
							}
			
							if (allPlayers[i].wisdom>15 && allPlayers[i].wisdom<19) //16-18
							{
								energyGain+=2;
								if (allPlayers[i].energyCurr>allPlayers[i].energyMax) //when maxed
								{
									allPlayers[i].energyCurr=allPlayers[i].energyMax;
									allPlayers[i].newEnergyClock=true;
								}
								allPlayers[i].energyClock=turn;
							}
			
							if (allPlayers[i].wisdom>18 && allPlayers[i].wisdom<21) //19-20
							{
								energyGain+=3;
								if (allPlayers[i].energyCurr>allPlayers[i].energyMax) //when maxed
								{
									allPlayers[i].energyCurr=allPlayers[i].energyMax;
									allPlayers[i].newEnergyClock=true;
								}
								allPlayers[i].energyClock=turn;
							}

							if (allPlayers[i].wisdom>20) //21+
							{
								energyGain+=4;
								if (allPlayers[i].energyCurr>allPlayers[i].energyMax) //when maxed
								{
									allPlayers[i].energyCurr=allPlayers[i].energyMax;
									allPlayers[i].newEnergyClock=true;
								}
								allPlayers[i].energyClock=turn;
							}

							energyGain+=2;
							allPlayers[i].energyCurr+=energyGain;
							notifs+=allPlayers[i].playerName+" has recovered " + energyGain + " energy\n";
							if (allPlayers[i].energyCurr>allPlayers[i].energyMax) //when maxed
							{
								allPlayers[i].energyCurr=allPlayers[i].energyMax;
								allPlayers[i].newEnergyClock=true;
							}
							allPlayers[i].energyClock=turn;
						}
					}
									
				}
			
			
		} //exists
	
	//console.log("Player " + temp + " speed = " + allPlayers[i].speed);
	
	} //for players
	
	
	updatePlayer();
	
	
	//monsters
	for (i=0;i<allRooms[currRoomIndex].roomMonsters.length;i++) {
	
		allRooms[currRoomIndex].roomMonsters[i].moved=false;
		
		if (allRooms[currRoomIndex].roomMonsters[i].speed>=24) {
			allRooms[currRoomIndex].roomMonsters[i].speed-=24;
		}
		
		else if (allRooms[currRoomIndex].roomMonsters[i].speed>=12) {
			allRooms[currRoomIndex].roomMonsters[i].speed-=12;
		}
		
		let monstSpeedRoll=rollDie(4,1,-2);
		
		allRooms[currRoomIndex].roomMonsters[i].speed+=12;
		allRooms[currRoomIndex].roomMonsters[i].speed+=allRooms[currRoomIndex].roomMonsters[i].speedBonus;
		allRooms[currRoomIndex].roomMonsters[i].speed+=monstSpeedRoll;
		
		
		//determine # of actions
		if (allRooms[currRoomIndex].roomMonsters[i].speed>=12 && allRooms[currRoomIndex].roomMonsters[i].speed<24){
			allRooms[currRoomIndex].roomMonsters[i].actions=1;
		}
		if (allRooms[currRoomIndex].roomMonsters[i].speed>=24){
			allRooms[currRoomIndex].roomMonsters[i].actions=2;
		}
		
		if (allRooms[currRoomIndex].roomMonsters[i].speed<12){
		
			allRooms[currRoomIndex].roomMonsters[i].actions=0;
		}
	
	} //for monsters
	
	updateMonst;
	
	
	for (i=0;i<allRooms[currRoomIndex].roomItems.length;i++) {
	
		if (allRooms[currRoomIndex].roomItems[i].corpseTurns>=0) {
		
			allRooms[currRoomIndex].roomItems[i].corpseTurns++;
		}
		
		if (allRooms[currRoomIndex].roomItems[i].corpseTurns>=12) {
		
			notifs+=allRooms[currRoomIndex].roomItems[i].itemName +" has gone rotten";
		}
	}
	
	updateItem();
	
	return notifs;
}

function initStats() {

	allPlayers[lockActive].hasClass=false;
	allPlayers[lockActive].totalAC=12;
	allPlayers[lockActive].armorAC=0;
	allPlayers[lockActive].otherAC=0;
	allPlayers[lockActive].speed=12;
	allPlayers[lockActive].luck=0;
	allPlayers[lockActive].hpMax=0;
	allPlayers[lockActive].hpCurr=0;
	allPlayers[lockActive].energyCurr=0;
	allPlayers[lockActive].energyMax=0;
	allPlayers[lockActive].strength=0;
	allPlayers[lockActive].dexterity=0;
	allPlayers[lockActive].intelligence=0;
	allPlayers[lockActive].wisdom=0;
	allPlayers[lockActive].constitution=0;
	
	//allPlayers[lockActive].speed=0;
	allPlayers[lockActive].actions=0;
	allPlayers[lockActive].weightCurr=0;
	allPlayers[lockActive].weightMax=0;
	allPlayers[lockActive].hunger=0;
	
	allPlayers[lockActive].daggerProf = 0;
	allPlayers[lockActive].axeProf = 0;
	allPlayers[lockActive].swordProf = 0;
	allPlayers[lockActive].bludgeonProf = 0;
	allPlayers[lockActive].staffProf = 0;
	allPlayers[lockActive].spearProf = 0;
	allPlayers[lockActive].polearmProf = 0;
	allPlayers[lockActive].bowProf = 0;
	allPlayers[lockActive].martialProf = 0;
	allPlayers[lockActive].barehandProf = 0;
	allPlayers[lockActive].augmentProf = 0;
	allPlayers[lockActive].mobilityProf = 0;

	allPlayers[lockActive].attackSpellProf = 0;
	allPlayers[lockActive].matterSpellProf = 0;
	allPlayers[lockActive].divinationSpellProf = 0;
	allPlayers[lockActive].clericalSpellProf = 0;
	allPlayers[lockActive].enchantmentSpellProf = 0;
	allPlayers[lockActive].healingSpellProf = 0;

	//bar progress
	allPlayers[lockActive].daggerBar = 0;
	allPlayers[lockActive].axeBar = 0;
	allPlayers[lockActive].swordBar = 0;
	allPlayers[lockActive].bludgeonBar = 0;
	allPlayers[lockActive].staffBar = 0;
	allPlayers[lockActive].spearBar = 0;
	allPlayers[lockActive].polearmBar = 0;
	allPlayers[lockActive].bowBar = 0;
	allPlayers[lockActive].martialBar = 0;
	allPlayers[lockActive].barehandBar = 0;
	allPlayers[lockActive].augmentBar = 0;
	allPlayers[lockActive].mobilityBar = 0;

	allPlayers[lockActive].attackSpellBar = 0;
	allPlayers[lockActive].matterSpellBar = 0;
	allPlayers[lockActive].divinationSpellBar = 0;
	allPlayers[lockActive].clericalSpellBar = 0;
	allPlayers[lockActive].enchantmentSpellBar = 0;
	allPlayers[lockActive].healingSpellBar = 0;

	allPlayers[lockActive].daggerLev = 0;
	allPlayers[lockActive].axeLev = 0;
	allPlayers[lockActive].swordLev = 0;
	allPlayers[lockActive].bludgeonLev = 0;
	allPlayers[lockActive].staffLev = 0;
	allPlayers[lockActive].spearLev = 0;
	allPlayers[lockActive].polearmLev = 0;
	allPlayers[lockActive].bowLev = 0;
	allPlayers[lockActive].martialLev = 0;
	allPlayers[lockActive].barehandLev = 0;
	allPlayers[lockActive].augmentLev = 0;
	allPlayers[lockActive].mobilityLev = 0;

	allPlayers[lockActive].attackSpellLev = 0;
	allPlayers[lockActive].matterSpellLev = 0;
	allPlayers[lockActive].divinationSpellLev = 0;
	allPlayers[lockActive].clericalSpellLev = 0;
	allPlayers[lockActive].enchantmentSpellLev = 0;
	allPlayers[lockActive].healingSpellLev = 0;
	
	
	//passives
	allPlayers[lockActive].playerPassives.breathless =false;
	allPlayers[lockActive].playerPassives.searching =false;
	allPlayers[lockActive].playerPassives.seeInvis =false;
	allPlayers[lockActive].playerPassives.invis =false;
	allPlayers[lockActive].playerPassives.levitate =false;
	allPlayers[lockActive].playerPassives.flying =false;
	allPlayers[lockActive].playerPassives.adornment =false;
	allPlayers[lockActive].playerPassives.warning =false;
	allPlayers[lockActive].playerPassives.telepathy =false;
	allPlayers[lockActive].playerPassives.foodApp =false;
	allPlayers[lockActive].playerPassives.reflection =false;
	allPlayers[lockActive].playerPassives.magicResist =false;
	allPlayers[lockActive].playerPassives.waterWalking =false;
	allPlayers[lockActive].playerPassives.displacement =false;
	allPlayers[lockActive].playerPassives.sustainAbility =false;
	allPlayers[lockActive].playerPassives.slowDigest =false;
	allPlayers[lockActive].playerPassives.lifeSaving =false;
	allPlayers[lockActive].playerPassives.stealth =false;
	allPlayers[lockActive].playerPassives.confuseResist =false;


	allPlayers[lockActive].playerPassives.brisk =0;
	allPlayers[lockActive].playerPassives.haste =0;
	allPlayers[lockActive].playerPassives.dash =0;
	allPlayers[lockActive].playerPassives.agileDash =0;
	allPlayers[lockActive].playerPassives.infravision =false;
	allPlayers[lockActive].playerPassives.regen =false;
	allPlayers[lockActive].playerPassives.protection=0; 
	allPlayers[lockActive].playerPassives.energyRegen =false;
	allPlayers[lockActive].playerPassives.noHungCast =false;

	allPlayers[lockActive].playerPassives.permSlow=false;
	allPlayers[lockActive].playerPassives.permBrisk=false;
	allPlayers[lockActive].playerPassives.permHaste=false;


	allPlayers[lockActive].playerPassives.fumbling =false;
	allPlayers[lockActive].playerPassives.isHungry =false;
	allPlayers[lockActive].playerPassives.tempBrisk=0;//int
	allPlayers[lockActive].playerPassives.tempHaste=0; //int
	allPlayers[lockActive].playerPassives.tempRegen=0; //int
	allPlayers[lockActive].playerPassives.tempConfluence=0; //int
	allPlayers[lockActive].playerPassives.tempInvis=0; //int

	allPlayers[lockActive].playerPassives.slow=0; //int
	allPlayers[lockActive].playerPassives.blind=0; //int 
	allPlayers[lockActive].playerPassives.sleep=0; //int
	allPlayers[lockActive].playerPassives.poisoned=0; //int
	allPlayers[lockActive].playerPassives.confused=0; //int
	allPlayers[lockActive].playerPassives.taunted=0; //int
	allPlayers[lockActive].playerPassives.aggravated=0; //int
	allPlayers[lockActive].playerPassives.paralyzed=0; //int

	allPlayers[lockActive].playerPassives.hallucin=0; //int
	allPlayers[lockActive].playerPassives.enfeebled=0; //int
	allPlayers[lockActive].playerPassives.vulnerable=0; //int
	allPlayers[lockActive].playerPassives.slippery=0; //int
	allPlayers[lockActive].playerPassives.petrify=0; //int
	allPlayers[lockActive].playerPassives.vomit=0; //int
	allPlayers[lockActive].playerPassives.strangle=0; //int 
	allPlayers[lockActive].playerPassives.engulfed=0; //int

	allPlayers[lockActive].playerPassives.woundedArmLeft=0; //int
	allPlayers[lockActive].playerPassives.woundedArmRight=0; //int
	allPlayers[lockActive].playerPassives.woundedLegLeft=0; //int
	allPlayers[lockActive].playerPassives.woundedLegRight=0 //int
	
	//inventory
	allPlayers[lockActive].inventory.length=0;
	
	//spells
	allPlayers[lockActive].spells.length=0;
	
}

function createCharacterStats () {

	var itemRoll;

	allPlayers[lockActive].playerLevel=1;
	
	

	//highlander
	if (classChoice==0) {
	
		allPlayers[lockActive].playClass=0;
		allPlayers[lockActive].playerNameClass="Highlander";
	
		allPlayers[lockActive].hunger=200;	
		allPlayers[lockActive].armorAC=5;
		allPlayers[lockActive].playerPassives.protection=0;
		
		allPlayers[whoIsActive].totalAC=12-allPlayers[whoIsActive].armorAC - allPlayers[whoIsActive].otherAC;
		
		allPlayers[lockActive].hpMax+=15;
		allPlayers[lockActive].hpCurr+=15;
		allPlayers[lockActive].strength=11+rollDie(2, 1);
		allPlayers[lockActive].dexterity=9+rollDie(2, 1);
		allPlayers[lockActive].intelligence=5+rollDie(2, 1);
		allPlayers[lockActive].wisdom=6+rollDie(2, 1);
		allPlayers[lockActive].constitution=13+rollDie(4, 1);
		allPlayers[lockActive].luck-=2;
		

		//passives
		
		allPlayers[lockActive].playerPassives.poisonResist=true;	
		allPlayers[lockActive].playerPassives.breathless=true;
		
		
		//items
		
		allPlayers[lockActive].inventory.push("+0 kilt (0 AC body armor)");
		allPlayers[lockActive].inventory.push("+0 boots (1 AC)");
		
		//pickaxe
		if (allPlayers[lockActive].race==1) {
			allPlayers[lockActive].inventory.push("pick-axe");
		}
		
		
		//spells
		allPlayers[lockActive].spells.push(
		"Class Skill: Quickening<br>" +
		"Costs 100% of max energy (50% of max energy rounded up if adept with Swords)<br>" +
		"Novice Weapon Skill<br><br>"+
		"Melee attack with additional 1d2 damage (additional 1d8 instead if apprentice with Axes; 1d20 chance of instant kill if adept with Swords). If a being is killed with this skill, gain 1d2 max HP (gain 1d2+1 max HP if apprentice with Swords). Can be doublecast.");
		
		allPlayers[lockActive].spells.push(
		"Class Skill: Rescind<br>" +
		"Costs 5 energy<br>"+
		"Novice Weapon Skill<br><br>"+
		"Melee attack with additional 1d4 damage; -1 To Hit. Recover 1d2 energy if successful (recover 1d6 energy if apprentice with Axes). If a being is killed with this skill, gain 1 max energy before energy recovery (gain 2 max energy if apprentice with Bludgeons). Can be doublecast.");
		
		allPlayers[lockActive].spells.push(
		"Spell: Taunt<br>" +
		"Costs 5 energy<br>"+
		"Novice Enchantment Spell<br><br>"+
		"Missile. Inflicts Taunt on affected being for 3 turns. Range 3.");
		
	}
	
	//wizard
	else if (classChoice==1) {
	
		allPlayers[lockActive].playClass=1;
		allPlayers[lockActive].playerNameClass="Istari";
	
		allPlayers[lockActive].hunger=200;	
		allPlayers[lockActive].armorAC=1;
		allPlayers[lockActive].playerPassives.protection=0;
		
		allPlayers[whoIsActive].totalAC=12-allPlayers[whoIsActive].armorAC - allPlayers[whoIsActive].otherAC;

		allPlayers[lockActive].hpMax+=9;
		allPlayers[lockActive].hpCurr+=9;
		allPlayers[lockActive].strength=6+rollDie(2, 1);
		allPlayers[lockActive].dexterity=8+rollDie(4, 1);
		allPlayers[lockActive].intelligence=15+rollDie(2, 1);
		allPlayers[lockActive].wisdom=11+rollDie(2, 1);
		allPlayers[lockActive].constitution=5+rollDie(2, 1);

		allPlayers[lockActive].energyCurr+=7;
		allPlayers[lockActive].energyMax+=7; //hat + sceptre
		
		//bonus starting energy
		
		allPlayers[lockActive].energyCurr+=10;
		allPlayers[lockActive].energyMax+=10;
	
	
		//passives
		
		allPlayers[lockActive].playerPassives.noHungCast=true;
		
		
		//items
		allPlayers[lockActive].inventory.push("+0 acolyte’s staff (1d4, +5 max energy)");
		allPlayers[lockActive].inventory.push("+0 cloak of magic resistance (0 AC, grants magic resistance)");
		allPlayers[lockActive].inventory.push("+0 pointy hat (1 AC, +2 max energy)");
		allPlayers[lockActive].inventory.push("1 scroll of identify");
		
		//scrolls of teleportation
		itemRoll=rollDie(3,1);
		if (itemRoll==1){
			allPlayers[lockActive].inventory.push("1 scroll of teleportation");
		}
		if (itemRoll>1){
			allPlayers[lockActive].inventory.push(itemRoll+ " scrolls of teleportation");
		}
		
		//random wand
		itemRoll=rollDie(3,1);
		if (itemRoll==1){
			allPlayers[lockActive].inventory.push("1 wand of Ice Spike");
		}
		if (itemRoll==2){
			allPlayers[lockActive].inventory.push("1 wand of Fireball");
		}
		if (itemRoll==3){
			allPlayers[lockActive].inventory.push("1 wand of Discharge");
		}
		
		//random wand
		
		let wandInd=wands.length;
		wandInd--;
		
		itemRoll=rollDie0(wandInd,1);
		
		allPlayers[lockActive].inventory.push("1 wand of " + wands[itemRoll]);
		allPlayers[lockActive].inventory.push("3 newt corpses");
		
	}
	
	//healer
	else if (classChoice==2) {
	
		allPlayers[lockActive].playClass=2;
		allPlayers[lockActive].playerNameClass="Asclepian";
	
		allPlayers[lockActive].hunger=200;	
		allPlayers[lockActive].armorAC=2;
		allPlayers[lockActive].playerPassives.protection=0;
		
		allPlayers[whoIsActive].totalAC=12-allPlayers[whoIsActive].armorAC - allPlayers[whoIsActive].otherAC;

		allPlayers[lockActive].hpMax+=9;
		allPlayers[lockActive].hpCurr+=9;
		allPlayers[lockActive].strength=7+rollDie(2,1);
		allPlayers[lockActive].dexterity=6+rollDie(2,1);
		allPlayers[lockActive].intelligence=9+rollDie(2,1);
		allPlayers[lockActive].wisdom=16+rollDie(2,1);
		allPlayers[lockActive].constitution=6+rollDie(2,1);
		
		//bonus starting energy
		allPlayers[lockActive].energyCurr+=7;
		allPlayers[lockActive].energyMax+=7;
	
		
		//passives
		
		allPlayers[lockActive].playerPassives.poisonResist=true;
		
		
		//inventory
		
		allPlayers[lockActive].inventory.push("+0 scalpel (1d2 dagger)");
		allPlayers[lockActive].inventory.push("+0 leather gloves (1 AC)");
		allPlayers[lockActive].inventory.push("+0 boots (1 AC)");
		
		//apples
		itemRoll=rollDie(3,1,3);
		allPlayers[lockActive].inventory.push(itemRoll+ " apples");
		
		allPlayers[lockActive].inventory.push("1 potion of full healing");
		allPlayers[lockActive].inventory.push("1 panacea (removes all ailments)");
		
		//bandages
		itemRoll=rollDie(2,1,2);
		allPlayers[lockActive].inventory.push(itemRoll+ " bandages (remove Wounds)");

		allPlayers[lockActive].inventory.push("1 scroll of remove curse");
		allPlayers[lockActive].inventory.push("1 wand of scrutiny");
		
		
		//pickaxe
		if (allPlayers[lockActive].race==1) {
			allPlayers[lockActive].inventory.push("pick-axe");
		}
	
	}
	
	//rogue
	else if (classChoice==3) {
	
		allPlayers[lockActive].playClass=3;
		allPlayers[lockActive].playerNameClass="Rapscallion";
	
		allPlayers[lockActive].hunger=150;	
		allPlayers[lockActive].armorAC=3;
		allPlayers[lockActive].playerPassives.protection=0;
		
		allPlayers[whoIsActive].totalAC=12-allPlayers[whoIsActive].armorAC - allPlayers[whoIsActive].otherAC;

		allPlayers[lockActive].hpMax+=10;
		allPlayers[lockActive].hpCurr+=10;
		allPlayers[lockActive].strength=8+rollDie(2,1);
		allPlayers[lockActive].dexterity=14+rollDie(2,1);
		allPlayers[lockActive].intelligence=10+rollDie(2,1);
		allPlayers[lockActive].wisdom=8+rollDie(2,1);
		allPlayers[lockActive].constitution=6+rollDie(2,1);
		allPlayers[lockActive].luck+=2; //lucky


		//passives
		
		allPlayers[lockActive].playerPassives.stealth=true;
		allPlayers[lockActive].playerPassives.searching=true;
		allPlayers[lockActive].playerPassives.seeInvis=true;
		allPlayers[lockActive].playerPassives.brisk=true;
	
	}
	
	//monk
	else if (classChoice==4) {
	
		allPlayers[lockActive].playClass=4;
		allPlayers[lockActive].playerNameClass="Yogi";
	
		allPlayers[lockActive].hunger=200;	
		allPlayers[lockActive].armorAC=3;
		allPlayers[lockActive].playerPassives.protection=0;
		
		allPlayers[whoIsActive].totalAC=12-allPlayers[whoIsActive].armorAC - allPlayers[whoIsActive].otherAC;

		allPlayers[lockActive].hpMax+=13;
		allPlayers[lockActive].hpCurr+=13;
		allPlayers[lockActive].strength=12+rollDie(4,1);
		allPlayers[lockActive].dexterity=10+rollDie(4,1);
		allPlayers[lockActive].intelligence=8+rollDie(2,1);
		allPlayers[lockActive].wisdom=9+rollDie(4,1);
		allPlayers[lockActive].constitution=8+rollDie(4,1);
		allPlayers[lockActive].toHit+=1;



		//passives
		
		allPlayers[lockActive].playerPassives.sleepResist=true;
		allPlayers[lockActive].playerPassives.confuseResist=true;
	
	}
	
	//snip
	else if (classChoice==5) {
	
		allPlayers[lockActive].playClass=5;
		allPlayers[lockActive].playerNameClass="Sniper";
	
		allPlayers[lockActive].hunger=200;	
		allPlayers[lockActive].armorAC=2;
		allPlayers[lockActive].playerPassives.protection=0;
		
		allPlayers[whoIsActive].totalAC=12-allPlayers[whoIsActive].armorAC - allPlayers[whoIsActive].otherAC;

		allPlayers[lockActive].hpMax+=10;
		allPlayers[lockActive].hpCurr+=10;
		allPlayers[lockActive].strength=11+rollDie(2,1);
		allPlayers[lockActive].dexterity=13+rollDie(2,1);
		allPlayers[lockActive].intelligence=9+rollDie(4,1);
		allPlayers[lockActive].wisdom=7+rollDie(4,1);
		allPlayers[lockActive].constitution=6+rollDie(2,1);

		
		//passives
		
		allPlayers[lockActive].playerPassives.searching=true;
		allPlayers[lockActive].playerPassives.stealth=true; // faded cloak
		allPlayers[lockActive].playerPassives.blindResist=true;
	
	}
	
	//myrm
	else if (classChoice==6) {
	
		allPlayers[lockActive].playClass=6;
		allPlayers[lockActive].playerNameClass="Myrmidon";
	
		allPlayers[lockActive].hunger=150;	
		allPlayers[lockActive].armorAC=3;
		allPlayers[lockActive].playerPassives.protection=0;
		
		allPlayers[whoIsActive].totalAC=12-allPlayers[whoIsActive].armorAC - allPlayers[whoIsActive].otherAC;

		allPlayers[lockActive].hpMax+=8;
		allPlayers[lockActive].hpCurr+=8;
		allPlayers[lockActive].strength=15+rollDie(2,1);
		allPlayers[lockActive].dexterity=10+rollDie(4,1);
		allPlayers[lockActive].intelligence=10+rollDie(2,1);
		allPlayers[lockActive].wisdom=7+rollDie(2,1);
		allPlayers[lockActive].constitution=5+rollDie(2,1);

		//passives
		
		allPlayers[lockActive].playerPassives.disinResist=true;
		allPlayers[lockActive].playerPassives.agileDash=2;
	
	}
	
	//sab
	else if (classChoice==7) {
	
		allPlayers[lockActive].playClass=7;
		allPlayers[lockActive].playerNameClass="Saboteur";
	
		allPlayers[lockActive].hunger=200;	
		allPlayers[lockActive].armorAC=2;
		allPlayers[lockActive].playerPassives.protection=0;
		
		allPlayers[whoIsActive].totalAC=12-allPlayers[whoIsActive].armorAC - allPlayers[whoIsActive].otherAC;

		allPlayers[lockActive].hpMax+=10;
		allPlayers[lockActive].hpCurr+=10;
		allPlayers[lockActive].strength=8+rollDie(4,1);
		allPlayers[lockActive].dexterity=8+rollDie(2,1);
		allPlayers[lockActive].intelligence=14+rollDie(2,1);
		allPlayers[lockActive].wisdom=8+rollDie(4,1);
		allPlayers[lockActive].constitution=8+rollDie(2,1);

		
		//passives
		
		allPlayers[lockActive].playerPassives.sleepResist=true;
		allPlayers[lockActive].playerPassives.noHungCast=true;
		allPlayers[lockActive].playerPassives.warning=true;
	
	}
	
	//occ
	else if (classChoice==8) {
	
		allPlayers[lockActive].playClass=8;
		allPlayers[lockActive].playerNameClass="Occultist";
	
		allPlayers[lockActive].hunger=200;	
		allPlayers[lockActive].armorAC=1;
		allPlayers[lockActive].playerPassives.protection=0;
		
		allPlayers[whoIsActive].totalAC=12-allPlayers[whoIsActive].armorAC - allPlayers[whoIsActive].otherAC;

		allPlayers[lockActive].hpMax+=10;
		allPlayers[lockActive].hpCurr+=10;
		allPlayers[lockActive].strength=5+rollDie(2,1);
		allPlayers[lockActive].dexterity=9+rollDie(2,1);
		allPlayers[lockActive].intelligence=11+rollDie(4,1);
		allPlayers[lockActive].wisdom=11+rollDie(2,1);
		allPlayers[lockActive].constitution=11+rollDie(2,1);
		allPlayers[lockActive].luck-=2; //unlucky


		//passives
		allPlayers[lockActive].playerPassives.drainResist=true;
		allPlayers[lockActive].playerPassives.warning=true;	
		
		//bonus starting energy
		
		allPlayers[lockActive].energyCurr+=7;
		allPlayers[lockActive].energyMax+=7;
	
	}
	
	//bas
	else if (classChoice==9) {
	
		allPlayers[lockActive].playClass=9;
		allPlayers[lockActive].playerNameClass="Basilica";
		
		allPlayers[lockActive].hunger=200;	
		allPlayers[lockActive].armorAC=5;
		
		allPlayers[lockActive].playerPassives.protection=3;
		//allPlayers[lockActive].totalAC-=allPlayers[lockActive].playerPassives.protection;
		
		allPlayers[whoIsActive].totalAC=12-allPlayers[whoIsActive].armorAC - allPlayers[whoIsActive].otherAC;

		allPlayers[lockActive].hpMax+=15;
		allPlayers[lockActive].hpCurr+=15;
		allPlayers[lockActive].strength+=6+rollDie(2,1);
		allPlayers[lockActive].dexterity=6+rollDie(2,1);
		allPlayers[lockActive].intelligence=8+rollDie(2,1);
		allPlayers[lockActive].wisdom=12+rollDie(2,1);
		allPlayers[lockActive].constitution=14+rollDie(2,1);


		
		//passives
		
		allPlayers[lockActive].playerPassives.slowDigest=true;
		allPlayers[lockActive].playerPassives.permSlow=true;
	
	}
	
	//tri
	else if (classChoice==10) {
	
		allPlayers[lockActive].playClass=10;
		allPlayers[lockActive].playerNameClass="Triarius";
	
		allPlayers[lockActive].hunger=200;	
		allPlayers[lockActive].armorAC=7;
		allPlayers[lockActive].playerPassives.protection=0;		
		
		allPlayers[whoIsActive].totalAC=12-allPlayers[whoIsActive].armorAC - allPlayers[whoIsActive].otherAC;

		allPlayers[lockActive].hpMax+=14;
		allPlayers[lockActive].hpCurr+=14;
		allPlayers[lockActive].strength=9+rollDie(4,1);
		allPlayers[lockActive].dexterity=11+rollDie(2,1);
		allPlayers[lockActive].intelligence=9+rollDie(2,1);
		allPlayers[lockActive].wisdom=9+rollDie(2,1);
		allPlayers[lockActive].constitution=11+rollDie(2,1);

		
		//passives
		
		//none
	
	}
	
	//sym
	else if (classChoice==11) {
	
		allPlayers[lockActive].playClass=11;
		allPlayers[lockActive].playerNameClass="Symposiarch";
	
		allPlayers[lockActive].hunger=200;	
		
		//no starting armor
		//allPlayers[lockActive].totalAC-=2;
		//allPlayers[lockActive].playerPassives.protection=0;
		
		allPlayers[whoIsActive].totalAC=12-allPlayers[whoIsActive].armorAC - allPlayers[whoIsActive].otherAC;

		allPlayers[lockActive].hpMax+=6;
		allPlayers[lockActive].hpCurr+=6;
		allPlayers[lockActive].energyCurr+=5;
		allPlayers[lockActive].energyMax+=5;
		allPlayers[lockActive].strength=5+rollDie(2,1);
		allPlayers[lockActive].dexterity=12+rollDie(4,1);
		allPlayers[lockActive].intelligence=13+rollDie(2,1);
		allPlayers[lockActive].wisdom+=12+rollDie(2,1);
		allPlayers[lockActive].constitution+=6+rollDie(2,1);
		
		
		//passives
		
		allPlayers[lockActive].playerPassives.disinResist=true;
		allPlayers[lockActive].playerPassives.confuseResist=true;
	
	}
	
	//human
	if (allPlayers[lockActive].race==0) {
	
		allPlayers[lockActive].playerNameRace="Human";
	
		allPlayers[lockActive].energyMax+=5;
		allPlayers[lockActive].energyCurr+=5; //minimum

		allPlayers[lockActive].hpMax+=2;
		allPlayers[lockActive].hpCurr+=2;
		allPlayers[lockActive].energyMax+=3;
		allPlayers[lockActive].energyCurr+=3;
		allPlayers[lockActive].playerPassives.protection+=1; // divine protection 1
		
		allPlayers[whoIsActive].otherAC=allPlayers[lockActive].playerPassives.protection;
		
		allPlayers[whoIsActive].totalAC=12-allPlayers[whoIsActive].armorAC - allPlayers[whoIsActive].otherAC;
		
		//allPlayers[lockActive].totalAC-=allPlayers[lockActive].playerPassives.protection;
		allPlayers[lockActive].luck+=3;
		allPlayers[lockActive].vision=1;
	

	
	}
	
	//dwarf
	else if (allPlayers[lockActive].race==1) {
	
		allPlayers[lockActive].playerNameRace="Dwarf";
	
		allPlayers[lockActive].energyMax+=5;
		allPlayers[lockActive].energyCurr+=5; //minimum

		allPlayers[lockActive].hpMax+=5;
		allPlayers[lockActive].hpCurr+=5;
		allPlayers[lockActive].strength+=1;
		allPlayers[lockActive].constitution+=2;
		allPlayers[lockActive].intelligence-=1;
		allPlayers[lockActive].dexterity-=1;
		allPlayers[lockActive].playerPassives.petrifyResist==true; //petrify resist
		allPlayers[lockActive].playerPassives.infravision==true; //infravision
		allPlayers[lockActive].luck=2;
		allPlayers[lockActive].vision=1;
	
	
	
	}
	
	//orc
	else if (allPlayers[lockActive].race==2) {
	
		allPlayers[lockActive].playerNameRace="Orc";
	
		allPlayers[lockActive].energyMax+=5;
		allPlayers[lockActive].energyCurr+=5; //minimum

		//orc bonus
		allPlayers[lockActive].energyMax+=1;
		allPlayers[lockActive].energyCurr+=1; 
		allPlayers[lockActive].hpMax+=3;
		allPlayers[lockActive].hpCurr+=3;
		allPlayers[lockActive].strength+=2;
		allPlayers[lockActive].constitution+=1;
		allPlayers[lockActive].toHit+=1;
		
		//orc penalty
		allPlayers[lockActive].intelligence-=1;
		allPlayers[lockActive].wisdom-=1;
		allPlayers[lockActive].playerPassives.poisonResist==true; //poison resist
		
		allPlayers[lockActive].luck=0;
		allPlayers[lockActive].vision=1;
	
	
	}
	
	//elf
	else if (allPlayers[lockActive].race==3) {
	
		allPlayers[lockActive].playerNameRace="Elf";
	
		allPlayers[lockActive].energyMax+=5;
		allPlayers[lockActive].energyCurr+=5; //minimum
	
		//elf bonus
		allPlayers[lockActive].energyMax+=5;
		allPlayers[lockActive].energyCurr+=5;
		allPlayers[lockActive].dexterity+=1;
		allPlayers[lockActive].toHit+=1;
		
		//elf penalty
		allPlayers[lockActive].strength-=1;
		allPlayers[lockActive].constitution-=1;
		allPlayers[lockActive].playerPassives.sleepResist==true; //sleep resist
		allPlayers[lockActive].luck=2;
		allPlayers[lockActive].vision=2;
	
	}
	
	allPlayers[lockActive].weightMax=(12*(allPlayers[lockActive].strength+allPlayers[lockActive].constitution))+50;
	
	allPlayers[lockActive].playerProfs.daggerProf = 0;
	allPlayers[lockActive].playerProfs.axeProf = 0;
	allPlayers[lockActive].playerProfs.swordProf = 0;
	allPlayers[lockActive].playerProfs.bludgeonProf = 0;
	allPlayers[lockActive].playerProfs.staffProf = 0;
	allPlayers[lockActive].playerProfs.spearProf = 0;
	allPlayers[lockActive].playerProfs.polearmProf = 0;
	allPlayers[lockActive].playerProfs.bowProf = 0;
	allPlayers[lockActive].playerProfs.martialProf = 0;
	allPlayers[lockActive].playerProfs.barehandProf = 0;
	allPlayers[lockActive].playerProfs.augmentProf = 0;
	allPlayers[lockActive].playerProfs.mobilityProf = 0;

	allPlayers[lockActive].playerProfs.attackSpellProf = 0;
	allPlayers[lockActive].playerProfs.matterSpellProf = 0;
	allPlayers[lockActive].playerProfs.divinationSpellProf = 0;
	allPlayers[lockActive].playerProfs.clericalSpellProf = 0;
	allPlayers[lockActive].playerProfs.enchantmentSpellProf = 0;
	allPlayers[lockActive].playerProfs.healingSpellProf = 0;

	//bar progress
	allPlayers[lockActive].playerProfs.daggerBar = 0;
	allPlayers[lockActive].playerProfs.axeBar = 0;
	allPlayers[lockActive].playerProfs.swordBar = 0;
	allPlayers[lockActive].playerProfs.bludgeonBar = 0;
	allPlayers[lockActive].playerProfs.staffBar = 0;
	allPlayers[lockActive].playerProfs.spearBar = 0;
	allPlayers[lockActive].playerProfs.polearmBar = 0;
	allPlayers[lockActive].playerProfs.bowBar = 0;
	allPlayers[lockActive].playerProfs.martialBar = 0;
	allPlayers[lockActive].playerProfs.barehandBar = 0;
	allPlayers[lockActive].playerProfs.augmentBar = 0;
	allPlayers[lockActive].playerProfs.mobilityBar = 0;

	allPlayers[lockActive].playerProfs.attackSpellBar = 0;
	allPlayers[lockActive].playerProfs.matterSpellBar = 0;
	allPlayers[lockActive].playerProfs.divinationSpellBar = 0;
	allPlayers[lockActive].playerProfs.clericalSpellBar = 0;
	allPlayers[lockActive].playerProfs.enchantmentSpellBar = 0;
	allPlayers[lockActive].playerProfs.healingSpellBar = 0;

	allPlayers[lockActive].playerProfs.daggerLev = 0;
	allPlayers[lockActive].playerProfs.axeLev = 0;
	allPlayers[lockActive].playerProfs.swordLev = 0;
	allPlayers[lockActive].playerProfs.bludgeonLev = 0;
	allPlayers[lockActive].playerProfs.staffLev = 0;
	allPlayers[lockActive].playerProfs.spearLev = 0;
	allPlayers[lockActive].playerProfs.polearmLev = 0;
	allPlayers[lockActive].playerProfs.bowLev = 0;
	allPlayers[lockActive].playerProfs.martialLev = 0;
	allPlayers[lockActive].playerProfs.barehandLev = 0;
	allPlayers[lockActive].playerProfs.augmentLev = 0;
	allPlayers[lockActive].playerProfs.mobilityLev = 0;

	allPlayers[lockActive].playerProfs.attackSpellLev = 0;
	allPlayers[lockActive].playerProfs.matterSpellLev = 0;
	allPlayers[lockActive].playerProfs.divinationSpellLev = 0;
	allPlayers[lockActive].playerProfs.clericalSpellLev = 0;
	allPlayers[lockActive].playerProfs.enchantmentSpellLev = 0;
	allPlayers[lockActive].playerProfs.healingSpellLev = 0;
	
	//reset progress bars
	
	currProf=-1;
	$("#daggerProfBar").css("background-color", "white");
	$("#axeProfBar").css("background-color", "white");
	$("#swordProfBar").css("background-color", "white");
	$("#bludgeonProfBar").css("background-color", "white");
	$("#staffProfBar").css("background-color", "white");
	$("#spearProfBar").css("background-color", "white");
	$("#polearmProfBar").css("background-color", "white");
	$("#bowProfBar").css("background-color", "white");
	$("#martialProfBar").css("background-color", "white");
	$("#barehandProfBar").css("background-color", "white");
	$("#augmentProfBar").css("background-color", "white");
	$("#mobilityProfBar").css("background-color", "white");
	$("#attackSpellProfBar").css("background-color", "white");
	$("#matterSpellProfBar").css("background-color", "white");
	$("#divinationSpellProfBar").css("background-color", "white");
	$("#clericalSpellProfBar").css("background-color", "white");
	$("#enchantmentSpellProfBar").css("background-color", "white");
	$("#healingSpellProfBar").css("background-color", "white");
	
	$( "#daggerProfBar" ).progressbar({value:0 , max:20});
	$( "#axeProfBar" ).progressbar({value:0 , max:20});
	$( "#swordProfBar" ).progressbar({value:0 , max:20});
	$( "#bludgeonProfBar" ).progressbar({value:0 , max:20});
	$( "#staffProfBar" ).progressbar({value:0 , max:20});
	$( "#spearProfBar" ).progressbar({value:0 , max:20});
	$( "#polearmProfBar" ).progressbar({value:0 , max:20});
	$( "#bowProfBar" ).progressbar({value:0 , max:20});
	$( "#martialProfBar" ).progressbar({value:0 , max:20});
	$( "#barehandProfBar" ).progressbar({value:0 , max:20});
	$( "#augmentProfBar" ).progressbar({value:0 , max:20});
	$( "#mobilityProfBar" ).progressbar({value:0 , max:20});
	$( "#attackSpellProfBar" ).progressbar({value:0 , max:20});
	$( "#matterSpellProfBar" ).progressbar({value:0 , max:20});
	$( "#divinationSpellProfBar" ).progressbar({value:0 , max:20});
	$( "#clericalSpellProfBar" ).progressbar({value:0 , max:20});
	$( "#enchantmentSpellProfBar" ).progressbar({value:0 , max:20});
	$( "#healingSpellProfBar" ).progressbar({value:0 , max:20});
	
	allPlayers[lockActive].playerExists=true;
	partyCount++;
	
	//clears spinner entries
	$("div.playerStatsGrid").find("input[type=\"spinner\"]").spinner("value", '');
	
	
	//set alignment
	
	let alignRoll=0;
	
	alignRoll=rollDie(2,1);
	
	//test
	//alignRoll=2;
	
	//lawful
	if (alignRoll==1) {
	
		allPlayers[lockActive].alignment = 1;
	}
	
	//chaotic
	if (alignRoll==2) {
	
		allPlayers[lockActive].alignment = 2;
	}
	

	//set objectives
	
	rerollObj();
	
	objConflicts();
	
	makeObjective();
	
}

function makeObjective() {

	
	var floorLevel;
	var goalRoll=0; //for floor/level
	var goalRollAm=0; //amount
	var goalFloorLevel=rollDie(2,1,2);
	var goalMult=goalFloorLevel;
	goalMult--;
	var whichObj=0;
	
	
	//objective 1
	
	goalRoll=rollDie(2,1);

	
	if (goalRoll==1) {
	
		floorLevel=" the party reaches floor " + goalFloorLevel;
	}
	
	if (goalRoll==2) {
	
		floorLevel=" your character is level " + goalFloorLevel;
	}
	
	allPlayers[lockActive].obj1.goal+=floorLevel;
	
	//objective 2
	
	goalRoll=rollDie(2,1);
	
	
	if (goalRoll==1) {
	
		floorLevel=" the party reaches floor " + goalFloorLevel;
	}
	
	if (goalRoll==2) {
	
		floorLevel=" your character is level " + goalFloorLevel;
	}
	
	allPlayers[lockActive].obj2.goal+=floorLevel;
	
	//objective 3
	
	goalRoll=rollDie(2,1);
	
	
	if (goalRoll==1) {
	
		floorLevel=" the party reaches floor " + goalFloorLevel;
	}
	
	if (goalRoll==2) {
	
		floorLevel=" your character is level " + goalFloorLevel;
	}
	
	allPlayers[lockActive].obj3.goal+=floorLevel;
	
	
	//determine goal amounts
	
	
	
	//chaotic, be burdened for x turns
	if (allPlayers[lockActive].obj1.id==21 || allPlayers[lockActive].obj2.id==21 || allPlayers[lockActive].obj3.id==21) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==21) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==21) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==21) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(5,1,15);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("21_AMOUNT", goalRollAm);

	}
	

	//Have a cursed piece of equipment equipped for a total of 23_AMOUNT turns (cumulative) before
	if (allPlayers[lockActive].obj1.id==23 || allPlayers[lockActive].obj2.id==23 || allPlayers[lockActive].obj3.id==23) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==23) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==23) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==23) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(3,1,15);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("23_AMOUNT", goalRollAm);

	}
	


	//Quaff 29_AMOUNT potions before
	if (allPlayers[lockActive].obj1.id==29 || allPlayers[lockActive].obj2.id==29 || allPlayers[lockActive].obj3.id==29) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==29) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==29) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==29) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(2,1,2);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("29_AMOUNT", goalRollAm);
		
	}

	
	//Read 31_AMOUNT scrolls before
	if (allPlayers[lockActive].obj1.id==31 || allPlayers[lockActive].obj2.id==31 || allPlayers[lockActive].obj3.id==31) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==31) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==31) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==31) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(2,1,3);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("31_AMOUNT", goalRollAm);

	}
	

	//For a total of 35_AMOUNT turns (cumulative), other players must not be within radius 1 of self until
	if (allPlayers[lockActive].obj1.id==35 || allPlayers[lockActive].obj2.id==35 || allPlayers[lockActive].obj3.id==35) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==35) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==35) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==35) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(5,1,15);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("35_AMOUNT", goalRollAm);

	}


	//For a total of 36_AMOUNT turns (cumulative), you must be within radius 1 of at least one other player until
	if (allPlayers[lockActive].obj1.id==36 || allPlayers[lockActive].obj2.id==36 || allPlayers[lockActive].obj3.id==36) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==36) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==36) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==36) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(5,1,15);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("36_AMOUNT", goalRollAm);

	}
	
	//Neutral: catch x items
	if (allPlayers[lockActive].obj1.id==140 || allPlayers[lockActive].obj2.id==140 || allPlayers[lockActive].obj3.id==140) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==140) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==140) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==140) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(2,1,2);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("140_AMOUNT", goalRollAm);

	}
	


	//Do not kill more than 37_AMOUNT enemies until
	if (allPlayers[lockActive].obj1.id==37 || allPlayers[lockActive].obj2.id==37 || allPlayers[lockActive].obj3.id==37) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==37) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==37) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==37) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(2,1,4);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("37_AMOUNT", goalRollAm);

	}

	//Shove 38_AMOUNT enemies before
	if (allPlayers[lockActive].obj1.id==38 || allPlayers[lockActive].obj2.id==38 || allPlayers[lockActive].obj3.id==38) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==38) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==38) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==38) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(2,1,4);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("38_AMOUNT", goalRollAm);

	}


	//highlander: Take 52_AMOUNT damage before
	if (allPlayers[lockActive].obj1.id==52 || allPlayers[lockActive].obj2.id==52 || allPlayers[lockActive].obj3.id==52) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==52) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==52) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==52) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(5,1,22);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("52_AMOUNT", goalRollAm);

	}
	
	//Kill 56_AMOUNT of monsters with 56_SKILL before
	if (allPlayers[lockActive].obj1.id==56 || allPlayers[lockActive].obj2.id==56 || allPlayers[lockActive].obj3.id==56) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==56) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==56) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==56) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(2,1,5);
			
		}
		
		let tempSkill=rollDie(2,1);

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("56_AMOUNT", goalRollAm);
		
		if (tempSkill==1) {
		
			allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("56_SKILL", "Quickening");
		
		}
		
		if (tempSkill==2) {
		
			allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("56_SKILL", "Rescind");
		
		}

	}

	

	//Wiz: Deal 58_AMOUNT damage with spells before
	if (allPlayers[lockActive].obj1.id==58 || allPlayers[lockActive].obj2.id==58 || allPlayers[lockActive].obj3.id==58) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==58) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==58) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==58) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(5,1,25);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("58_AMOUNT", goalRollAm);

	}

	

	//Rap: Reveal 63_AMOUNT hidden objects/beings before
	if (allPlayers[lockActive].obj1.id==63 || allPlayers[lockActive].obj2.id==63 || allPlayers[lockActive].obj3.id==63) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==63) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==63) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==63) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(2,1,2);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("63_AMOUNT", goalRollAm);

	}
	
	
	
	//Rap: Pick up 64_AMOUNT items before
	if (allPlayers[lockActive].obj1.id==64 || allPlayers[lockActive].obj2.id==64 || allPlayers[lockActive].obj3.id==64) {
	
		goalRollAm=0;
	

		if (allPlayers[lockActive].obj1.id==64) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==64) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==64) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(2,1,7);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("64_AMOUNT", goalRollAm);

	}


	//Rap: Throw 68_AMOUNT projectiles before
	if (allPlayers[lockActive].obj1.id==68 || allPlayers[lockActive].obj2.id==68 || allPlayers[lockActive].obj3.id==68) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==68) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==68) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==68) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(3,1,10);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("68_AMOUNT", goalRollAm);

	}


	//Healer: Heal 72_AMOUNT total HP before
	if (allPlayers[lockActive].obj1.id==72 || allPlayers[lockActive].obj2.id==72 || allPlayers[lockActive].obj3.id==72) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==72) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==72) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==72) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(5,1,25);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("72_AMOUNT", goalRollAm);

	}


	//Monk: Paralyze 84_AMOUNT enemies with melee attacks before
	if (allPlayers[lockActive].obj1.id==84 || allPlayers[lockActive].obj2.id==84 || allPlayers[lockActive].obj3.id==84) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==84) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==84) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==84) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(3,1,2);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("84_AMOUNT", goalRollAm);

	}


	//Monk: Nullify 85_AMOUNT attacks from enemies before
	if (allPlayers[lockActive].obj1.id==85 || allPlayers[lockActive].obj2.id==85 || allPlayers[lockActive].obj3.id==85) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==85) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==85) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==85) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(3,1,2);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("85_AMOUNT", goalRollAm);

	}


	//Sniper: Reveal 86_AMOUNT hidden objects/beings before
	if (allPlayers[lockActive].obj1.id==86 || allPlayers[lockActive].obj2.id==86 || allPlayers[lockActive].obj3.id==86) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==86) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==86) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==86) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(3,1,2);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("86_AMOUNT", goalRollAm);

	}


	//Sniper: Inflict Blind on 87_AMOUNT enemies before
	if (allPlayers[lockActive].obj1.id==87 || allPlayers[lockActive].obj2.id==87 || allPlayers[lockActive].obj3.id==87) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==87) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==87) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==87) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(3,1,7);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("87_AMOUNT", goalRollAm);

	}


	//Sniper: Identify 92_AMOUNT rotten food items before
	if (allPlayers[lockActive].obj1.id==92 || allPlayers[lockActive].obj2.id==92 || allPlayers[lockActive].obj3.id==92) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==92) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==92) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==92) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(2,1,2);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("92_AMOUNT", goalRollAm);

	}


	//Myrmidon: Avoid 93_AMOUNT attacks before
	if (allPlayers[lockActive].obj1.id==93 || allPlayers[lockActive].obj2.id==93 || allPlayers[lockActive].obj3.id==93) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==93) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==93) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==93) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(3,1,2);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("93_AMOUNT", goalRollAm);

	}

	
	//Myrmidon: Deal 94_AMOUNT damage before
	if (allPlayers[lockActive].obj1.id==94 || allPlayers[lockActive].obj2.id==94 || allPlayers[lockActive].obj3.id==94) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==94) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==94) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==94) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(5,1,25);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("94_AMOUNT", goalRollAm);

	}


	//Saboteur: Inflict ailments on 100_AMOUNT enemies before
	if (allPlayers[lockActive].obj1.id==100 || allPlayers[lockActive].obj2.id==100 || allPlayers[lockActive].obj3.id==100) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==100) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==100) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==100) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(3,1,9);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("100_AMOUNT", goalRollAm);

	}


	//Saboteur: Kill 101_AMOUNT enemies inflicted with ailments before
	if (allPlayers[lockActive].obj1.id==101 || allPlayers[lockActive].obj2.id==101 || allPlayers[lockActive].obj3.id==101) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==101) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==101) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==101) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(3,1,7);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("101_AMOUNT", goalRollAm);

	}


	//Occultist: Reanimate 106_AMOUNT beings before
	if (allPlayers[lockActive].obj1.id==106 || allPlayers[lockActive].obj2.id==106 || allPlayers[lockActive].obj3.id==106) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==106) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==106) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==106) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(2,1,3);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("106_AMOUNT", goalRollAm);

	}


	//Occultist: Drain 107_AMOUNT HP from beings before
	if (allPlayers[lockActive].obj1.id==107 || allPlayers[lockActive].obj2.id==107 || allPlayers[lockActive].obj3.id==107) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==107) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==107) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==107) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(5,1,15);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("107_AMOUNT", goalRollAm);

	}


	//Occultist: Kill 108_AMOUNT enemies while morphed before
	if (allPlayers[lockActive].obj1.id==108 || allPlayers[lockActive].obj2.id==108 || allPlayers[lockActive].obj3.id==108) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==108) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==108) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==108) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(2,1,6);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("108_AMOUNT", goalRollAm);

	}


	//Occultist: Eat 109_AMOUNT corpses while morphed before
	if (allPlayers[lockActive].obj1.id==109 || allPlayers[lockActive].obj2.id==109 || allPlayers[lockActive].obj3.id==109) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==109) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==109) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==109) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(2,1,2);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("109_AMOUNT", goalRollAm);

	}


	//Basilica: Heal 112_AMOUNT HP before
	if (allPlayers[lockActive].obj1.id==112 || allPlayers[lockActive].obj2.id==112 || allPlayers[lockActive].obj3.id==112) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==112) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==112) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==112) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(5,1,25);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("112_AMOUNT", goalRollAm);

	}


	//Basilica: Recover 113_AMOUNT energy on other players before
	if (allPlayers[lockActive].obj1.id==113 || allPlayers[lockActive].obj2.id==113 || allPlayers[lockActive].obj3.id==113) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==113) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==113) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==113) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(5,1,20);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("113_AMOUNT", goalRollAm);

	}


	//Basilica: Paralyze 114_AMOUNT beings before
	if (allPlayers[lockActive].obj1.id==114 || allPlayers[lockActive].obj2.id==114 || allPlayers[lockActive].obj3.id==114) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==114) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==114) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==114) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(2,1,2);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("114_AMOUNT", goalRollAm);

	}


	//Basilica: Deal 115_AMOUNT damage before
	if (allPlayers[lockActive].obj1.id==115 || allPlayers[lockActive].obj2.id==115 || allPlayers[lockActive].obj3.id==115) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==115) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==115) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==115) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(3,1,9);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("115_AMOUNT", goalRollAm);

	}

	//Triarius: Take 119_AMOUNT damage before
	if (allPlayers[lockActive].obj1.id==119 || allPlayers[lockActive].obj2.id==119 || allPlayers[lockActive].obj3.id==119) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==119) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==119) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==119) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(5,1,22);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("119_AMOUNT", goalRollAm);

	}


	//Basilica: Take 124_AMOUNT damage before
	if (allPlayers[lockActive].obj1.id==124 || allPlayers[lockActive].obj2.id==124 || allPlayers[lockActive].obj3.id==124) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==124) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==124) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==124) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(5,1,22);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("124_AMOUNT", goalRollAm);

	}

	
	//Occultist: Kill 128_AMOUNT enemies with Nosferatu before
	if (allPlayers[lockActive].obj1.id==128 || allPlayers[lockActive].obj2.id==128 || allPlayers[lockActive].obj3.id==128) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==128) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==128) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==128) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(3,1,4);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("128_AMOUNT", goalRollAm);

	}


	//Occultist: Kill 129_AMOUNT enemies with a reanimated corpse before
	if (allPlayers[lockActive].obj1.id==129 || allPlayers[lockActive].obj2.id==129 || allPlayers[lockActive].obj3.id==129) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==129) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==129) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==129) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(3,1,3);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("129_AMOUNT", goalRollAm);

	}


	//Symposiarch: Recover 133_AMOUNT energy on self before
	if (allPlayers[lockActive].obj1.id==133 || allPlayers[lockActive].obj2.id==133 || allPlayers[lockActive].obj3.id==133) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==133) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==133) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==133) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(5,1,20);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("133_AMOUNT", goalRollAm);

	}


	//Symposiarch: Identify 134_AMOUNT rotten food items before
	if (allPlayers[lockActive].obj1.id==134 || allPlayers[lockActive].obj2.id==134 || allPlayers[lockActive].obj3.id==134) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==134) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==134) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==134) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(2,1,2);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("134_AMOUNT", goalRollAm);

	}


	//Symposiarch: Recover 135_AMOUNT energy on other players before
	if (allPlayers[lockActive].obj1.id==135 || allPlayers[lockActive].obj2.id==135 || allPlayers[lockActive].obj3.id==135) {
	
		goalRollAm=0;

		if (allPlayers[lockActive].obj1.id==135) {

			whichObj=1;

		}

		if (allPlayers[lockActive].obj2.id==135) {

			whichObj=2;

		}

		if (allPlayers[lockActive].obj3.id==135) {

			whichObj=3;

		} 
		
		for (i=0;i<goalMult;i++) {
		
			goalRollAm+=rollDie(5,1,20);
			
		}

		
		allPlayers[lockActive]["obj"+whichObj].goal=allPlayers[lockActive]["obj"+whichObj].goal.replace("135_AMOUNT", goalRollAm);

	}

}

function bumpFloor (floorArrIndex, directionFrom, aArrLoc, bDesLoc) {

	console.log("bump");

	//called when bumping into an already-existing floor feature
	
	//reroute
	//determine other possible exits, then set has(Direction) to true
	//return floorArrIndex
	//should return to while loop, redirected
	
	//if bump, can have at most 2 exits

	
	var compareLabel="?";
	var floorLabel="";
	var tempRoomIndex=floorArrIndex;
	
	buildRoom[0].exitAmount=0;
	
	buildRoom[0].hasNorthExit=false;
	buildRoom[0].hasEastExit=false;
	buildRoom[0].hasSouthExit=false;
	buildRoom[0].hasWestExit=false;
	/*buildRoom[0].northPossible;
	buildRoom[0].eastPossible;
	buildRoom[0].southPossible;
	buildRoom[0].westPossible;
	buildRoom[0].northMand;
	buildRoom[0].eastMand;
	buildRoom[0].southMand;
	buildRoom[0].westMand;*/
	
	console.log("bumped, index before checking connect is " +floorArrIndex);
	
	checkConnect (compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
	//console.log("bump index before calling surround is " + floorArrIndex);
	
	//floorArrIndex=floorCheckSurround(compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
	
	//checkConnect (compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
	
	//set current room equal to appropriate direction
	
	console.log("bumped, index after checking connect is " +floorArrIndex);
	
	if (floorArrIndex>=0 && floorArrIndex<=19 && floorArrIndex!=0 && floorArrIndex!=4 && floorArrIndex!=15 && floorArrIndex!=19) {
	
		//floorLabel=floorGridArr[floorArrIndex].label;
		
		//var arrCmp=floorLabel.includes("a");
		
		if (buildRoom[0].northPossible==true || buildRoom[0].southPossible==true || buildRoom[0].eastPossible==true || buildRoom[0].westPossible==true ){
		
		if (floorArrIndex!=aArrLoc && floorArrIndex!=bDesLoc) {
		
			//if coming from west
			if (directionFrom=="west") {
			
				let tempRoll=rollDie(2,1);
			
				if (tempRoll==1 && buildRoom[0].southMand==true && buildRoom[0].northMand==true && (buildRoom[0].eastMand!=true || buildRoom[0].eastPossible!=true) && floorArrIndex>4) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╣");
					
					buildRoom[0].hasNorthExit=true;
					buildRoom[0].hasSouthExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if ((floorArrIndex%5!=4) &&(buildRoom[0].southMand==true || buildRoom[0].southPossible==true) && (buildRoom[0].northMand!=true || buildRoom[0].northPossible!=true) && buildRoom[0].westMand==true) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╦");
					
					buildRoom[0].hasSouthExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if ((floorArrIndex%5!=4) && (buildRoom[0].northMand==true || buildRoom[0].northPossible==true) && (buildRoom[0].southMand!=true || buildRoom[0].southPossible!=true) && buildRoom[0].westMand==true) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╩");
					
					buildRoom[0].hasNorthExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if (buildRoom[0].eastMand!=true && (buildRoom[0].southMand==true || buildRoom[0].southPossible==true) && (buildRoom[0].northMand!=true || buildRoom[0].northPossible!=true)) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╗");
					
					buildRoom[0].hasSouthExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if (buildRoom[0].eastMand!=true && (buildRoom[0].southMand!=true || buildRoom[0].southPossible!=true) && (buildRoom[0].northMand==true || buildRoom[0].northPossible==true)) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╝");
					
					buildRoom[0].hasNorthExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if (buildRoom[0].eastMand==true && buildRoom[0].westMand==true && buildRoom[0].northMand==true && buildRoom[0].southMand==true) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╬");
					
					buildRoom[0].reroute=true;
					
				}
				
				else if (buildRoom[0].northPossible!=true && buildRoom[0].eastPossible!=true && buildRoom[0].southPossible!=true && buildRoom[0].westPossible!=true){
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("←■");
					console.log("made this ←■");
				
				}
				
				else {
				
					console.log("bump to the east, a case is not considered");
				}
			
			}
			
			if (directionFrom=="east") {
			
				let tempRoll=rollDie(2,1);
			
				if (tempRoll==1 && buildRoom[0].southMand==true && buildRoom[0].northMand==true && floorArrIndex>4) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╠");
					
					buildRoom[0].hasNorthExit=true;
					buildRoom[0].hasSouthExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if ((floorArrIndex%5!=0) && (buildRoom[0].southMand==true || buildRoom[0].southPossible==true) && (buildRoom[0].northMand!=true || buildRoom[0].northPossible!=true) && buildRoom[0].eastMand==true) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╦");
					
					buildRoom[0].hasSouthExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if ((floorArrIndex%5!=0) &&(buildRoom[0].northMand==true || buildRoom[0].northPossible==true) && (buildRoom[0].southMand!=true || buildRoom[0].southPossible!=true) && buildRoom[0].eastMand==true) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╩");
					
					buildRoom[0].hasSouthExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if (buildRoom[0].westMand!=true && (buildRoom[0].southMand==true || buildRoom[0].southPossible==true) && (buildRoom[0].northMand!=true || buildRoom[0].northPossible!=true)) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╔");
					
					buildRoom[0].hasSouthExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if (buildRoom[0].westMand!=true && (buildRoom[0].southMand!=true || buildRoom[0].southPossible!=true) && (buildRoom[0].northMand==true || buildRoom[0].northPossible==true)) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╚");
					
					buildRoom[0].hasNorthExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if (buildRoom[0].eastMand==true && buildRoom[0].westMand==true && buildRoom[0].northMand==true && buildRoom[0].southMand==true) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╬");
					
					buildRoom[0].reroute=true;
					
				}
				
				else if (buildRoom[0].northPossible!=true && buildRoom[0].eastPossible!=true && buildRoom[0].southPossible!=true && buildRoom[0].westPossible!=true){
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("■→");
					console.log("made this ■→");
				
				}
				
				else {
				
					console.log("bump to the west, a case is not considered");
				}
			
			}
			
			if (directionFrom=="north") {
			
				let tempRoll=rollDie(2,1);
			
				if (tempRoll==1 && buildRoom[0].eastMand==true && buildRoom[0].westMand==true && buildRoom[0].northMand!=true && (buildRoom[0].southMand==true || buildRoom[0].southPossible==true)) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╦");
					
					buildRoom[0].hasEastExit=true;
					buildRoom[0].hasWestExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if (buildRoom[0].northMand==true && (buildRoom[0].westMand==true || buildRoom[0].westPossible==true) && (buildRoom[0].eastMand!=true) && floorArrIndex>4 && floorArrIndex<15) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╣");
					
					buildRoom[0].hasWestExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if (buildRoom[0].northMand==true && (buildRoom[0].eastMand==true || buildRoom[0].eastPossible==true) && (buildRoom[0].westMand!=true) && floorArrIndex>4 && floorArrIndex<15) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╠");
					
					buildRoom[0].hasSouthExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if (buildRoom[0].northMand!=true && (buildRoom[0].eastMand==true || buildRoom[0].eastPossible==true) && (buildRoom[0].westMand!=true || buildRoom[0].westPossible!=true) && floorArrIndex<15) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╔");
					
					buildRoom[0].hasEastExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if (buildRoom[0].northMand!=true && (buildRoom[0].eastMand!=true || buildRoom[0].eastPossible!=true) && (buildRoom[0].westMand==true || buildRoom[0].westPossible==true) && floorArrIndex<15) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╗");
					
					buildRoom[0].hasWestExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if (buildRoom[0].eastMand==true && buildRoom[0].westMand==true && buildRoom[0].northMand==true && buildRoom[0].southMand==true) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╬");
					
					buildRoom[0].reroute=true;
					
				}
				
				else if (buildRoom[0].northPossible!=true && buildRoom[0].eastPossible!=true && buildRoom[0].southPossible!=true && buildRoom[0].westPossible!=true){
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("■<br>↓");
					console.log("made this ■<br>↓");
				
				}
				
				else {
				
					console.log("bump to the north, a case is not considered");
				}
			
			}
			
			if (directionFrom=="south") {
			
				let tempRoll=rollDie(2,1);
			
				if (tempRoll==1 && buildRoom[0].eastMand==true && buildRoom[0].westMand==true && buildRoom[0].southMand!=true && (buildRoom[0].northMand==true || buildRoom[0].northPossible==true)) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╩");
					
					buildRoom[0].hasEastExit=true;
					buildRoom[0].hasWestExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if (buildRoom[0].southMand==true && (buildRoom[0].westMand==true || buildRoom[0].westPossible==true) && (buildRoom[0].eastMand!=true) && floorArrIndex>4  && floorArrIndex<15) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╣");
					
					buildRoom[0].hasWestExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if (buildRoom[0].southMand==true && (buildRoom[0].eastMand==true || buildRoom[0].eastPossible==true) && (buildRoom[0].westMand!=true) && floorArrIndex>4 && floorArrIndex<15) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╠");
					
					buildRoom[0].hasSouthExit=true;
					buildRoom[0].reroute=true;
				}
				

				else if (buildRoom[0].southMand!=true && (buildRoom[0].eastMand==true || buildRoom[0].eastPossible==true) && (buildRoom[0].westMand!=true || buildRoom[0].westPossible!=true) && floorArrIndex>4) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╚");
					
					buildRoom[0].hasEastExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if (buildRoom[0].southMand!=true && (buildRoom[0].eastMand!=true || buildRoom[0].eastPossible!=true) && (buildRoom[0].westMand==true || buildRoom[0].westPossible==true) && floorArrIndex>4) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╝");
					
					buildRoom[0].hasWestExit=true;
					buildRoom[0].reroute=true;
				}
				
				else if (buildRoom[0].eastMand==true && buildRoom[0].westMand==true && buildRoom[0].northMand==true && buildRoom[0].southMand==true) {
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("╬");
					
					buildRoom[0].reroute=true;
					
				}
				
				else if (buildRoom[0].northPossible!=true && buildRoom[0].eastPossible!=true && buildRoom[0].southPossible!=true && buildRoom[0].westPossible!=true){
				
					floorLabel=floorGridArr[floorArrIndex].label;
					$("#" + floorLabel).html("■<br>↓");
					console.log("made this ■<br>↓");
				}
				
				else {
				
					console.log("bump to the south, a case is not considered");
				}
			
			}
			
			/*let choose=false;
			
			if (buildRoom[0].hasNorthExit==true) {
			

			
				floorArrIndex-=5;
				choose=true;
				console.log("N");
			}
			
			else if (buildRoom[0].hasEastExit==true && choose==false) {
			

			
				floorArrIndex+=1;
				choose=true;
				console.log("E");
			}
			
			else if (buildRoom[0].hasSouthExit==true && choose==false) {
			

			
				floorArrIndex+=5;
				choose=true;
				console.log("S");
			}
			
			else if (buildRoom[0].hasWestExit==true && choose==false) {

			
				floorArrIndex-=1;
				choose=true;
				console.log("W");
			}*/
		
		}//not on arrival or descend tile
		
		} //has a possible exit
	
	} //in bounds
	
	

	buildRoom[0].floorIndex=floorArrIndex;
	 
	//if totally surrounded, make "room", better hope hasMultipiece == true
	//.shift buildRoom
	
	if (buildRoom[0].northPossible==false && buildRoom[0].eastPossible==false && buildRoom[0].southPossible==false && buildRoom[0].westPossible==false) {
	
		deadEnd=true;
		console.log("dead end");
		
		
		//if moving onto empty, aka if not stack popped and surrounded

		if (floorArrIndex>=0 && floorArrIndex<=19) {
		
			floorLabel=floorGridArr[floorArrIndex].label;
			compareLabel=$("#" + floorLabel).html();
		
			if (compareLabel=="█") {
				floorLabel=floorGridArr[floorArrIndex].label;
				$("#" + floorLabel).html("room");
				console.log("ran into dead end, made room");
			}
		
		}
		
		
		//remove old deadend from stack if multipiece
		//preserve stack if this was only multipiece
		
		let tempInd=buildRoom.length;
		tempInd--;
		

		
		if (buildRoom[tempInd].isMulti==true && buildRoom.length>1) {
		
			console.log("prune");
			buildRoom.pop();
			

			//console.log(buildRoom[0].floorIndex);
			//floorArrIndex=buildRoom[0].floorIndex; //dont use this!
		}
		
		console.log("buildRoom length is: " + buildRoom.length);
		
		//pop head of stack to first multipiece
		if (buildRoom.length>1) {
		
			console.log("deadend pop");
			//buildRoom[1]=buildRoom[0];
			buildRoom.shift();
			stackPopped=true;
			
			//console.log(buildRoom[0].floorIndex);
			floorArrIndex=buildRoom[0].floorIndex;
			buildRoom[0].hasMultiPiece=false;
			console.log("new index is: " + floorArrIndex);
			
			console.log("checking surroundings of new popped room");
			checkConnect (compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
			//floorArrIndex=floorCheckSurround(compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
			
			while (buildRoom.length>1 && buildRoom[0].northPossible==false && buildRoom[0].eastPossible==false && buildRoom[0].southPossible==false && buildRoom[0].westPossible==false) {
				
				console.log("last popped room was dead end");
				//buildRoom[1]=buildRoom[0];
				buildRoom.shift();
				stackPopped=true;
				
				//console.log(buildRoom[0].floorIndex);
				floorArrIndex=buildRoom[0].floorIndex; //not needed since return buildRoom's anyway?
				buildRoom[0].hasMultiPiece=false;
				console.log("new index is: " + floorArrIndex);
				
				console.log("checking surroundings of new popped room");
				checkConnect (compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
				//floorArrIndex=floorCheckSurround(compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
				
			}
			
			if (buildRoom.length==1) {
			
				console.log("popped all in stack and all were dead ends");
				//floorArrIndex=777;
				
				floorArrIndex=buildRoom[0].floorIndex;
				buildRoom[0].hasMultiPiece=false;
				console.log("new index is: " + floorArrIndex);
				
				console.log("checking surroundings of new popped room");
				checkConnect (compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
				//floorArrIndex=floorCheckSurround(compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
				
				while (buildRoom.length>1 && buildRoom[0].northPossible==false && buildRoom[0].eastPossible==false && buildRoom[0].southPossible==false && buildRoom[0].westPossible==false) {
					
					console.log("last popped room was dead end");
					//buildRoom[1]=buildRoom[0];
					buildRoom.shift();
					stackPopped=true;
					
					//console.log(buildRoom[0].floorIndex);
					floorArrIndex=buildRoom[0].floorIndex; //not needed since return buildRoom's anyway?
					buildRoom[0].hasMultiPiece=false;
					console.log("new index is: " + floorArrIndex);
					
					console.log("checking surroundings of new popped room");
					checkConnect (compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
					//floorArrIndex=floorCheckSurround(compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
					
				} //while
				
				//check if exits of popped room are now occupied
				
				//move to appropriate position from popped room
				
				let dirChosen=false;
				prevRoomIndex=777;
				
				//move up one if has north exit
				if (buildRoom[0].hasNorthExit==true) {
				
					//not occupied
					if (buildRoom[0].northPossible==true) {
				
						prevRoomIndex=floorArrIndex;
						floorArrIndex-=5;
						
						//check if destination
						floorLabel=floorGridArr[floorArrIndex].label;
						compareLabel=$("#" + floorLabel).html();
						
						if (compareLabel!="b" && compareLabel=="█") {
							dirChosen=true;
						}
						
						//move back and exit is false
						else {
						
							buildRoom[0].hasNorthExit=false;
							floorArrIndex+=5;
							prevRoomIndex=777;
						}
					}
					
					//occupied
					else {
					
						buildRoom[0].hasNorthExit=false;
					}
		
				}
				
				//move right one if has east exit
				else if (buildRoom[0].hasEastExit==true && dirChosen==false) {
				
					if (buildRoom[0].eastPossible==true) {
					
						prevRoomIndex=floorArrIndex;
						floorArrIndex+=1;
						
						//check if destination
						floorLabel=floorGridArr[floorArrIndex].label;
						compareLabel=$("#" + floorLabel).html();
						
						if (compareLabel!="b" && compareLabel=="█") {
							dirChosen=true;
						}
						
						//move back and exit is false
						else {
						
							buildRoom[0].hasEastExit=false;
							floorArrIndex-=1;
							prevRoomIndex=777;
						}			
					}
					
					//occupied
					else {
					
						buildRoom[0].hasEastExit=false;
					}
				}
				
				//move down one if has south exit
				else if (buildRoom[0].hasSouthExit==true && dirChosen==false) {
				
					if (buildRoom[0].southPossible==true) {
						prevRoomIndex=floorArrIndex;
						floorArrIndex+=5;
						
						//check if destination
						floorLabel=floorGridArr[floorArrIndex].label;
						compareLabel=$("#" + floorLabel).html();
						
						if (compareLabel!="b" && compareLabel=="█") {
							dirChosen=true;
						}
						
						//move back and exit is false
						else {
						
							buildRoom[0].hasSouthExit=false;
							floorArrIndex-=5;
							prevRoomIndex=777;
						}
						
					}
		
					//occupied
					else {
					
						buildRoom[0].hasSouthExit=false;
					}
				}
				
				//move left one if has west exit
				else if (buildRoom[0].hasWestExit==true && dirChosen==false) {
				
					if (buildRoom[0].westPossible==true) {
						prevRoomIndex=floorArrIndex;
						floorArrIndex-=1;
						//check if destination
						floorLabel=floorGridArr[floorArrIndex].label;
						compareLabel=$("#" + floorLabel).html();
						
						if (compareLabel!="b" && compareLabel=="█") {
							dirChosen=true;
						}
						
						//move back and exit is false
						else {
							
							buildRoom[0].hasWestExit=false;
							floorArrIndex+=1;
							prevRoomIndex=777;
						}
					}
					
					//occupied
					else {
					
						buildRoom[0].hasWestExit=false;
					}

				}
			}

		}
		
		
	}
	
	


	//buildRoom[0].floorIndex=floorArrIndex;
	//return buildRoom[0].floorIndex;
	console.log("bump returning index " + floorArrIndex);
	return floorArrIndex; //instead?

}

function setFloorAsRoom (floorArrIndex, directionFrom) {

	//called when creating floor
	//whenever room is made
	//chance of being normal room, shop, or secret room

	//create random valid exits
	
	console.log("making room");
	
	var compareLabel="";
	var floorLabel="";
	var tempLabel="";
	var tempRoomIndex=floorArrIndex;
	
	buildRoom[0].exitAmount=0;
	
	buildRoom[0].hasNorthExit=false;
	buildRoom[0].hasEastExit=false;
	buildRoom[0].hasSouthExit=false;
	buildRoom[0].hasWestExit=false;
	buildRoom[0].northPossible=false;
	buildRoom[0].eastPossible=false;
	buildRoom[0].southPossible=false;
	buildRoom[0].westPossible=false;
	buildRoom[0].exitAmount=0;
	
	//console.log("index before calling surround is " + floorArrIndex);
	//floorArrIndex=floorCheckSurround(compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
	//console.log("index after calling surround is " + floorArrIndex);
	checkConnect(compareLabel, floorLabel, tempRoomIndex, floorArrIndex);
	
	let tempRoll=0;
	
	while (buildRoom[0].exitAmount==0 && (buildRoom[0].northPossible==true || buildRoom[0].southPossible==true || buildRoom[0].eastPossible==true || buildRoom[0].westPossible==true)) {
	
		if (buildRoom[0].northPossible==true) {
		
			tempRoll=rollDie(2,1);
			
			if (tempRoll==1 || buildRoom[0].northMand==true || hitDes==false) {
			
				buildRoom[0].hasNorthExit=true;
				buildRoom[0].exitAmount++;
				
				console.log("making room with n");
			}
		}
		
		if (buildRoom[0].southPossible==true) {
		
			tempRoll=rollDie(2,1);
			
			if (tempRoll==1 || buildRoom[0].southMand==true || hitDes==false) {
			
				buildRoom[0].hasSouthExit=true;
				buildRoom[0].exitAmount++;
				
				console.log("making room with s");
			}
		}
		
		if (buildRoom[0].eastPossible==true) {
		
			tempRoll=rollDie(2,1);
			
			if (tempRoll==1 || buildRoom[0].eastMand==true || hitDes==false) {
			
				buildRoom[0].hasEastExit=true;
				buildRoom[0].exitAmount++;
				
				console.log("making room with e");
			}
		}
		
		if (buildRoom[0].westPossible==true) {
		
			tempRoll=rollDie(2,1);
			
			if (tempRoll==1 || buildRoom[0].westMand==true || hitDes==false) {
			
				buildRoom[0].hasWestExit=true;
				buildRoom[0].exitAmount++;
				
				console.log("making room with w");
			}
		}
	
	} //while
	
	if (buildRoom[0].exitAmount>2) {
	
		newBuildRoom(floorArrIndex, buildRoom[0].hasNorthExit, buildRoom[0].hasEastExit, buildRoom[0].hasSouthExit, buildRoom[0].hasWestExit, buildRoom[0].exitAmount);
	}
	
	
	//console.log("room n " +  + + + +
	
	//change arrival label
	
	//N
	if (buildRoom[0].hasNorthExit==true && buildRoom[0].hasEastExit==false && buildRoom[0].hasSouthExit==false && buildRoom[0].hasWestExit==false) {
	
		tempLabel="↑<br>■"; //hehe, bra
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//E
	if (buildRoom[0].hasNorthExit==false && buildRoom[0].hasEastExit==true && buildRoom[0].hasSouthExit==false && buildRoom[0].hasWestExit==false) {
	
		tempLabel="■→";
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html(tempLabel);
		
	}

	//S
	if (buildRoom[0].hasNorthExit==false && buildRoom[0].hasEastExit==false && buildRoom[0].hasSouthExit==true && buildRoom[0].hasWestExit==false) {
	
		tempLabel="■<br>↓";
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//W
	if (buildRoom[0].hasNorthExit==false && buildRoom[0].hasEastExit==false && buildRoom[0].hasSouthExit==false && buildRoom[0].hasWestExit==true) {
	
		tempLabel="←■";
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	

	// N/E
	if (buildRoom[0].hasNorthExit==true && buildRoom[0].hasEastExit==true && buildRoom[0].hasSouthExit==false && buildRoom[0].hasWestExit==false) {
	
		tempLabel="↑<br>■→";
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//N/S
	if (buildRoom[0].hasNorthExit==true && buildRoom[0].hasEastExit==false && buildRoom[0].hasSouthExit==true && buildRoom[0].hasWestExit==false) {
	
		tempLabel="↑<br>■<br>↓";
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//N/W
	if (buildRoom[0].hasNorthExit==true && buildRoom[0].hasEastExit==false && buildRoom[0].hasSouthExit==false && buildRoom[0].hasWestExit==true) {
	
		tempLabel="↑<br>←■";
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//E/S
	if (buildRoom[0].hasNorthExit==false && buildRoom[0].hasEastExit==true && buildRoom[0].hasSouthExit==true && buildRoom[0].hasWestExit==false) {
	
		tempLabel="■→<br>↓";
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//E/W
	if (buildRoom[0].hasNorthExit==false && buildRoom[0].hasEastExit==true && buildRoom[0].hasSouthExit==false && buildRoom[0].hasWestExit==true) {
	
		tempLabel="←■→";
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//S/W
	if (buildRoom[0].hasNorthExit==false && buildRoom[0].hasEastExit==false && buildRoom[0].hasSouthExit==true && buildRoom[0].hasWestExit==true) {
	
		tempLabel="←■<br>↓";
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//N/E/S
	if (buildRoom[0].hasNorthExit==true && buildRoom[0].hasEastExit==true && buildRoom[0].hasSouthExit==true && buildRoom[0].hasWestExit==false) {
	
		tempLabel="↑<br>■→<br>↓";
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//N/E/W
	if (buildRoom[0].hasNorthExit==true && buildRoom[0].hasEastExit==true && buildRoom[0].hasSouthExit==false && buildRoom[0].hasWestExit==true) {
	
		tempLabel="↑<br>←■→";
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//N/W/S
	if (buildRoom[0].hasNorthExit==true && buildRoom[0].hasEastExit==false && buildRoom[0].hasSouthExit==true && buildRoom[0].hasWestExit==true) {
	
		tempLabel="↑<br>←■<br>↓";
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//W/S/E
	if (buildRoom[0].hasNorthExit==false && buildRoom[0].hasEastExit==true && buildRoom[0].hasSouthExit==true && buildRoom[0].hasWestExit==true) {
	
		tempLabel="←■→<br>↓";
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//N/E/S/W
	if (buildRoom[0].hasNorthExit==true && buildRoom[0].hasEastExit==true && buildRoom[0].hasSouthExit==true && buildRoom[0].hasWestExit==true) {
	
		tempLabel="↑<br>←■→<br>↓";
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html(tempLabel);
		
	}
	
	//no exits
	/*if (buildRoom[0].hasNorthExit==false && buildRoom[0].hasEastExit==false && buildRoom[0].hasSouthExit==false && buildRoom[0].hasWestExit==false) {
	
		tempLabel="???";
		floorLabel=floorGridArr[floorArrIndex].label;
		$("#" + floorLabel).html(tempLabel);
		
	}*/
	
	if (directionFrom=="south") {
	
		buildRoom[0].hasNorthExit=false;
	}
	
	if (directionFrom=="north") {
	
		buildRoom[0].hasSouthExit=false;
	}
	
	if (directionFrom=="west") {
	
		buildRoom[0].hasEastExit=false;
	}
	
	if (directionFrom=="east") {
	
		buildRoom[0].hasWestExit=false;
	}
	
	
	
	
	console.log("made room");
	//floorLabel=floorGridArr[floorArrIndex].label;
	//$("#" + floorLabel).html("room");
	
}

function checkConnect (compareLabel, floorLabel, floorArrIndex) {

	var tempRoomIndex;

	console.log("checking connect");

	//check for connections when making new floor piece
	
	compareLabel=" ";

	buildRoom[0].northPossible=false;
	buildRoom[0].eastPossible=false;
	buildRoom[0].southPossible=false;
	buildRoom[0].westPossible=false;
	
	buildRoom[0].northMand=false;
	buildRoom[0].eastMand=false;
	buildRoom[0].southMand=false;
	buildRoom[0].westMand=false;
	
	var checkArrowN=false;
	var checkArrowE=false;
	var checkArrowS=false;
	var checkArrowW=false;
	

	
	//check north of arrival
	tempRoomIndex=floorArrIndex-5;
	
	if (tempRoomIndex>=0 && tempRoomIndex<=19) {
	
		if (tempRoomIndex<0) {
		
			alert("wtf");
		}
	
		//tempRoomIndex=floorArrIndex-5;
	
		floorLabel=floorGridArr[tempRoomIndex].label;
		compareLabel=$("#" + floorLabel).html();
		
		checkArrowS=compareLabel.includes("↓");
		
		//check if opening to north
		if (compareLabel=="█" || compareLabel=="b") {
		
			buildRoom[0].northPossible=true;
			console.log("checking north, empty space/des");
			
		}

		if (checkArrowS==true || compareLabel=="╔" || compareLabel=="╗" || compareLabel=="╦" || compareLabel=="╠" || compareLabel=="╣" || compareLabel=="╬" || compareLabel=="║") {
			
			buildRoom[0].northPossible=true;
			buildRoom[0].northMand=true;
		}
	}
	
	
	
	compareLabel=" ";
	
	
	checkArrowN=false;
	checkArrowE=false;
	checkArrowS=false;
	checkArrowW=false;


	//check east of arrival
	tempRoomIndex=floorArrIndex+1;
	
	if ((tempRoomIndex>=0 && tempRoomIndex<=19) && (floorArrIndex!=4 && floorArrIndex!=9 && floorArrIndex!=14 && floorArrIndex!=19) ) {
	
		if (floorArrIndex%5==4) {
		
			console.log("wtf");
		}
	
		//tempRoomIndex=floorArrIndex+1;
	
		floorLabel=floorGridArr[tempRoomIndex].label;
		compareLabel=$("#" + floorLabel).html();
		
		checkArrowW=compareLabel.includes("←");
		
		if (compareLabel=="█" || compareLabel=="b") {
	
		buildRoom[0].eastPossible=true;
		
		console.log("checking east, empty space/des");
		
		}
		
		if (checkArrowW==true || compareLabel=="╗" || compareLabel=="╝" || compareLabel=="╦" || compareLabel=="╩" || compareLabel=="╣" || compareLabel=="╬" || compareLabel=="═") {
			
			buildRoom[0].eastPossible=true;
			buildRoom[0].eastMand=true;
			
		}
		
	}

	

	compareLabel=" ";
	
	checkArrowN=false;
	checkArrowE=false;
	checkArrowS=false;
	checkArrowW=false;
	
	
	//check south of arrival
	tempRoomIndex=floorArrIndex+5;
	
	if (tempRoomIndex>=0 && tempRoomIndex<=19) {
	
		if (tempRoomIndex>19) {
		
			alert("wtf");
		}
	
	
		//tempRoomIndex=floorArrIndex+5;
	
		floorLabel=floorGridArr[tempRoomIndex].label;
		compareLabel=$("#" + floorLabel).html();
		
		checkArrowN=compareLabel.includes("↑");
		
		if (compareLabel=="█" || compareLabel=="b") {
	
			buildRoom[0].southPossible=true;
			console.log("checking south, empty space/des");
		}
		
		if (checkArrowN==true || compareLabel=="╚" || compareLabel=="╝" || compareLabel=="╩" || compareLabel=="╠" || compareLabel=="╣" || compareLabel=="╬" || compareLabel=="║") {
			
			buildRoom[0].southPossible=true;
			buildRoom[0].southMand=true;
			
		}
		
	}
	
	
	
	
	

	compareLabel=" ";
	
	checkArrowN=false;
	checkArrowE=false;
	checkArrowS=false;
	checkArrowW=false;
	
	//check west of arrival
	tempRoomIndex=floorArrIndex-1;
	
	if ((tempRoomIndex>=0 && tempRoomIndex<=19) && (floorArrIndex!=0 && floorArrIndex!=5 && floorArrIndex!=10 && floorArrIndex!=15)) {
	

		//tempRoomIndex=floorArrIndex-1;
	
		floorLabel=floorGridArr[tempRoomIndex].label;
		compareLabel=$("#" + floorLabel).html();
		
		checkArrowE=compareLabel.includes("→");
		
		if (compareLabel=="█" || compareLabel=="b") {
	
		buildRoom[0].westPossible=true;
		console.log("checking west, empty space/des");
		
		}
		
		if (checkArrowE==true || compareLabel=="╔" || compareLabel=="╚" || compareLabel=="╦" || compareLabel=="╠" || compareLabel=="╩" || compareLabel=="╬" || compareLabel=="═") {
			
			buildRoom[0].westPossible=true;
			buildRoom[0].westMand=true;
		}
	}
	
	
	

}

function floorCheckSurround (compareLabel, floorLabel, tempRoomIndex, floorArrIndex) {

	console.log("check surround");

	buildRoom[0].hasNorthExit=false;
	buildRoom[0].hasEastExit=false;
	buildRoom[0].hasSouthExit=false;
	buildRoom[0].hasWestExit=false;
	
	compareLabel=" ";

	
	//check north of arrival
	tempRoomIndex=floorArrIndex-5;
	
	if (tempRoomIndex>=0 && tempRoomIndex<=19) {
	
		floorLabel=floorGridArr[tempRoomIndex].label;
		compareLabel=$("#" + floorLabel).html();
		
	}
	
	
	if (tempRoomIndex<0 || compareLabel!="█") {

	
		buildRoom[0].hasNorthExit=false;
		//buildRoom[0].northPossible=false;
	}
	else if ((tempRoomIndex>=0 && tempRoomIndex<=19) && (compareLabel=="█" || compareLabel=="b")){
		//buildRoom[0].hasNorthExit=true;
		//buildRoom[0].exitAmount++;
		buildRoom[0].northPossible=true;
		console.log("N open");
	}
	
	
	
	//check east of arrival
	tempRoomIndex=floorArrIndex+1;
	
	if (tempRoomIndex>=0 && tempRoomIndex<=19) {
		floorLabel=floorGridArr[tempRoomIndex].label;
		compareLabel=$("#" + floorLabel).html();
	}
	
	tempRoomIndex=floorArrIndex;
	
	if (compareLabel!="█" && compareLabel!="b") {

	
		buildRoom[0].hasEastExit=false;
		//buildRoom[0].eastPossible=false;
	}
	else if  ((compareLabel=="b" || compareLabel=="█") && (tempRoomIndex>=0 && tempRoomIndex<=19) && (tempRoomIndex!=4 && tempRoomIndex!=9 && tempRoomIndex!=14 && tempRoomIndex!=19)) {
		//buildRoom[0].hasEastExit=true;
		//buildRoom[0].exitAmount++;
		buildRoom[0].eastPossible=true;
		console.log("E open");
	}
	
	//check south of arrival
	tempRoomIndex=floorArrIndex+5;
	
	if (tempRoomIndex>=0 && tempRoomIndex<=19) {
	
		floorLabel=floorGridArr[tempRoomIndex].label;
		compareLabel=$("#" + floorLabel).html();
	}
	
	
	if (tempRoomIndex>19 ||compareLabel!="█") {
		buildRoom[0].hasSouthExit=false;
		//buildRoom[0].southPossible=false;
	}
	else if  ((tempRoomIndex>=0 && tempRoomIndex<=19) && (compareLabel=="█" || compareLabel=="b")) {
	
		//buildRoom[0].hasSouthExit=true;
		//buildRoom[0].exitAmount++;
		
		buildRoom[0].southPossible=true;
		console.log("S open");
	
		/*console.log("here from " + floorArrIndex);
		console.log("now at " + tempRoomIndex);
		console.log("S open");*/
		
	}
	
	
	//check west of arrival
	tempRoomIndex=floorArrIndex-1;
	
	if (tempRoomIndex>=0 && tempRoomIndex<=19) {
		floorLabel=floorGridArr[tempRoomIndex].label;
		compareLabel=$("#" + floorLabel).html();
	}
	
	tempRoomIndex=floorArrIndex;
	
	if (compareLabel!="█") {
		buildRoom[0].hasWestExit=false;
		//buildRoom[0].westPossible=false;
	}
	else if  ((compareLabel=="b" || compareLabel=="█") && (tempRoomIndex>=0 && tempRoomIndex<=19) && (tempRoomIndex!=0 && tempRoomIndex!=5 && tempRoomIndex!=10 && tempRoomIndex!=15)) {
		//buildRoom[0].hasWestExit=true;
		//buildRoom[0].exitAmount++;
		
		buildRoom[0].westPossible=true;
		
		console.log("W open");
	}
	
	
	
	
	return floorArrIndex;
}

$( "#floorDecBut" ).click(function( event ) {


	

	if (currFloor>0) {
		currFloor--;
	
		let labInd=currFloor;
		labInd++;
	
		$("#floorLab").html("Floor " + labInd);
	
	}
	
	
	//clear floor
	for (i=0;i<floorSize;i++)
	{
			$("div.floorContainer").find("button").css("background", butDefColor);
			$("#floor" + i).html("█");
	}
	
	if (allFloors[currFloor].floorExists==true) {
	
		//load floor
		for (i=0;i<floorSize;i++) {
		
			$("#floor" + i).html(allFloors[currFloor].gridSymbols[i])
		
		}
	
	}
	

})

$( "#floorIncBut" ).click(function( event ) {

	//console.log("inc");
	
	
	if (currFloor<9) {
		currFloor++;
	
		let labInd=currFloor;
		labInd++;
	
		$("#floorLab").html("Floor " + labInd);
		
	}
	
	//clear floor
	for (i=0;i<floorSize;i++)
	{
			$("div.floorContainer").find("button").css("background", butDefColor);
			$("#floor" + i).html("█");
	}
	
	if (allFloors[currFloor].floorExists==true) {
		
		//load floor
		for (i=0;i<floorSize;i++) {
		
			$("#floor" + i).html(allFloors[currFloor].gridSymbols[i])
		
		}
	
	}

})

$("div.floorContainer").find("button").click(function( event ) {

	var butId=this.id;
	//var tempStr="";
	
	//clear all tiles but selected
	for (i=0;i<floorSize;i++)
	{
		$("div.floorContainer").find("button").css("background", butDefColor);
	}
	
	
	
	this.style.background=butSelColor;
	
	currFloorSym=$("#" + this.id).text();
	
	//tempStr=butId.replace("floor", "");
	//tempStr=parseInt(tempStr);
	
	
	floorTileIndex=butId.replace("floor", "");

	tempIndex=parseInt(floorTileIndex);
	
	offset=currFloor;
	offset*=20;
	//alert(tempIndex+offset);
	currRoomIndex=tempIndex+offset;

	
})

$("div.floorEdit").find("button").click(function( event ) {

	if (floorTileIndex>=0) {

		var tempStr=$("#" + this.id).html();

		$("#floor" + floorTileIndex).html(tempStr);
		
		floorGridArr[floorTileIndex].symbol=tempStr;

		currFloorSym=tempStr;
		
		
		//allFloors[currFloor].gridSymbols[floorTileIndex]=floorGridArr[floorTileIndex].symbol;
		//allRooms[tempRoomIndex].floorSymbol=floorGridArr[i].symbol;
		
		//alert(currFloorSym);
		
	}

	
})

$("#saveFloorBut").click(function() {

	var tempRoomIndex=currFloor*20;
	
	
	for (i=0;i<floorSize;i++) {

		allFloors[currFloor].gridSymbols[i]=floorGridArr[i].symbol;
		allRooms[tempRoomIndex].floorSymbol=floorGridArr[i].symbol;
		tempRoomIndex++;
		
	}
	
	allFloors[currFloor].floorExists=true;
	
	

});

function initGenMonst() {

	allRooms[currRoomIndex].roomMonsters[0].monsterPassives=
	{
		fireResist :false,//0,0
		coldResist :false,//0,1
		shockResist :false,//0,2
		disinResist :false,//0,3
		sleepResist :false,//0,4
		poisonResist :false,//0,5
		paralysisResist :false,//0,6
		blindResist :false,//0,7
		petrifyResist :false,//0,8
		sicknessResist :false,//0,9
		drainResist :false,//0,10
		woundResist :false,//1,0
		breathless :false,//1,1
		searching :false,//1,2
		seeInvis :false,//1,3
		invis :false,//1,4
		levitate :false,//1,5
		flying :false,//1,6
		adornment :false,//1,7
		warning :false,//1,8
		telepathy :false,//1,9
		foodApp :false,//1,10
		reflection :false,//2,0
		magicResist :false,//2,1
		waterWalking :false,//2,2
		displacement :false,//2,3
		sustainAbility :false,//2,4
		slowDigest :false,//2,5
		lifeSaving :false,//2,6
		stealth :false,//2,7
		confuseResist :false,//2,8


		brisk :0,//2,9
		haste :0,//2,10
		dash :0,//3,0 //int
		agileDash :0,//3,1 //int
		infravision :false,//3,2 //int
		regen :false,//3,3
		protection:0, //int
		energyRegen :false,//3,4
		noHungCast :false,//3,5

		permSlow:false,
		permBrisk:false,
		permHaste:false,


		fumbling :false,
		isHungry :false,
		tempBrisk:0,//int
		tempHaste:0, //int
		tempRegen:0, //int
		tempConfluence:0, //int
		tempInvis:0, //int

		slow:0, //int
		blind:0, //int 
		sleep:0, //int
		poisoned:0, //int
		confused:0, //int
		taunted:0, //int
		aggravated:0, //int
		paralyzed:0, //int

		hallucin:0, //int
		enfeebled:0, //int
		vulnerable:0, //int
		slippery:0, //int
		petrify:0, //int
		vomit:0, //int
		strangle:0, //int 
		engulfed:0, //int

		woundedArmLeft:0, //int
		woundedArmRight:0, //int
		woundedLegLeft:0, //int
		woundedLegRight:0 //int
		
		
	};
	
	allRooms[currRoomIndex].roomMonsters[0].speed=12;
	allRooms[currRoomIndex].roomMonsters[0].actions=0;

	allRooms[currRoomIndex].roomMonsters[0].energyClock=0;
	allRooms[currRoomIndex].roomMonsters[0].hpClock=0;
	allRooms[currRoomIndex].roomMonsters[0].newEnergyClock=true; //bool
	allRooms[currRoomIndex].roomMonsters[0].newHpClock=true; //bool

	allRooms[currRoomIndex].roomMonsters[0].tempACVal=0;
	allRooms[currRoomIndex].roomMonsters[0].tempACDur=0;
	
	allRooms[currRoomIndex].roomMonsters[0].hpCurr=0
	allRooms[currRoomIndex].roomMonsters[0].hpMax=0;
	allRooms[currRoomIndex].roomMonsters[0].energyCurr=0;
	allRooms[currRoomIndex].roomMonsters[0].energyMax=0;
	allRooms[currRoomIndex].roomMonsters[0].armorAC=0;
	allRooms[currRoomIndex].roomMonsters[0].otherAC=0;
	allRooms[currRoomIndex].roomMonsters[0].totalAC=12;
	allRooms[currRoomIndex].roomMonsters[0].toHit=0;
	allRooms[currRoomIndex].roomMonsters[0].speedBonus=0;
	

}


function genGoblin(spawnTile) {

	var hpRoll=rollDie(10,1,10);
	
		
	allRooms[currRoomIndex].roomMonsters.unshift ({
		
			monstName: "Goblin",
			
			monsterExists:true,
			
			size: 1, //0 for tiny, 1 for small, 2 for medium, 3 for large, 4 for huge, 5 for gigantic

			tier: 1, //+1 per difficulty
			
			monstSymbol: "o", //placeholder symbol
			
			monRoomIndex:spawnTile, //where it is in a room
			
			index: spawnTile, //index in current room
	});
	
	initGenMonst();
	
	//individiual monster stats here
	
	allRooms[currRoomIndex].roomMonsters[0].hpCurr=hpRoll;
	allRooms[currRoomIndex].roomMonsters[0].hpMax=hpRoll;
	

}

function genJackal(spawnTile) {

	var hpRoll=rollDie(10,1,5);
	
		
	allRooms[currRoomIndex].roomMonsters.unshift ({
		
			monstName: "Jackal",
			
			monsterExists:true,
			
			size: 1, //0 for tiny, 1 for small, 2 for medium, 3 for large, 4 for huge, 5 for gigantic

			tier: 1, //+1 per difficulty
			
			monstSymbol: "d", //placeholder symbol
			
			monRoomIndex:spawnTile, //where it is in a room
			
			index: spawnTile, //index in current room
	});
	
	initGenMonst();
	
	//individiual monster stats here
	
	allRooms[currRoomIndex].roomMonsters[0].hpCurr=hpRoll;
	allRooms[currRoomIndex].roomMonsters[0].hpMax=hpRoll;
	
	allRooms[currRoomIndex].roomMonsters[0].speedBonus=1;

}

function genImp(spawnTile) {

	var hpRoll=rollDie(5,1,3);
	
		
	allRooms[currRoomIndex].roomMonsters.unshift ({
		
			monstName: "Imp",
			
			monsterExists:true,
			
			size: 1, //0 for tiny, 1 for small, 2 for medium, 3 for large, 4 for huge, 5 for gigantic

			tier: 1, //+1 per difficulty
			
			monstSymbol: "i", //placeholder symbol
			
			monRoomIndex:spawnTile, //where it is in a room
			
			index: spawnTile, //index in current room
	});

	initGenMonst();
	
	//individiual monster stats here
	
	allRooms[currRoomIndex].roomMonsters[0].hpCurr=hpRoll;
	allRooms[currRoomIndex].roomMonsters[0].hpMax=hpRoll;
	
	allRooms[currRoomIndex].roomMonsters[0].speedBonus=2;
	allRooms[currRoomIndex].roomMonsters[0].totalAC=1;
	
}

function genCobra(spawnTile) {

	var hpRoll=rollDie(4,1,3);
	
		
	allRooms[currRoomIndex].roomMonsters.unshift ({
		
		monstName: "Two-Headed Cobra",
		
		monsterExists:true,
		
		size: 1, //0 for tiny, 1 for small, 2 for medium, 3 for large, 4 for huge, 5 for gigantic

		tier: 1, //+1 per difficulty
		
		monstSymbol: "S", //placeholder symbol
		
		monRoomIndex:spawnTile, //where it is in a room
		
		index: spawnTile, //index in current room
	});

	initGenMonst();
	
	//individiual monster stats here
	
	allRooms[currRoomIndex].roomMonsters[0].hpCurr=hpRoll;
	allRooms[currRoomIndex].roomMonsters[0].hpMax=hpRoll;
	
	allRooms[currRoomIndex].roomMonsters[0].speedBonus=2;
	allRooms[currRoomIndex].roomMonsters[0].totalAC=6;
	
}

function genMimic(spawnTile) {

	var hpRoll=rollDie(4,1,3);
	
		
	allRooms[currRoomIndex].roomMonsters.unshift ({
		
		monstName: "Mimic",
		
		monsterExists:true,
		
		size: 1, //0 for tiny, 1 for small, 2 for medium, 3 for large, 4 for huge, 5 for gigantic

		tier: 1, //+1 per difficulty
		
		monstSymbol: "#", //placeholder symbol
		
		monRoomIndex:spawnTile, //where it is in a room
		
		index: spawnTile, //index in current room
		
	});

	initGenMonst();
	
	//individiual monster stats here
	
	allRooms[currRoomIndex].roomMonsters[0].hpCurr=hpRoll;
	allRooms[currRoomIndex].roomMonsters[0].hpMax=hpRoll;
	
	allRooms[currRoomIndex].roomMonsters[0].speedBonus=-3;
	allRooms[currRoomIndex].roomMonsters[0].totalAC=12;
	
}



</script>
</body>
</html>